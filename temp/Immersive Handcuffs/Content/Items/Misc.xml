<?xml version="1.0" encoding="utf-8"?>
<Items>
  <Override>
    <Item name="Blindfold" identifier="blindfold" category="Equipment" maxstacksize="8" cargocontaineridentifier="metalcrate" tags="smallitem" scale="0.5" impactsoundtag="impact_soft" requireaimtouse="true" isshootable="true" useinhealthinterface="true" hideconditionbar="true">
      <PreferredContainer secondary="wreckarmcab,abandonedarmcab,piratearmcab,outpostarmcab" amount="1" spawnprobability="0.02" />
      <PreferredContainer primary="armcab" secondary="secarmcab" />
      <Deconstruct time="5" />
      <Fabricate suitablefabricators="fabricator" requiredtime="10">
        <RequiredSkill identifier="weapons" level="20" />
        <RequiredItem identifier="organicfiber" />
      </Fabricate>
      <Sprite texture="Content/Items/Jobgear/headgears.png" sourcerect="313,407,100,95" depth="0.6" origin="0.5,0.5" />
      <Sprite texture="Content/Items/Jobgear/headgears.png" sourcerect="343,467,50,20" depth="0.6" origin="0.5,0.5" />
      <Body width="38" radius="8" density="30" />
      <Wearable slots="Any,Head" msg="ItemMsgPickUpSelect" autoequipwhenfull="false">
        <sprite texture="Content/Items/Jobgear/headgears.png" limb="Head" inheritlimbdepth="true" inheritscale="true" ignorelimbscale="true" scale="0.8" rotation="15" sourcerect="313,407,100,80" origin="0.58,0.9" />
        <StatusEffect type="OnWearing" target="Character" setvalue="true">
          <Affliction identifier="blindfolded" amount="1" />
        </StatusEffect>
      </Wearable>
    </Item>
    <Item nameidentifier="handcuffset" descriptionidentifier="handcuffset" identifier="handcuffs" category="Equipment" maxstacksize="8" cargocontaineridentifier="metalcrate" tags="smallitem,handlocker" scale="0.5" impactsoundtag="impact_metal_light" requireaimtouse="true" isshootable="true" useinhealthinterface="true" hideconditionbar="true">
      <Upgrade gameversion="0.10.0.0" scale="0.5" />
      <PreferredContainer secondary="wreckarmcab,abandonedarmcab,piratearmcab,outpostarmcab" amount="1" spawnprobability="0.05" />
      <PreferredContainer primary="armcab" secondary="secarmcab" />
      <Price baseprice="30">
        <Price storeidentifier="merchantoutpost" minavailable="1" />
        <Price storeidentifier="merchantcity" multiplier="0.9" minavailable="2" sold="false" />
        <Price storeidentifier="merchantresearch" sold="false" />
        <Price storeidentifier="merchantmilitary" multiplier="0.9" minavailable="3" />
        <Price storeidentifier="merchantmine" sold="false" />
        <Price storeidentifier="merchantarmory" multiplier="0.9" minavailable="3" />
      </Price>
      <Deconstruct time="5" />
      <Fabricate suitablefabricators="fabricator" requiredtime="10">
        <RequiredSkill identifier="weapons" level="20" />
        <RequiredItem identifier="steel" />
      </Fabricate>
      <Sprite texture="%ModDir:3321850228%/Content/Items/IH-ItemsAtlas.png" sourcerect="115,24,60,49" depth="0.6" origin="0.5,0.5" />
      <BrokenSprite texture="%ModDir:3321850228%/Content/Items/IH-ItemsAtlas.png" sourcerect="57,0,52,40" depth="0.6" origin="0.5,0.5" maxcondition="90" fadein="false" />
      <Body width="48" height="34" density="30" />
      <Wearable slots="Any,RightHand+LeftHand" msg="ItemMsgPickUpSelect" autoequipwhenfull="false">
        <sprite texture="Content/Items/Jobgear/Mechanic/safetyharness.png" limb="RightHand" sourcerect="462,1,25,16" origin="0.5,0.8" depth="0.09" inheritlimbdepth="false" inherittexturescale="true" />
        <sprite texture="Content/Items/Jobgear/Mechanic/safetyharness.png" limb="LeftHand" sourcerect="487,1,25,16" origin="0.5,0.8" depth="0.09" inheritlimbdepth="true" inherittexturescale="true" />
        <!-- When item is not contained, set its condition to 50 so the BrokenSprite is displayed instead | The item's condition bar is hidden -->
        <StatusEffect type="OnNotContained" target="This" condition="50" setvalue="true" oneshot="true" />
        <!-- Give the "handcuffed" affliction which spawns "handcuffsequipped" on the character | Specifically used for prisoner mission or when getting cuffed by outpost security -->
        <StatusEffect type="OnWearing" target="Character" setvalue="true">
          <Affliction identifier="handcuffed" amount="1" />
        </StatusEffect>
        <StatusEffect type="OnWearing" target="Character" triggeredEventTargetTag="isarrested" triggeredEventEntityTag="isarrested" eventTargetTags="isarrested" disabledeltatime="true" stackable="false">
          <Conditional IsPlayer="true" />
          <Affliction identifier="sendtojail" amount="1" />
        </StatusEffect>
        <!-- Remove the item when it is worn since it gets replaced by the "handcuffsequipped" -->
        <StatusEffect type="OnWearing" target="This" disabledeltatime="true">
          <Remove />
        </StatusEffect>
        <!-- When the item is contained inside a player inventory, remove the item, spawn the new handcuffs and spawn a key in the same inventory | Should fail if cuffed by security, but no matter what, it always succeeds when cuffed by security, despite the item being at 25 condition, having the tag "cuffed" and the character having the "handcuffed" affliction -->
        <StatusEffect type="OnContained" target="This" comparison="And" delay="0.1" checkconditionalalways="true">
          <Conditional IsPlayer="true" targetcontainer="true" />
          <Conditional handcuffed="lte 0" targetcontainer="true" />
          <Conditional handcuffedreinforced="lte 0" targetcontainer="true" />
          <Remove />
          <SpawnItem identifier="handcuffsspawned" spawnposition="SameInventory" spawnifcantbecontained="true" SpawnIfInventoryFull="true" Equip="true" />
          <SpawnItem identifier="handcuffkey" spawnposition="SameInventory" spawnifcantbecontained="true" SpawnIfInventoryFull="true" />
        </StatusEffect>
      </Wearable>
    </Item>
    <!-- TODO: When game is fixed and allows to apply an affliction to both the target and the character attacking the target, make cuffs noninteractable, enable shootable, replace Holdable with MeleeWeapon and enable the disabled StatusEffects -->
    <Item nameidentifier="handcuffs" descriptionidentifier="handcuffs" identifier="handcuffsspawned" category="Equipment" maxstacksize="8" cargocontaineridentifier="metalcrate" tags="smallitem" scale="0.5" impactsoundtag="impact_metal_light" requireaimtouse="false" isshootable="false" useinhealthinterface="true" hideconditionbar="true" noninteractable="false">
      <Upgrade gameversion="0.10.0.0" scale="0.5" />
      <PreferredContainer primary="armcab" secondary="secarmcab" />
      <Price baseprice="30" sold="false" canbespecial="false">
        <Price storeidentifier="merchantoutpost" minavailable="1" />
        <Price storeidentifier="merchantcity" multiplier="0.9" minavailable="2" sold="false" />
        <Price storeidentifier="merchantresearch" sold="false" />
        <Price storeidentifier="merchantmilitary" multiplier="0.9" minavailable="3" />
        <Price storeidentifier="merchantmine" sold="false" />
        <Price storeidentifier="merchantarmory" multiplier="0.9" minavailable="3" />
      </Price>
      <Deconstruct time="5" />
      <Fabricate suitablefabricators="fabricator" requiredtime="10" amount="2">
        <RequiredSkill identifier="weapons" level="20" />
        <RequiredItem identifier="steel" />
      </Fabricate>
      <Sprite texture="%ModDir:3321850228%/Content/Items/IH-ItemsAtlas.png" sourcerect="57,0,52,40" depth="0.6" origin="0.5,0.5" />
      <Body width="48" height="34" density="30" />
      <!-- original values for meleeweapon: aimable="true" aimpos="0,-50" aimangle="270" -->
      <Holdable characterusable="false" canBeCombined="false" slots="Any,RightHand+LeftHand" aimable="false" handle1="-7,-3" handle2="7,-3" holdpos="30,-20" holdangle="0" reload="1.0" msg="ItemMsgPickUpSelect" HitOnlyCharacters="true">
        <!-- DISABLED DUE TO ITEM NO LONGER SPAWNING IN THE INVENTORY AFTER UNCUFFING | Make the item interactable as it spawns noninteractable to simulate a cooldown to prevent instantly recuffing a person over and over again to stunlock them. Only executes once per round per handcuff to prevent any performance impact -->
        <!-- <StatusEffect type="Always" target="This" noninteractable="false" delay="5" setvalue="true" stackable="false" oneshot="true" /> -->
        <!-- When used via Health Menu on a human without the "handcuffed" affliction, apply an affliction that spawns the equipped version of the handcuffs on the character and apply the "handcuffed" affliction -->
        <StatusEffect type="OnSuccess" target="This,UseTarget" multiplyafflictionsbymaxvitality="true" comparison="And" delay="0.1" stackable="false" disabledeltatime="true">
          <Conditional handcuffed="lte 0" />
          <Conditional handcuffedreinforced="lte 0" />
          <Conditional IsHuman="eq true" />
          <Affliction identifier="stun" amount="0.25" />
          <Affliction identifier="applyhandcuffs" amount="1" />
          <Affliction identifier="handcuffed" amount="100" />
        </StatusEffect>
        <!-- Play a handcuffing sound | Had to be its own effect as the sounds would otherwise refuse to play... -->
        <StatusEffect type="OnUse" target="This">
          <Sound file="%ModDir:3321850228%/Content/Sounds/cuffing1.ogg" volume="2" range="300" loop="false" selectionmode="random" />
          <Sound file="%ModDir:3321850228%/Content/Sounds/cuffing2.ogg" volume="2" range="300" loop="false" selectionmode="random" />
          <Sound file="%ModDir:3321850228%/Content/Sounds/cuffing3.ogg" volume="2" range="300" loop="false" selectionmode="random" />
        </StatusEffect>
        <!-- DISABLED FOR CONSISTENCY WITH THE HANDCUFF KEY | When used as a melee weapon on a human without the "handcuffed" affliction, apply an affliction that spawns the equipped version of the handcuffs on the character and apply the "handcuffed" affliction
        <Attack targetimpulse="2" severlimbsprobability="0.0" itemdamage="0" structuredamage="0" structuresoundtype="StructureSlash">
          <StatusEffect type="OnUse" target="UseTarget" multiplyafflictionsbymaxvitality="true" comparison="And" delay="0.1" stackable="false">
            <Conditional handcuffed="lte 0" />
            <Conditional IsHuman="eq true" />
            <Affliction identifier="applyhandcuffs" amount="1" />
            <Affliction identifier="handcuffed" amount="100" />
          </StatusEffect>
        </Attack> -->
        <!-- Remove the item when it was used on a valid target -->
        <StatusEffect type="OnUse" target="This,UseTarget" comparison="And">
          <Conditional handcuffed="lte 0" />
          <Conditional handcuffedreinforced="lte 0" />
          <Conditional IsHuman="eq true" />
          <Remove />
        </StatusEffect>
      </Holdable>
    </Item>
    <Item nameidentifier="handcuffs" descriptionidentifier="handcuffs" identifier="handcuffsequipped" category="Equipment" maxstacksize="1" cargocontaineridentifier="metalcrate" tags="smallitem,handcuffs,handlocker,regularcuffs" scale="0.5" impactsoundtag="impact_metal_light" noninteractable="true" hideinmenus="true">
      <Deconstruct time="1" />
      <InventoryIcon texture="%ModDir:3321850228%/Content/Items/IH-ItemsAtlas.png" sourcerect="57,0,52,40" origin="0.5,0.5" />
      <Sprite texture="%ModDir:3321850228%/Content/Items/IH-ItemsAtlas.png" sourcerect="57,0,52,40" depth="0.6" origin="0.5,0.5" />
      <Body width="50" height="34" density="30" />
      <Wearable slots="RightHand" msg="ItemMsgPickUpSelect" autoequipwhenfull="true">
        <sprite texture="%ModDir:3321850228%/Content/Items/IH-ItemsAtlas.png" limb="RightForearm" sourcerect="117,1,25,16" origin="0.53,-1.3" depth="0.09" inheritlimbdepth="true" inherittexturescale="true" />
        <sprite texture="%ModDir:3321850228%/Content/Items/IH-ItemsAtlas.png" limb="LeftForearm" sourcerect="142,1,25,16" origin="0.53,-1.3" depth="0.09" inheritlimbdepth="true" inherittexturescale="true" />
        <!-- Constantly reduce the timeframe value at different intervals to make it harder to break free -->
        <StatusEffect type="OnWearing" target="This" timeframe="-1.5" interval="0.5" disabledeltatime="true" />
        <StatusEffect type="OnWearing" target="This" timeframe="-5" interval="4" disabledeltatime="true" />
        <!-- Lock the hands of the character wearing the item | disabled since it's done via "handcuffed" affliction
        <StatusEffect type="OnWearing" target="Character" lockhands="true" setvalue="true" />-->
        <StatusEffect type="OnWearing" target="Character" statuseffecttags="cuffed" duration="0.1" interval="0.1" />
        <!-- Remove the item, if the character has the temporary tag "unlocked" gained from the "retrievehandcuffs" affliction -->
        <StatusEffect type="OnWearing" target="This" condition="0" setvalue="true">
          <Conditional HasStatusTag="eq unlocked" targetcontainer="true" />
        </StatusEffect>
        <StatusEffect type="OnWearing" target="This" oneshot="true" disabledeltatime="true">
          <Conditional isdead="true" targetcontainer="true" />
          <SpawnItem identifier="handcuffsspawned" spawnposition="SameInventory" spawnifcantbecontained="true" SpawnIfInventoryFull="true" />
          <Remove />
        </StatusEffect>
        <!-- Had to break the item instead of removing directly as the sound would otherwise refuse to play. I really hate this game sometimes... -->
        <StatusEffect type="OnBroken" target="This">
          <Sound file="%ModDir:3321850228%/Content/Sounds/uncuffing1.ogg" volume="2.5" range="350" loop="false" />
          <Remove />
        </StatusEffect>
        <!-- Remove the item if it was somehow spawned into a container other than the character's inventory -->
        <StatusEffect type="OnContained" target="This">
          <Conditional HasTag="eq container" />
          <Remove />
        </StatusEffect>
        <!-- Remove the item if it was somehow spawned outside an inventory -->
        <StatusEffect type="OnNotContained" target="This">
          <Remove />
        </StatusEffect>
      </Wearable>
      <!-- GreaterComponent is used for its timeframe value to keep track of progress breaking free -->
      <!-- By pressing the GUI button, the timeframe value increases and if it reaches a value of 25 or higher, the player will be freed -->
      <GreaterComponent canbeselected="false" canbepicked="false" allowingameediting="false" timeframe="0" />
      <CustomInterface canbeselected="false" drawhudwhenequipped="true">
        <GuiFrame style="ItemUI" absoluteoffset="0,0" anchor="BottomCenter" relativesize="0.12,0.08" />
        <Button text="interaction.struggletofree">
          <!-- Increase the timeframe value per button press and create an invisible explosion to jiggle the character a little -->
          <StatusEffect type="OnUse" target="This" timeframe="1" disabledeltatime="true">
            <Explosion range="50" force="0.2" itemdamage="0.0" structuredamage="0.0" ignorecover="true" ballastfloradamage="0.0" camerashake="1" camerashakerange="100" explosiondamage="0" flames="false" smoke="false" shockwave="false" sparks="false" flash="false" underwaterbubble="false" playtinnitus="false" />
          </StatusEffect>
          <!-- Play a rattling sound loop if you spam the button -->
          <StatusEffect type="OnUse" target="This" duration="0.3">
            <Sound file="%ModDir:3321850228%/Content/Sounds/cuffrattleloop.ogg" range="400" volume="1" frequencymultiplier="1.5" loop="true" />
          </StatusEffect>
          <!-- Apply random amounts of bluntrauma and bleeding to the hands on each button press -->
          <StatusEffect type="OnUse" target="Character" targetlimbs="LeftHand" disabledeltatime="true">
            <Affliction identifier="blunttrauma" amount="3" probability="0.1" />
            <Affliction identifier="blunttrauma" amount="2" probability="0.15" />
            <Affliction identifier="blunttrauma" amount="1" probability="0.2" />
            <Affliction identifier="bleeding" amount="1" probability="0.1" />
          </StatusEffect>
          <StatusEffect type="OnUse" target="Character" targetlimbs="RightHand" disabledeltatime="true">
            <Affliction identifier="blunttrauma" amount="3" probability="0.1" />
            <Affliction identifier="blunttrauma" amount="2" probability="0.15" />
            <Affliction identifier="blunttrauma" amount="1" probability="0.2" />
            <Affliction identifier="bleeding" amount="1" probability="0.1" />
          </StatusEffect>
          <!-- On button pressed, if the timeframe is at or above 25, remove the handcuffed affliction from the character and play an uncuffing sound -->
          <StatusEffect type="OnUse" target="This,Character" disabledeltatime="true">
            <Conditional timeframe="gte 25" />
            <ReduceAffliction identifier="handcuffed" amount="1000" />
            <Sound file="%ModDir:3321850228%/Content/Sounds/uncuffing1.ogg" volume="2.5" range="350" loop="false" />
          </StatusEffect>
          <!-- On button pressed, if the timeframe is at or above 25, create a stronger invisible explosion to make the character jiggle harder, play a breaking sound, remove the handcuffs and spawn the broken version at their position -->
          <StatusEffect type="OnUse" target="This" disabledeltatime="true" forceplaysounds="true">
            <Conditional timeframe="gte 25" />
            <Sound file="Content/Sounds/Damage/HitMetal1.ogg" volume="1.0" loop="false" range="500" selectionmode="Random" />
            <Sound file="Content/Sounds/Damage/HitMetal2.ogg" volume="1.0" loop="false" range="500" selectionmode="Random" />
            <Sound file="Content/Sounds/Damage/HitMetal3.ogg" volume="1.0" loop="false" range="500" selectionmode="Random" />
            <Sound file="Content/Sounds/Damage/HitMetal4.ogg" volume="1.0" loop="false" range="500" selectionmode="Random" />
            <Sound file="Content/Sounds/Damage/HitMetal5.ogg" volume="1.0" loop="false" range="500" selectionmode="Random" />
            <Sound file="Content/Sounds/Damage/HitMetal6.ogg" volume="1.0" loop="false" range="500" selectionmode="Random" />
            <Explosion range="100" force="1.5" itemdamage="0.0" structuredamage="0.0" ignorecover="true" ballastfloradamage="0.0" camerashake="1" camerashakerange="100" explosiondamage="0" flames="false" smoke="false" shockwave="false" sparks="false" flash="false" underwaterbubble="false" playtinnitus="false" />
            <Remove />
            <SpawnItem identifier="brokenhandcuffs" spawnposition="This" />
          </StatusEffect>
        </Button>
      </CustomInterface>
    </Item>
    <!-- second variant of the item because using slots="RightHand,LeftHand" prevents the texture from working | slots="RightHand" for one and slots="LeftHand" for another item makes them work again... -->
    <Item nameidentifier="handcuffs" descriptionidentifier="handcuffs" identifier="handcuffsequipped2" category="Equipment" maxstacksize="1" cargocontaineridentifier="metalcrate" tags="smallitem,handcuffs,handlocker,regularcuffs" scale="0.5" impactsoundtag="impact_metal_light" noninteractable="true" hideinmenus="true">
      <Deconstruct time="1" />
      <InventoryIcon texture="%ModDir:3321850228%/Content/Items/IH-ItemsAtlas.png" sourcerect="57,0,52,40" origin="0.5,0.5" />
      <Sprite texture="%ModDir:3321850228%/Content/Items/IH-ItemsAtlas.png" sourcerect="57,0,52,40" depth="0.6" origin="0.5,0.5" />
      <Body width="50" height="34" density="30" />
      <Wearable slots="LeftHand" msg="ItemMsgPickUpSelect" autoequipwhenfull="true">
        <sprite texture="%ModDir:3321850228%/Content/Items/IH-ItemsAtlas.png" limb="RightForearm" sourcerect="117,1,25,16" origin="0.53,-1.3" depth="0.09" inheritlimbdepth="true" inherittexturescale="true" />
        <sprite texture="%ModDir:3321850228%/Content/Items/IH-ItemsAtlas.png" limb="LeftForearm" sourcerect="142,1,25,16" origin="0.53,-1.3" depth="0.09" inheritlimbdepth="true" inherittexturescale="true" />
        <!-- Constantly reduce the timeframe value at different intervals to make it harder to break free -->
        <StatusEffect type="OnWearing" target="This" timeframe="-1.5" interval="0.5" disabledeltatime="true" />
        <StatusEffect type="OnWearing" target="This" timeframe="-5" interval="4" disabledeltatime="true" />
        <!-- Lock the hands of the character wearing the item | disabled since it's done via "handcuffed" affliction
        <StatusEffect type="OnWearing" target="Character" lockhands="true" setvalue="true" />-->
        <StatusEffect type="OnWearing" target="Character" statuseffecttags="cuffed" duration="0.1" interval="0.1" />
        <!-- Remove the item, if the character has the temporary tag "unlocked" gained from the "retrievehandcuffs" affliction -->
        <StatusEffect type="OnWearing" target="This" condition="0" setvalue="true">
          <Conditional HasStatusTag="eq unlocked" targetcontainer="true" />
        </StatusEffect>
        <StatusEffect type="OnWearing" target="This" oneshot="true" disabledeltatime="true">
          <Conditional isdead="true" targetcontainer="true" />
          <SpawnItem identifier="handcuffsspawned" spawnposition="SameInventory" spawnifcantbecontained="true" SpawnIfInventoryFull="true" />
          <Remove />
        </StatusEffect>
        <!-- Had to break the item instead of removing directly as the sound would otherwise refuse to play. I really hate this game sometimes... -->
        <StatusEffect type="OnBroken" target="This">
          <Sound file="%ModDir:3321850228%/Content/Sounds/uncuffing1.ogg" volume="2.5" range="350" loop="false" />
          <Remove />
        </StatusEffect>
        <!-- Remove the item if it was somehow spawned into a container other than the character's inventory -->
        <StatusEffect type="OnContained" target="This">
          <Conditional HasTag="eq container" />
          <Remove />
        </StatusEffect>
        <!-- Remove the item if it was somehow spawned outside an inventory -->
        <StatusEffect type="OnNotContained" target="This">
          <Remove />
        </StatusEffect>
      </Wearable>
      <!-- GreaterComponent is used for its timeframe value to keep track of progress breaking free -->
      <!-- By pressing the GUI button, the timeframe value increases and if it reaches a value of 25 or higher, the player will be freed -->
      <GreaterComponent canbeselected="false" canbepicked="false" allowingameediting="false" timeframe="0" />
      <CustomInterface canbeselected="false" drawhudwhenequipped="true">
        <GuiFrame style="ItemUI" absoluteoffset="0,0" anchor="BottomCenter" relativesize="0.12,0.08" />
        <Button text="interaction.struggletofree">
          <!-- Increase the timeframe value per button press and create an invisible explosion to jiggle the character a little -->
          <StatusEffect type="OnUse" target="This" timeframe="1" disabledeltatime="true">
            <Explosion range="50" force="0.2" itemdamage="0.0" structuredamage="0.0" ignorecover="true" ballastfloradamage="0.0" camerashake="1" camerashakerange="100" explosiondamage="0" flames="false" smoke="false" shockwave="false" sparks="false" flash="false" underwaterbubble="false" playtinnitus="false" />
          </StatusEffect>
          <!-- Play a rattling sound loop if you spam the button -->
          <StatusEffect type="OnUse" target="This" duration="0.3">
            <Sound file="%ModDir:3321850228%/Content/Sounds/cuffrattleloop.ogg" range="400" volume="1" frequencymultiplier="1.5" loop="true" />
          </StatusEffect>
          <!-- Apply random amounts of bluntrauma and bleeding to the hands on each button press -->
          <StatusEffect type="OnUse" target="Character" targetlimbs="LeftHand" disabledeltatime="true">
            <Affliction identifier="blunttrauma" amount="3" probability="0.1" />
            <Affliction identifier="blunttrauma" amount="2" probability="0.15" />
            <Affliction identifier="blunttrauma" amount="1" probability="0.2" />
            <Affliction identifier="bleeding" amount="1" probability="0.1" />
          </StatusEffect>
          <StatusEffect type="OnUse" target="Character" targetlimbs="RightHand" disabledeltatime="true">
            <Affliction identifier="blunttrauma" amount="3" probability="0.1" />
            <Affliction identifier="blunttrauma" amount="2" probability="0.15" />
            <Affliction identifier="blunttrauma" amount="1" probability="0.2" />
            <Affliction identifier="bleeding" amount="1" probability="0.1" />
          </StatusEffect>
          <!-- On button pressed, if the timeframe is at or above 25, remove the handcuffed affliction from the character and play an uncuffing sound -->
          <StatusEffect type="OnUse" target="This,Character" disabledeltatime="true">
            <Conditional timeframe="gte 25" />
            <ReduceAffliction identifier="handcuffed" amount="1000" />
            <Sound file="%ModDir:3321850228%/Content/Sounds/uncuffing1.ogg" volume="2.5" range="350" loop="false" />
          </StatusEffect>
          <!-- On button pressed, if the timeframe is at or above 25, create a stronger invisible explosion to make the character jiggle harder, play a breaking sound, remove the handcuffs and spawn the broken version at their position -->
          <StatusEffect type="OnUse" target="This" disabledeltatime="true" forceplaysounds="true">
            <Conditional timeframe="gte 25" />
            <Sound file="Content/Sounds/Damage/HitMetal1.ogg" volume="1.0" loop="false" range="500" selectionmode="Random" />
            <Sound file="Content/Sounds/Damage/HitMetal2.ogg" volume="1.0" loop="false" range="500" selectionmode="Random" />
            <Sound file="Content/Sounds/Damage/HitMetal3.ogg" volume="1.0" loop="false" range="500" selectionmode="Random" />
            <Sound file="Content/Sounds/Damage/HitMetal4.ogg" volume="1.0" loop="false" range="500" selectionmode="Random" />
            <Sound file="Content/Sounds/Damage/HitMetal5.ogg" volume="1.0" loop="false" range="500" selectionmode="Random" />
            <Sound file="Content/Sounds/Damage/HitMetal6.ogg" volume="1.0" loop="false" range="500" selectionmode="Random" />
            <Explosion range="100" force="1.5" itemdamage="0.0" structuredamage="0.0" ignorecover="true" ballastfloradamage="0.0" camerashake="1" camerashakerange="100" explosiondamage="0" flames="false" smoke="false" shockwave="false" sparks="false" flash="false" underwaterbubble="false" playtinnitus="false" />
            <Remove />
            <SpawnItem identifier="brokenhandcuffs" spawnposition="This" />
          </StatusEffect>
        </Button>
      </CustomInterface>
    </Item>
    <Item name="Broken Handcuffs" identifier="brokenhandcuffs" category="Equipment" maxstacksize="8" cargocontaineridentifier="metalcrate" tags="smallitem" scale="0.5" impactsoundtag="impact_metal_light" requireaimtouse="false" isshootable="false" useinhealthinterface="true" hideconditionbar="true" noninteractable="false">
      <Upgrade gameversion="0.10.0.0" scale="0.5" />
      <PreferredContainer primary="storagecab" secondary="crewcab" />
      <Price />
      <Deconstruct time="5" />
      <Sprite texture="%ModDir:3321850228%/Content/Items/IH-ItemsAtlas.png" sourcerect="117,2,50,16" depth="0.6" origin="0.5,0.5" />
      <InventoryIcon texture="%ModDir:3321850228%/Content/Items/IH-ItemsAtlas.png" sourcerect="56,41,58,34" depth="0.6" origin="0.5,0.5" />
      <Body width="46" height="12" density="30" />
      <Holdable characterusable="false" canBeCombined="false" slots="Any,RightHand+LeftHand" aimable="false" handle1="-7,-3" handle2="7,-3" holdpos="30,-20" holdangle="0" reload="1.0" msg="ItemMsgPickUpSelect" HitOnlyCharacters="true" />
    </Item>
    <Item name="Reinforced Handcuffs" identifier="reinforcedhandcuffsspawned" category="Equipment" maxstacksize="8" cargocontaineridentifier="metalcrate" tags="smallitem" scale="0.5" spritecolor="150,150,150,255" inventoryiconcolor="150,150,150,255" impactsoundtag="impact_metal_light" requireaimtouse="false" isshootable="false" useinhealthinterface="true" hideconditionbar="true" noninteractable="false">
      <PreferredContainer primary="armcab" secondary="secarmcab" />
      <Price baseprice="120" sold="false" canbespecial="false">
        <Price storeidentifier="merchantoutpost" minavailable="1" />
        <Price storeidentifier="merchantcity" multiplier="0.9" minavailable="2" sold="false" />
        <Price storeidentifier="merchantresearch" sold="false" />
        <Price storeidentifier="merchantmilitary" multiplier="0.9" minavailable="3" />
        <Price storeidentifier="merchantmine" sold="false" />
        <Price storeidentifier="merchantarmory" multiplier="0.9" minavailable="3" />
      </Price>
      <Deconstruct time="5" />
      <Fabricate suitablefabricators="fabricator" requiredtime="10">
        <RequiredSkill identifier="weapons" level="40" />
        <RequiredItem identifier="handcuffsspawned" />
        <RequiredItem identifier="titanium" />
      </Fabricate>
      <Sprite texture="%ModDir:3321850228%/Content/Items/IH-ItemsAtlas.png" sourcerect="57,0,52,40" depth="0.6" origin="0.5,0.5" />
      <Body width="48" height="34" density="30" />
      <Holdable characterusable="false" canBeCombined="false" slots="Any,RightHand+LeftHand" aimable="false" handle1="-7,-3" handle2="7,-3" holdpos="30,-20" holdangle="0" reload="1.0" msg="ItemMsgPickUpSelect" HitOnlyCharacters="true">
        <!-- When used via Health Menu on a human without the "handcuffed" affliction, apply an affliction that spawns the equipped version of the handcuffs on the character and apply the "handcuffed" affliction -->
        <StatusEffect type="OnSuccess" target="This,UseTarget" multiplyafflictionsbymaxvitality="true" comparison="And" delay="0.1" stackable="false" disabledeltatime="true">
          <Conditional handcuffed="lte 0" />
          <Conditional handcuffedreinforced="lte 0" />
          <Conditional IsHuman="eq true" />
          <Affliction identifier="stun" amount="0.25" />
          <Affliction identifier="applyreinforcedhandcuffs" amount="1" />
          <Affliction identifier="handcuffedreinforced" amount="100" />
        </StatusEffect>
        <!-- Play a handcuffing sound | Had to be its own effect as the sounds would otherwise refuse to play... -->
        <StatusEffect type="OnUse" target="This">
          <Sound file="%ModDir:3321850228%/Content/Sounds/cuffing1.ogg" volume="2" range="300" loop="false" selectionmode="random" />
          <Sound file="%ModDir:3321850228%/Content/Sounds/cuffing2.ogg" volume="2" range="300" loop="false" selectionmode="random" />
          <Sound file="%ModDir:3321850228%/Content/Sounds/cuffing3.ogg" volume="2" range="300" loop="false" selectionmode="random" />
        </StatusEffect>
        <!-- Remove the item when it was used on a valid target -->
        <StatusEffect type="OnUse" target="This,UseTarget" comparison="And">
          <Conditional handcuffed="lte 0" />
          <Conditional handcuffedreinforced="lte 0" />
          <Conditional IsHuman="eq true" />
          <Remove />
        </StatusEffect>
      </Holdable>
    </Item>
    <Item nameidentifier="reinforcedhandcuffsspawned" descriptionidentifier="reinforcedhandcuffsspawned" identifier="reinforcedhandcuffsequipped" category="Equipment" maxstacksize="1" cargocontaineridentifier="metalcrate" tags="smallitem,handcuffs,handlocker,reinforcedcuffs" scale="0.5" spritecolor="150,150,150,255" inventoryiconcolor="150,150,150,255" impactsoundtag="impact_metal_light" noninteractable="true" hideinmenus="true">
      <Deconstruct time="1" />
      <InventoryIcon texture="%ModDir:3321850228%/Content/Items/IH-ItemsAtlas.png" sourcerect="57,0,52,40" origin="0.5,0.5" />
      <Sprite texture="%ModDir:3321850228%/Content/Items/IH-ItemsAtlas.png" sourcerect="57,0,52,40" depth="0.6" origin="0.5,0.5" />
      <Body width="50" height="34" density="30" />
      <Wearable slots="RightHand" msg="ItemMsgPickUpSelect" autoequipwhenfull="true">
        <sprite texture="%ModDir:3321850228%/Content/Items/IH-ItemsAtlas.png" limb="RightForearm" sourcerect="117,1,25,16" origin="0.53,-1.3" spritecolor="150,150,150,255" depth="0.09" inheritlimbdepth="true" inherittexturescale="true" />
        <sprite texture="%ModDir:3321850228%/Content/Items/IH-ItemsAtlas.png" limb="LeftForearm" sourcerect="142,1,25,16" origin="0.53,-1.3" spritecolor="150,150,150,255" depth="0.09" inheritlimbdepth="true" inherittexturescale="true" />
        <!-- Lock the hands of the character wearing the item | disabled since it's done via "handcuffed" affliction
        <StatusEffect type="OnWearing" target="Character" lockhands="true" setvalue="true" /> -->
        <StatusEffect type="OnWearing" target="Character" statuseffecttags="cuffed" duration="0.1" interval="0.1" />
        <!-- Remove the item, if the character has the temporary tag "unlocked" gained from the "retrievehandcuffs" affliction -->
        <StatusEffect type="OnWearing" target="This" condition="0" setvalue="true">
          <Conditional HasStatusTag="eq unlocked" targetcontainer="true" />
        </StatusEffect>
        <StatusEffect type="OnWearing" target="This" oneshot="true" disabledeltatime="true">
          <Conditional isdead="true" targetcontainer="true" />
          <SpawnItem identifier="handcuffsspawned" spawnposition="SameInventory" spawnifcantbecontained="true" SpawnIfInventoryFull="true" />
          <Remove />
        </StatusEffect>
        <!-- Had to break the item instead of removing directly as the sound would otherwise refuse to play. I really hate this game sometimes... -->
        <StatusEffect type="OnBroken" target="This">
          <Sound file="%ModDir:3321850228%/Content/Sounds/uncuffing1.ogg" volume="2.5" range="350" loop="false" />
          <Remove />
        </StatusEffect>
        <!-- Remove the item if it was somehow spawned into a container other than the character's inventory -->
        <StatusEffect type="OnContained" target="This">
          <Conditional HasTag="eq container" />
          <Remove />
        </StatusEffect>
        <!-- Remove the item if it was somehow spawned outside an inventory -->
        <StatusEffect type="OnNotContained" target="This">
          <Remove />
        </StatusEffect>
      </Wearable>
    </Item>
    <!-- second variant of the item because using slots="RightHand,LeftHand" prevents the texture from working | slots="RightHand" for one and slots="LeftHand" for another item makes them work again... -->
    <Item nameidentifier="reinforcedhandcuffsspawned" descriptionidentifier="reinforcedhandcuffsspawned" identifier="reinforcedhandcuffsequipped2" category="Equipment" maxstacksize="1" cargocontaineridentifier="metalcrate" tags="smallitem,handcuffs,handlocker,reinforcedcuffs" scale="0.5" spritecolor="150,150,150,255" inventoryiconcolor="150,150,150,255" impactsoundtag="impact_metal_light" noninteractable="true" hideinmenus="true">
      <Deconstruct time="1" />
      <InventoryIcon texture="%ModDir:3321850228%/Content/Items/IH-ItemsAtlas.png" sourcerect="57,0,52,40" origin="0.5,0.5" />
      <Sprite texture="%ModDir:3321850228%/Content/Items/IH-ItemsAtlas.png" sourcerect="57,0,52,40" depth="0.6" origin="0.5,0.5" />
      <Body width="50" height="34" density="30" />
      <Wearable slots="LeftHand" msg="ItemMsgPickUpSelect" autoequipwhenfull="true">
        <sprite texture="%ModDir:3321850228%/Content/Items/IH-ItemsAtlas.png" limb="RightForearm" sourcerect="117,1,25,16" origin="0.53,-1.3" spritecolor="150,150,150,255" depth="0.09" inheritlimbdepth="true" inherittexturescale="true" />
        <sprite texture="%ModDir:3321850228%/Content/Items/IH-ItemsAtlas.png" limb="LeftForearm" sourcerect="142,1,25,16" origin="0.53,-1.3" spritecolor="150,150,150,255" depth="0.09" inheritlimbdepth="true" inherittexturescale="true" />
        <!-- Lock the hands of the character wearing the item | disabled since it's done via "handcuffed" affliction
        <StatusEffect type="OnWearing" target="Character" lockhands="true" setvalue="true" /> -->
        <StatusEffect type="OnWearing" target="Character" statuseffecttags="cuffed" duration="0.1" interval="0.1" />
        <!-- Remove the item, if the character has the temporary tag "unlocked" gained from the "retrievehandcuffs" affliction -->
        <StatusEffect type="OnWearing" target="This" condition="0" setvalue="true">
          <Conditional HasStatusTag="eq unlocked" targetcontainer="true" />
        </StatusEffect>
        <StatusEffect type="OnWearing" target="This" oneshot="true" disabledeltatime="true">
          <Conditional isdead="true" targetcontainer="true" />
          <SpawnItem identifier="handcuffsspawned" spawnposition="SameInventory" spawnifcantbecontained="true" SpawnIfInventoryFull="true" />
          <Remove />
        </StatusEffect>
        <!-- Had to break the item instead of removing directly as the sound would otherwise refuse to play. I really hate this game sometimes... -->
        <StatusEffect type="OnBroken" target="This">
          <Sound file="%ModDir:3321850228%/Content/Sounds/uncuffing1.ogg" volume="2.5" range="350" loop="false" />
          <Remove />
        </StatusEffect>
        <!-- Remove the item if it was somehow spawned into a container other than the character's inventory -->
        <StatusEffect type="OnContained" target="This">
          <Conditional HasTag="eq container" />
          <Remove />
        </StatusEffect>
        <!-- Remove the item if it was somehow spawned outside an inventory -->
        <StatusEffect type="OnNotContained" target="This">
          <Remove />
        </StatusEffect>
      </Wearable>
    </Item>
    <Item name="Handcuff Key" identifier="handcuffkey" Category="Equipment" Tags="smallitem,handcuffkey" maxstacksize="8" cargocontaineridentifier="metalcrate" scale="0.4" spritecolor="255,255,255,255" impactsoundtag="impact_metal_light" isshootable="true" requireaimtouse="true" useinhealthinterface="true">
      <PreferredContainer secondary="wreckarmcab,abandonedarmcab,piratearmcab,outpostarmcab" amount="1" spawnprobability="0.02" />
      <PreferredContainer primary="armcab" secondary="secarmcab" />
      <Price baseprice="15" sold="true" canbespecial="false">
        <Price storeidentifier="merchantoutpost" minavailable="1" />
        <Price storeidentifier="merchantcity" multiplier="0.9" minavailable="2" sold="false" />
        <Price storeidentifier="merchantresearch" sold="false" />
        <Price storeidentifier="merchantmilitary" multiplier="0.9" minavailable="3" />
        <Price storeidentifier="merchantmine" sold="false" />
        <Price storeidentifier="merchantarmory" multiplier="0.9" minavailable="3" />
      </Price>
      <Deconstruct time="3" requireddeconstructor="deconstructor" />
      <Fabricate suitablefabricators="fabricator" requiredtime="5" amount="2">
        <RequiredSkill identifier="weapons" level="20" />
        <RequiredItem identifier="steel" />
      </Fabricate>
      <InventoryIcon texture="%ModDir:3321850228%/Content/Items/IH-ItemsAtlas.png" sourcerect="0,22,52,51" origin="0.5,0.5" />
      <Sprite texture="%ModDir:3321850228%/Content/Items/IH-ItemsAtlas.png" depth="0.55" sourcerect="0,0,56,21" origin="0.5,0.5" />
      <Body width="45" radius="5" density="25" />
      <ItemComponent characterusable="false">
        <!-- DOESN'T WORK... ONLY SUCCEEDS ON THE CHARACTER THAT IS HANDCUFFED, NOT ON THE PERSON UNCUFFING THEM | When used in the Health Menu, apply the "retrievehandcuffs" affliction to the characters -->
        <!-- <StatusEffect type="OnSuccess" target="Character,UseTarget" disabledeltatime="true" multiplyafflictionsbymaxvitality="true">
          <Conditional handcuffed="gt 0" />
          <Affliction identifier="retrievehandcuffs" amount="100" />
        </StatusEffect> -->
        <StatusEffect type="OnSuccess" target="This,UseTarget" disabledeltatime="true" multiplyafflictionsbymaxvitality="true" comparison="Or">
          <Conditional handcuffed="gt 0" />
          <Conditional handcuffedreinforced="gt 0" />
          <Affliction identifier="retrievehandcuffs" amount="100" />
        </StatusEffect>
      </ItemComponent>
      <!-- original values for meleeweapon: aimable="true" aimpos="0,-50" aimangle="270" handle1="-10,0" -->
      <Holdable canBeCombined="false" slots="Any,RightHand,LeftHand" aimable="false" holdpos="20,-40" handle1="-30,0" holdangle="10" reload="1.0" msg="ItemMsgPickUpSelect" HitOnlyCharacters="true">
        <!-- DOESN'T WORK... ONLY SUCCEEDS ON THE CHARACTER THAT IS HANDCUFFED, NOT ON THE PERSON UNCUFFING THEM | When used as a melee weapon, apply the "retrievehandcuffs" affliction to both the character that was hit as well as the character that was using the item -->
        <!-- <Attack targetimpulse="2" severlimbsprobability="0.0" itemdamage="0" structuredamage="0" structuresoundtype="StructureSlash">
          
          <StatusEffect type="OnUse" target="Character,UseTarget" disabledeltatime="true" multiplyafflictionsbymaxvitality="true" comparison="And">
            <Conditional handcuffed="gt 0" />
            <Affliction identifier="retrievehandcuffs" amount="100" />
          </StatusEffect>
        </Attack> -->
      </Holdable>
    </Item>
    <Item name="Security Whistle" identifier="securitywhistle" Category="Equipment" Tags="smallitem,securitywhistle" maxstacksize="8" cargocontaineridentifier="metalcrate" scale="0.4" spritecolor="255,255,255,255" impactsoundtag="impact_metal_light" isshootable="true" requireaimtouse="true" useinhealthinterface="true">
      <PreferredContainer secondary="wreckarmcab,abandonedarmcab,piratearmcab,outpostarmcab" amount="1" spawnprobability="0.02" />
      <PreferredContainer primary="armcab" secondary="secarmcab" />
      <Price baseprice="50" sold="true" canbespecial="false">
        <Price storeidentifier="merchantoutpost" minavailable="1" />
        <Price storeidentifier="merchantcity" multiplier="0.9" minavailable="2" sold="false" />
        <Price storeidentifier="merchantresearch" sold="false" />
        <Price storeidentifier="merchantmilitary" multiplier="0.9" minavailable="3" />
        <Price storeidentifier="merchantmine" sold="false" />
        <Price storeidentifier="merchantarmory" multiplier="0.9" minavailable="3" />
      </Price>
      <Deconstruct time="3" requireddeconstructor="deconstructor" />
      <InventoryIcon texture="%ModDir:3321850228%/Content/Items/IH-ItemsAtlas.png" sourcerect="176,24,57,38" origin="0.5,0.5" />
      <Sprite texture="%ModDir:3321850228%/Content/Items/IH-ItemsAtlas.png" depth="0.55" sourcerect="176,0,47,23" origin="0.5,0.5" />
      <Body width="40" radius="5" density="25" />
      <ItemComponent characterusable="false">
        <!-- DOESN'T WORK... ONLY SUCCEEDS ON THE CHARACTER THAT IS HANDCUFFED, NOT ON THE PERSON UNCUFFING THEM | When used in the Health Menu, apply the "retrievehandcuffs" affliction to the characters -->
        <!-- <StatusEffect type="OnSuccess" target="Character,UseTarget" disabledeltatime="true" multiplyafflictionsbymaxvitality="true">
          <Conditional handcuffed="gt 0" />
          <Affliction identifier="retrievehandcuffs" amount="100" />
        </StatusEffect> -->
        <StatusEffect type="OnSuccess" target="This,UseTarget" disabledeltatime="true" multiplyafflictionsbymaxvitality="true" comparison="Or">
          <Conditional handcuffed="gt 0" />
          <Conditional handcuffedreinforced="gt 0" />
          <Sound file="%ModDir:3321850228%/Content/Sounds/whistle1.ogg" volume="1" range="700" loop="false" selectionmode="random" />
          <Affliction identifier="sendtobrig" amount="1" />
          <!--<Affliction identifier="retrievehandcuffs" amount="100" />-->
        </StatusEffect>
      </ItemComponent>
      <!-- original values for meleeweapon: aimable="true" aimpos="0,-50" aimangle="270" handle1="-10,0" -->
      <Holdable canBeCombined="false" slots="Any,RightHand,LeftHand" aimable="false" holdpos="20,20" handle1="10,0" holdangle="-60" aimpos="23,13" aimangle="0" reload="1.0" msg="ItemMsgPickUpSelect" HitOnlyCharacters="true" />
      <RangedWeapon reload="1">
        <StatusEffect type="OnUse" target="This">
          <Sound file="%ModDir:3321850228%/Content/Sounds/whistle1.ogg" volume="1" range="700" loop="false" selectionmode="random" />
        </StatusEffect>
        <StatusEffect type="OnUse" target="NearbyCharacters" range="100" disabledeltatime="true" multiplyafflictionsbymaxvitality="true" comparison="Or">
          <Conditional handcuffed="gt 0" />
          <Conditional handcuffedreinforced="gt 0" />
          <Affliction identifier="sendtobrig" amount="1" />
          <!--<Affliction identifier="retrievehandcuffs" amount="100" />-->
        </StatusEffect>
      </RangedWeapon>
    </Item>
  </Override>
</Items>