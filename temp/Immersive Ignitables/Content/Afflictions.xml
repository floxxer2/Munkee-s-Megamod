<?xml version="1.0" encoding="utf-8"?>
<Override>
  <Afflictions>
    <!-- Tobacco Addiction Add-On compatibility | Invisible affliction that  does nothing and only exists to have an affliction of type "tobaccocraving" exist when playing without the Tobacco Addiction Add-On to prevent errors -->
    <Affliction name="Craving a Smoke" identifier="he-tobaccowithdrawal" description="Your body is craving for another smoke." type="tobaccocraving" limbspecific="false" indicatorlimb="Head" maxstrength="100" affectmachines="true" showiconthreshold="1000" showicontoothersthreshold="1000" showinhealthscannerthreshold="1000" healableinmedicalclinic="false" iconcolors="0,100,0,255;100,0,0,255">
      <Effect minstrength="0" maxstrength="100" strengthchange="-100" />
      <icon texture="Content/UI/MainIconsAtlas.png" sourcerect="256,640,128,128" color="150,26,26,255" origin="0,0" />
    </Affliction>
    <!-- Tobacco Addiction Add-On compatibility | Invisible affliction that does nothing other than sit on the character after smoking tobacco to prevent gaining tobacco withdrawal symptoms for some time when playing with the Tobacco Addiction Add-On -->
    <!-- needs to be defined within the smokable item inside a StatusEffect that's applying the defined values per second with <Affliction identifier="ii_recenttobaccointake" amount="X" /> -->
    <!-- When applying values per second with default item health and condition drain: 50 = ~30min, 75 = ~45min, 100 = ~60min -->
    <Affliction name="" identifier="ii_recenttobaccointake" description="" type="recenttobaccointake" limbspecific="false" indicatorlimb="Head" maxstrength="3600" affectmachines="true" showiconthreshold="10000" showicontoothersthreshold="10000" showinhealthscannerthreshold="10000" healableinmedicalclinic="false" iconcolors="0,100,0,255;100,0,0,255">
      <!-- maximum amount of time to prevent tobacco withdrawal from increasing is 3600 seconds (60 minutes) | so player has to smoke a cigarette roughly every ~30 minutes, a cigar every ~60 minutes or a pipe every ~45 minutes to not suffer withdrawal -->
      <Effect minstrength="0" maxstrength="3600" strengthchange="-1" resistancefor="he-tobaccowithdrawal" minresistance="1" maxresistance="1">
        <!-- apply 0.006 tobacco addiction per second to the character if their tobacco addiction is at or below a value of 20 to prevent recovering from the addiction for the remaining duration of recent tobacco intake -->
        <StatusEffect type="OnActive" target="Character" comparison="And" interval="1" disabledeltatime="true" multiplyafflictionsbymaxvitality="true">
          <Conditional he-tobaccoaddiction="gt 0" />
          <Conditional he-tobaccoaddiction="lte 20" />
          <GiveAffliction identifier="he-tobaccoaddiction" amount="0.006" />
        </StatusEffect>
      </Effect>
      <icon texture="Content/UI/MainIconsAtlas.png" sourcerect="256,640,128,128" color="150,26,26,255" origin="0,0" />
    </Affliction>
    <!-- Hungry Europans compatibility | Invisible affliction that does nothing and only exists to have an affliction of type "mood" exist when playing without Hungry Europans to prevent errors -->
    <Affliction name="" identifier="ii_moodtype" description="" type="mood" limbspecific="false" indicatorlimb="Head" maxstrength="100" affectmachines="true" showiconthreshold="1000" showicontoothersthreshold="1000" showinhealthscannerthreshold="1000" healableinmedicalclinic="false" iconcolors="0,100,0,255;100,0,0,255">
      <Effect minstrength="0" maxstrength="100" strengthchange="-100" />
      <icon texture="Content/UI/MainIconsAtlas.png" sourcerect="256,640,128,128" color="150,26,26,255" origin="0,0" />
    </Affliction>
    <!-- Hungry Europans compatibility | Invisible affliction that does nothing and only exists to apply values of smoking addiction if the Tobacco Addiction Add-On is also installed -->
    <Affliction name="" identifier="he-tobaccoaddiction" description="" type="debuff" isbuff="false" limbspecific="false" maxstrength="100" indicatorlimb="Head" showiconthreshold="1000" showicontoothersthreshold="1000" showinhealthscannerthreshold="1000" iconcolors="100,120,100,255;90,130,90,255;80,140,80,255">
      <Effect minstrength="0" maxstrength="100" strengthchange="-100"></Effect>
      <icon texture="Content/UI/MainIconsAtlas.png" sourcerect="256,640,128,128" color="150,26,26,255" origin="0,0" />
    </Affliction>
    <!-- Lung Damage affliction for Neurotrauma compatibility -->
    <Affliction name="" identifier="lungdamage" description="" healableinmedicalclinic="false" type="gaze" isbuff="false" targets="human" causeofdeathdescription="" selfcauseofdeathdescription="" limbspecific="false" indicatorlimb="Torso" maxstrength="100" showiconthreshold="500" showinhealthscannerthreshold="20" damageoverlayalpha="0">
      <icon texture="Content/UI/MainIconsAtlas.png" sourcerect="128,384,128,128" color="195,136,60,255" origin="0,0" />
    </Affliction>
    <Affliction name="Smoking" identifier="smoking" description="Currently inhaling smoke." limbspecific="false" indicatorlimb="Head" activationthreshold="0" showiconthreshold="1000" showicontoothersthreshold="1000" showinhealthscannerthreshold="1000" karmachangeonapplied="0" maxstrength="5" affectmachines="false" healableinmedicalclinic="false">
      <Effect minstrength="0" maxstrength="5" strengthchange="0">
        <StatusEffect target="Character" targetlimb="Head">
          <Conditional HasStatusTag="neq inhaling" />
          <ReduceAffliction identifier="smoking" amount="3" />
          <ReduceAffliction type="mood" amount="3" />
          <Affliction identifier="he-tobaccoaddiction" amount="0.1" />
          <ParticleEmitter particle="ExhaleSmoke" colormultiplier="255,255,255,225" particlespersecond="5" anglemin="344" anglemax="344" distancemin="9" distancemax="10" velocitymin="30" velocitymax="50" scalemin="0.1" scalemax="0.1" copyentityangle="true" />
        </StatusEffect>
        <!-- NT compatibility | only applies lung damage if your character has one of the blood type afflictions from NT -->
        <StatusEffect target="Character" comparison="Or">
          <Conditional ominus="gt 0" />
          <Conditional aminus="gt 0" />
          <Conditional bminus="gt 0" />
          <Conditional abminus="gt 0" />
          <Conditional abplus="gt 0" />
          <Conditional aplus="gt 0" />
          <Conditional oplus="gt 0" />
          <Conditional bplus="gt 0" />
          <Affliction identifier="lungdamage" amount="0.1" />
        </StatusEffect>
        <StatusEffect target="Character" targetlimb="Head" availableoxygen="0" setvalue="true" duration="1.5" stackable="false" checkconditionalalways="true" comparison="And">
          <Conditional HasStatusTag="neq inhaling" />
          <Conditional smoking="gt 0" />
          <Sound file="%ModDir%/Content/Items/Misc/ExhaleSmoke.ogg" range="200" volume="1.0" loop="true" />
        </StatusEffect>
      </Effect>
      <icon texture="Content/UI/MainIconsAtlas.png" sourcerect="256,640,128,128" color="150,26,26,255" origin="0,0" />
    </Affliction>
  </Afflictions>
</Override>