<?xml version="1.0" encoding="utf-8"?>
<Override>
  <Items>
    <Item name="Crate Floater" identifier="cratefloater" tags="mediumitem,cargoscooter" description="Prevents the contained crate from sinking." scale="0.5" pickdistance="150" showcontentsintooltip="true" impactsoundtag="impact_crate" hideconditionbar="true">
      <Deconstruct time="3" requireddeconstructor="deconstructor">
        <Item identifier="steel" amount="1" />
      </Deconstruct>
      <Fabricate time="20" suitablefabricators="fabricator">
        <RequiredItem identifier="steel" amount="1" />
        <RequiredItem identifier="oxygentank" amount="3" />
      </Fabricate>
      <InventoryIcon texture="%ModDir:3239164008%/Content/Items/IC-ItemsAtlas.png" sourcerect="869,0,155,88" origin="0.5,0.5" />
      <Sprite texture="%ModDir:3239164008%/Content/Items/IC-ItemsAtlas.png" depth="0.54" sourcerect="869,0,155,88" origin="0.5,0.5" />
      <BrokenSprite texture="%ModDir:3239164008%/Content/Items/IC-ItemsAtlas.png" sourcerect="907,89,117,90" origin="0.5,0.5" depth="0.54" maxcondition="99" fadein="false" />
      <Body width="144" height="80" density="10" />
      <Holdable slots="RightHand+LeftHand" holdangle="5" holdpos="90,-110" handle1="-5,0" handle2="-5,10" aimable="false" msg="ItemMsgPickUpSelect">
        <!-- damage the floater to display the broken sprite and turn the ItemComponent on when it is being held -->
        <StatusEffect type="OnActive" target="This" targetitemcomponent="ItemComponent" IsActive="true" condition="99" setvalue="true" />
        <!-- damage the contained crate so that its broken sprite is displayed -->
        <StatusEffect type="OnActive" target="Contained" condition="99" setvalue="true" />
      </Holdable>
      <!-- ItemComponent used to not have to resort to constantly running "Always" StatusEffects when no one is interacting with the crate -->
      <ItemComponent IsActive="false" canbeselected="false" canbepicked="false" allowingameediting="false">
        <!-- repair the floater to display the original sprite again and turn the ItemComponent off if it is either not contained or it is stored in another item with the tag "container" like the crate shelfs -->
        <StatusEffect type="OnActive" target="This" targetitemcomponent="ItemComponent" condition="100" IsActive="false" setvalue="true">
          <Conditional IsContained="false" />
          <Conditional HasTag="container" targetcontainer="true" />
          <Conditional HasTag="cargocontainer" targetcontainer="true" />
        </StatusEffect>
      </ItemComponent>
      <ItemContainer capacity="1" slotsperrow="1" maxstacksize="1" canbeselected="true" selectkey="Action" hideitems="false" keepopenwhenequipped="true" movableframe="false" itempos="0,18" containedspritedepths="0.55" msg="itemmsginteractuse">
        <GuiFrame relativesize="0.15,0.3" anchor="Center" style="ItemUI" />
        <Containable items="crate">
          <!-- repair the contained crate so that its original sprite is displayed -->
          <StatusEffect type="OnContaining" target="Contained" condition="100" setvalue="true">
            <Conditional IsContained="false" targetcontainer="true" />
          </StatusEffect>
        </Containable>
        <!-- drop the contained crates if the item was put into a cabinet -->
        <StatusEffect type="OnContained" target="This">
          <Conditional HasTag="container" targetcontainer="true" />
          <DropContainedItems />
        </StatusEffect>
      </ItemContainer>
    </Item>
  </Items>
</Override>