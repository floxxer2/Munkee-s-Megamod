<?xml version="1.0" encoding="utf-8"?>
<Items>
  <Item name="" identifier="anechoicsuit" category="Diving,Equipment" tags="diving,deepdiving,human" scale="0.5" fireproof="true" description="" allowdroppingonswapwith="diving" impactsoundtag="impact_metal_heavy" botpriority="1" hideinmenus="true">
    <InventoryIcon texture="%ModDir%/Workshop/Real Sonar/Icons/anechoic_diving_suit_icon.png" sourcerect="0,0,128,128" origin="0.5,0.5" />
    <Sprite name="Diving Suit Item" texture="%ModDir%/Workshop/Real Sonar/Icons/Anechoic_DivingSuit_Items.png" sourcerect="0,0,152,122" depth="0.55" origin="0.5,0.5" />
    <Body radius="45" width="34" density="15" />
    <GreaterComponent canbeselected="false" canbepicked="false" allowingameediting="false" timeframe="0">
      <!-- SUIT SPECIFIC EFFECTS | Copy these into your suit item and adjust the values of condition draining, low pass multipliers, speed multipliers, oxygen refilling and damage modifiers to your liking or remove/add some -->
      <!-- block hull oxygen usage -->
      <StatusEffect type="OnWearing" target="This,Character" interval="0.2" duration="0.2" OxygenAvailable="-100.0" UseHullOxygen="false" comparison="And">
        <Conditional HasStatusTag="eq sealed" />
      </StatusEffect>
      <!-- reduce walking speed -->
      <StatusEffect type="OnWearing" target="Character" SpeedMultiplier="0.6" setvalue="true" interval="0.2" duration="0.2" disabledeltatime="true" />
      <!-- make the character stumble randomly every 2.1s when running with the diving suit 
          <StatusEffect type="OnWearing" target="This,Character" interval="2.1" comparison="And" disabledeltatime="true">
            <Conditional speed="gt 2.8" />
            <Conditional InWater="false" />
            <Affliction identifier="stun" amount="1.5" probability="0.35" />
          </StatusEffect>-->
      <!-- Refill oxygen when the suit is contained. -->
      <StatusEffect type="OnContained" target="Contained" targetslot="0" Condition="1.0" interval="1" disabledeltatime="true">
        <Conditional Voltage="gt 0.01" targetcontainer="true" targetgrandparent="true" targetitemcomponent="Powered" />
        <RequiredItem items="refillableoxygensource" type="Contained" excludebroken="false" excludefullcondition="true" />
      </StatusEffect>
      <!-- supply oxygen to the character and drain the oxygen tank if the valve is closed | also works for oxygenite tanks -->
      <StatusEffect type="OnWearing" target="Contained,Character" targetslot="0" OxygenAvailable="1000.0" Condition="-0.3" comparison="And">
        <Conditional IsDead="false" />
        <Conditional HasStatusTag="eq sealed" />
        <RequiredItem items="oxygensource" type="Contained" />
      </StatusEffect>
      <!-- supply welding fuel to the character and drain the welding fuel tank if the valve is closed -->
      <StatusEffect type="OnWearing" target="Contained,Character" targetslot="0" Oxygen="-10.0" Condition="-0.5" interval="1" disabledeltatime="true" comparison="And">
        <Conditional IsDead="false" />
        <Conditional HasStatusTag="eq sealed" />
        <RequiredItem items="weldingfueltank" type="Contained" />
      </StatusEffect>
      <!-- supply incendium fuel to the character and drain the incendium fuel tank if the valve is closed -->
      <StatusEffect type="OnWearing" target="Contained,Character" targetlimbs="Torso" targetslot="0" Oxygen="-10.0" Condition="-0.5" interval="1" disabledeltatime="true" comparison="And">
        <Conditional IsDead="false" />
        <Conditional HasStatusTag="eq sealed" />
        <RequiredItem items="incendiumfueltank" type="Contained" />
        <Affliction identifier="burn" amount="3.0" />
      </StatusEffect>
    </GreaterComponent>
    <Wearable slots="InnerClothes" msg="ItemMsgEquipSelect" displaycontainedstatus="true" canbeselected="false" canbepicked="true" pickkey="Select">
      <!-- TAGS -->
      <!-- tag the character with "hassuit" if it's a player and wearing a diving suit + diving helmet and apply the corresponding pressure protection affliction -->
      <StatusEffect type="OnWearing" target="Character" tags="hassuit" interval="0.1" duration="0.2">
        <Conditional HasStatusTag="eq hashelmet" />
        <Affliction identifier="pressure5750" amount="1" />
      </StatusEffect>
      <!-- EFFECTS FOR ALL SUITS USING THIS PRESET -->
      <!-- play a water ambient sound when moving in water -->
      <StatusEffect type="OnWearing" target="Character" comparison="And">
        <Conditional IsLocalPlayer="true" />
        <Conditional InWater="true" />
        <Sound file="%ModDir%/Workshop/Immersive Diving Gear/Content/Items/Diving/SuitWaterAmbience.ogg" type="OnWearing" range="250" loop="true" volumeproperty="Speed" volume="0.8" frequencymultiplier="0.5" />
      </StatusEffect>
      <!-- BOT COMPATIBILITY -->
      <!-- spawn helmet and close valve -->
      <StatusEffect type="OnWearing" target="This" setvalue="true" interval="0.9" comparison="And">
        <Conditional IsBot="true" targetcontainer="true" />
        <Conditional HasStatusTag="neq hashelmet" targetcontainer="true" />
        <SpawnItem identifier="botdivingsuithelmet" spawnposition="SameInventory" spawnifinventoryfull="false" spawnifcantbecontained="false" />
      </StatusEffect>
      <!-- give pressure protection -->
      <StatusEffect type="OnWearing" target="Character" ObstructVision="true" tags="botsuit,sealed,hassuit" PressureProtection="5750.0" interval="0.1" duration="0.2" setvalue="true" disabledeltatime="true">
        <Conditional HasTag="bothelmet" targetcontaineditem="true" />
      </StatusEffect>
      <StatusEffect type="OnWearing" target="Character" setvalue="true">
        <TriggerAnimation Type="Walk" FileName="HumanWalkDivingSuit" priority="1" ExpectedSpecies="Human" />
        <TriggerAnimation Type="Run" FileName="HumanRunDivingSuit" priority="1" ExpectedSpecies="Human" />
      </StatusEffect>
      <StatusEffect type="OnWearing" target="Character" tags="sonarprotection" duration="0.1" />
      <sprite name="Anechoic Diving Suit Torso" texture="%ModDir%/Workshop/Real Sonar/Icons/anechoic_DivingSuit.png" limb="Torso" hidelimb="true" inherittexturescale="true" hideotherwearables="true" inheritorigin="true" inheritsourcerect="true" />
      <sprite name="Anechoic Diving Suit Right Hand" texture="%ModDir%/Workshop/Real Sonar/Icons/anechoic_DivingSuit.png" limb="RightHand" hidelimb="true" inherittexturescale="true" hideotherwearables="true" inheritorigin="true" inheritsourcerect="true" />
      <sprite name="Anechoic Diving Suit Left Hand" texture="%ModDir%/Workshop/Real Sonar/Icons/anechoic_DivingSuit.png" limb="LeftHand" hidelimb="true" inherittexturescale="true" hideotherwearables="true" inheritorigin="true" inheritsourcerect="true" />
      <sprite name="Anechoic Diving Suit Right Lower Arm" texture="%ModDir%/Workshop/Real Sonar/Icons/anechoic_DivingSuit.png" limb="RightArm" hidelimb="true" inherittexturescale="true" hideotherwearables="true" inheritorigin="true" inheritsourcerect="true" />
      <sprite name="Anechoic Diving Suit Left Lower Arm" texture="%ModDir%/Workshop/Real Sonar/Icons/anechoic_DivingSuit.png" limb="LeftArm" hidelimb="true" inherittexturescale="true" hideotherwearables="true" inheritorigin="true" inheritsourcerect="true" />
      <sprite name="Anechoic Diving Suit Right Upper Arm" texture="%ModDir%/Workshop/Real Sonar/Icons/anechoic_DivingSuit.png" limb="RightForearm" hidelimb="true" inherittexturescale="true" hideotherwearables="true" inheritorigin="true" inheritsourcerect="true" />
      <sprite name="Anechoic Diving Suit Left Upper Arm" texture="%ModDir%/Workshop/Real Sonar/Icons/anechoic_DivingSuit.png" limb="LeftForearm" hidelimb="true" inherittexturescale="true" hideotherwearables="true" inheritorigin="true" inheritsourcerect="true" />
      <sprite name="Anechoic Diving Suit Waist" texture="%ModDir%/Workshop/Real Sonar/Icons/anechoic_DivingSuit.png" limb="Waist" hidelimb="true" inherittexturescale="true" hideotherwearables="true" inheritorigin="true" inheritsourcerect="true" />
      <sprite name="Anechoic Diving Suit Right Thigh" texture="%ModDir%/Workshop/Real Sonar/Icons/anechoic_DivingSuit.png" limb="RightThigh" hidelimb="true" inherittexturescale="true" hideotherwearables="true" inheritorigin="true" inheritsourcerect="true" />
      <sprite name="Anechoic Diving Suit Left Thigh" texture="%ModDir%/Workshop/Real Sonar/Icons/anechoic_DivingSuit.png" limb="LeftThigh" hidelimb="true" inherittexturescale="true" hideotherwearables="true" inheritorigin="true" inheritsourcerect="true" />
      <sprite name="Anechoic Diving Suit Right Leg" texture="%ModDir%/Workshop/Real Sonar/Icons/anechoic_DivingSuit.png" limb="RightLeg" hidelimb="true" inherittexturescale="true" hideotherwearables="true" inheritorigin="true" inheritsourcerect="true" />
      <sprite name="Anechoic Diving Suit Left Leg" texture="%ModDir%/Workshop/Real Sonar/Icons/anechoic_DivingSuit.png" limb="LeftLeg" hidelimb="true" inherittexturescale="true" hideotherwearables="true" inheritorigin="true" inheritsourcerect="true" />
      <sprite name="Anechoic Diving Suit Left Shoe" texture="%ModDir%/Workshop/Real Sonar/Icons/anechoic_DivingSuit.png" limb="LeftFoot" sound="footstep_armor_heavy" hidelimb="true" inherittexturescale="true" hideotherwearables="true" inheritorigin="true" inheritsourcerect="true" />
      <sprite name="Anechoic Diving Suit Right Shoe" texture="%ModDir%/Workshop/Real Sonar/Icons/anechoic_DivingSuit.png" limb="RightFoot" sound="footstep_armor_heavy" hidelimb="true" inherittexturescale="true" hideotherwearables="true" inheritorigin="true" inheritsourcerect="true" />
      <damagemodifier armorsector="0.0,360.0" afflictiontypes="activesonar" damagemultiplier="0.6" damagesound="LimbArmor" />
      <damagemodifier armorsector="0.0,360.0" afflictionidentifiers="acoustictrauma" damagemultiplier="0.15" damagesound="LimbArmor" />
      <damagemodifier armorsector="0.0,360.0" afflictionidentifiers="vibrationdamage" damagemultiplier="0.5" damagesound="LimbArmor" />
      <damagemodifier armorsector="0.0,360.0" afflictionidentifiers="blunttrauma,lacerations,bleeding" damagemultiplier="0.75" damagesound="LimbArmor" deflectprojectiles="true" />
      <damagemodifier armorsector="0.0,360.0" afflictionidentifiers="gunshotwound,bitewounds" damagemultiplier="0.90" damagesound="LimbArmor" deflectprojectiles="true" />
      <damagemodifier armorsector="0.0,360.0" afflictiontypes="burn" damagemultiplier="0.90" damagesound="" deflectprojectiles="true" />
      <damagemodifier armorsector="0.0,360.0" afflictionidentifiers="radiationsickness" damagemultiplier="0.75" damagesound="LimbArmor" />
      <damagemodifier armorsector="0.0,360.0" afflictionidentifiers="huskinfection" damagemultiplier="0.5" probabilitymultiplier="0.5" damagesound="LimbArmor" />
    </Wearable>
    <Holdable slots="RightHand,LeftHand" controlpose="true" holdpos="0,-40" handle1="-10,-20" handle2="10,-20" holdangle="0" msg="ItemMsgPickUpUse" canbeselected="false" canbepicked="true" pickkey="Use">
      <Upgrade gameversion="0.1401.0.0" msg="ItemMsgPickUpUse" />
    </Holdable>
    <ItemContainer capacity="1" maxstacksize="1" hideitems="true" containedstateindicatorstyle="tank" containedstateindicatorslot="0">
      <SlotIcon slotindex="0" texture="Content/UI/StatusMonitorUI.png" sourcerect="64,448,64,64" origin="0.5,0.5" />
      <Containable items="weldingtoolfuel" excludeditems="oxygenitetank" />
      <Containable items="oxygensource" excludeditems="oxygenitetank">
        <StatusEffect type="OnWearing" target="Contained">
          <RequiredItem items="oxygensource" type="Contained" />
          <Conditional condition="lt 5.0" />
          <Sound file="Content/Items/WarningBeepSlow.ogg" range="250" loop="true" />
        </StatusEffect>
      </Containable>
      <Containable items="oxygenitetank">
        <StatusEffect type="OnWearing" target="This,Character" SpeedMultiplier="1.3" setvalue="true" targetslot="0" comparison="And">
          <Conditional IsDead="false" />
          <Conditional HasStatusTag="eq sealed" />
        </StatusEffect>
      </Containable>
      <StatusEffect type="OnWearing" target="Contained" playsoundonrequireditemfailure="true">
        <RequiredItem items="oxygensource,weldingtoolfuel" type="Contained" matchonempty="true" />
        <Conditional condition="lte 0.0" />
        <Sound file="Content/Items/WarningBeep.ogg" range="250" loop="true" />
      </StatusEffect>
    </ItemContainer>
    <aitarget maxsightrange="1500" />
  </Item>
</Items>