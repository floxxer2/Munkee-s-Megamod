<?xml version="1.0" encoding="utf-8"?>
<Items>
  <Item name="Pack of Coalition Menthols" identifier="packofmentholcigarettes" category="Equipment" health="100" maxstacksize="1" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="1" Tags="smallitem,cigbox" description="9/10 doctors recommend smoking nine packs of these a day! Proudly sponsored by Coalition Command! Holds up to 20 cigarettes. A small label on it reads ''Now with extra large filters.''" cargocontaineridentifier="metalcrate" scale="0.36" impactsoundtag="impact_soft" canflipx="false">
    <PreferredContainer primary="wreckcrewcab,abandonedcrewcab,outpostcrewcab,beaconengcab" amount="1" spawnprobability="0.05" />
    <PreferredContainer primary="wreckstoragecab,abandonedstoragecab" amount="1" spawnprobability="0.02" />
    <PreferredContainer primary="crewcab" spawnprobability="0.05" notcampaign="true" />
    <Price baseprice="50" displaynonempty="true">
      <Price storeidentifier="merchantoutpost" />
      <Price storeidentifier="merchantcity" />
      <Price storeidentifier="merchantresearch" multiplier="1.25" />
      <Price storeidentifier="merchantmilitary" multiplier="1.25" minavailable="2" />
      <Price storeidentifier="merchantmine" multiplier="0.9" minavailable="4" />
      <Price storeidentifier="merchantengineering" multiplier="0.9" />
    </Price>
    <Deconstruct time="7" />
    <Fabricate suitablefabricators="vendingmachine" requiredtime="1" requiredmoney="75" fabricationlimitmin="1" fabricationlimitmax="6" />
    <InventoryIcon texture="Menthols.png" sourcerect="110,0,38,52" origin="0.5,0.5" />
    <Sprite texture="Menthols.png" sourcerect="110,0,38,52" depth="0.55" origin="0.5,0.5" />
    <Body width="34" height="48" density="10.7" />
    <Holdable canbecombined="true" slots="Any,LeftHand" handle1="0,-10" handle2="0,-10" holdangle="0" holdpos="36,-20" msg="ItemMsgPickUpSelect">
      <!-- damage the item when it is in a real fire and add the temporary tag "onfire" -->
      <StatusEffect type="OnFire" target="This" Condition="-5.0" tags="onfire" duration="1" stackable="false" />
      <!-- remove the item when it breaks -->
      <StatusEffect type="OnBroken" target="This">
        <Remove />
      </StatusEffect>
    </Holdable>
    <!-- GreaterComponent timeframe used to track if the item is freshly spawned or old so it doesn't spawn more cigarettes -->
    <GreaterComponent canbeselected="false" canbepicked="false" allowingameediting="false" timeframe="0" />
    <!-- ItemContainer for the cigarettes. Can't make use of spawnwithid="cigarette,cigarette,..." because it would respawn them after every single loading screen if the inventory is empty -->
    <ItemContainer capacity="20" maxstacksize="1" slotsperrow="5" allowaccess="true" drawinventory="true" removecontaineditemsondeconstruct="false">
      <Containable items="cigarette,lighter,idcard" />
      <!-- check once per round (oneshot) if the item spawned cigarettes in its inventory already (timeframe="1") or if it did not spawn them yet (timeframe="0") | if timeframe is below 1, spawn 20 cigarettes in this inventory -->
      <StatusEffect type="Always" target="This" timeframe="1" setvalue="true" disabledeltatime="true" oneshot="true">
        <Conditional timeframe="lt 1" />
        <SpawnItem identifier="mentholcigarette" spawnposition="ThisInventory" spawnifinventoryfull="false" count="20" />
      </StatusEffect>
    </ItemContainer>
  </Item>
  <Item name="Menthol Cigarette" identifier="mentholcigarette" category="Equipment" maxstacksize="20" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="20" Tags="smallitem,cigarette" description="A submariner's life is mentally taxing, but a good cigarette can help you soothe your nerves a bit. Slowly heals damage while smoking." cargocontaineridentifier="metalcrate" scale="0.2" isshootable="true" RequireAimToUse="true" impactsoundtag="impact_soft">
    <PreferredContainer primary="crewcab" />
    <Deconstruct time="1" />
    <InventoryIcon texture="Menthols.png" sourcerect="149,0,64,63" origin="0.5,0.5" />
    <!-- intact cigarette sprite at full condition -->
    <Sprite texture="Menthols.png" sourcerect="0,53,80,10" depth="0.55" />
    <!-- BrokenSprite to change the sprite at different condition stages to simulate the cigarette burning down and getting shorter -->
    <BrokenSprite texture="Menthols.png" sourcerect="0,63,80,10" depth="0.55" maxcondition="99.9" fadein="false" />
    <BrokenSprite texture="Menthols.png" sourcerect="0,73,80,10" depth="0.55" maxcondition="80" fadein="false" />
    <BrokenSprite texture="Menthols.png" sourcerect="0,83,80,10" depth="0.55" maxcondition="70" fadein="false" />
    <BrokenSprite texture="Menthols.png" sourcerect="0,93,80,10" depth="0.55" maxcondition="60" fadein="false" />
    <BrokenSprite texture="Menthols.png" sourcerect="0,103,80,10" depth="0.55" maxcondition="50" fadein="false" />
    <BrokenSprite texture="Menthols.png" sourcerect="0,113,80,10" depth="0.55" maxcondition="40" fadein="false" />
    <BrokenSprite texture="Menthols.png" sourcerect="0,123,80,10" depth="0.55" maxcondition="30" fadein="false" />
    <BrokenSprite texture="Menthols.png" sourcerect="0,133,80,10" depth="0.55" maxcondition="20" fadein="false" />
    <BrokenSprite texture="Menthols.png" sourcerect="0,143,80,10" depth="0.55" maxcondition="10" fadein="false" />
    <Body width="78" height="6" density="9.7" />
    <!-- LightComponent that doesn't produce light and only turns on if the item has the tag "lit" while not being in water -->
    <LightComponent range="0" lightcolor="0,0,0,0" castshadows="false" powerconsumption="0" allowingameediting="false" comparison="And">
      <ActiveConditional HasTag="lit" />
      <ActiveConditional InWater="false" />
      <!-- extinguish the item by turning off the LightComponent and adding the tag "unlit" to override the "lit" tag, if the item was put back into the pocket or cabinet, unless it is a trash can -->
      <StatusEffect type="OnActive" target="This" IsOn="false" tags="unlit" setvalue="true" comparison="And">
        <Conditional PhysicsBodyActive="eq false" />
        <Conditional HasTag="neq outposttrashcan" targetcontainer="true" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is above 50 and procude smoke particles while not inhaling (using) -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="gt 50" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="7" distancemax="7" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is between 30 and 50 and procude smoke particles while not inhaling (using) with adjusted particle position to match the different sprite length -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="lte 50" />
        <Conditional condition="gt 30" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="5" distancemax="5" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is between 0 and 30 and procude smoke particles while not inhaling (using) with adjusted particle position to match the different sprite length -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="lte 30" />
        <Conditional condition="gt 0" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="3" distancemax="3" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
    </LightComponent>
    <Holdable canbepicked="true" canBeCombined="false" removeOnCombined="false" slots="Any,RightHand" handle1="-25,-30" aimpos="22,13" holdangle="0" holdpos="30,-5" aimangle="-5" aimable="false" swingwhenaiming="false" swingamount="6,3" swingspeed="0.2" msg="ItemMsgPickUpSelect">
      <!-- add the tag "ignitable" when the item is being held while it is not yet lit so it can be lit up by a lighter -->
      <StatusEffect type="OnSecondaryUse" target="This" tags="ignitable" targetitemcomponent="LightComponent" setvalue="true" comparison="And" delay="1" checkconditionalalways="true">
        <Conditional HasTag="neq ignitable" />
        <Conditional HasTag="neq lit" />
        <Conditional IsOn="false" />
      </StatusEffect>
      <!-- add the temporary "wet" tag and spawn water drop particles for 10 seconds after the item entered water to block reigniting it again for that duration -->
      <StatusEffect type="InWater" target="This" tags="wet" setvalue="true" duration="10" stackable="false" />
      <!-- add the tag "lit" and change the hand position if the item was in real fire -->
      <StatusEffect type="OnFire" target="This" tags="lit" handle1="0,-35" setvalue="true" interval="1" disabledeltatime="true" />
      <!-- constantly reduce the condition of the item while it is in a real fire -->
      <StatusEffect type="OnFire" target="This" Condition="-10.0" interval="1" disabledeltatime="true" />
      <!-- reduce the condition of the cigarette and prevent it from producing smoke (the StatusEffects in LightComponent) when actively smoking it (using) while it is on (tag "lit") by adding the temporary tag "inhaling" -->
      <StatusEffect type="OnUse" target="This,Character" tags="lit,inhaling" condition="-1" interval="0.1" duration="0.2">
        <Conditional HasTag="lit" />
      </StatusEffect>
      <!-- remove the ability to breath oxygen, apply the custom "smokingcigarette" affliction and play a sizzling sound while inhaling the smoke (using the item while it has the tag "lit") -->
      <StatusEffect type="OnUse" target="This,Character" availableoxygen="0" setvalue="true" interval="0.1" duration="0.2" multiplyafflictionsbymaxvitality="true">
        <Conditional HasTag="lit" />
        <Affliction identifier="smoking" amount="0.01" />
        <!-- affliction tracks time spent inhaling and creates different amount of smoke with exhaling sound depending on the duration you were inhaling (using the item while it has the tag "lit") -->
        <Affliction identifier="oxygenlow" amount="0.15" />
        <Sound file="%ModDir%/Workshop/Immersive Ignitables Expansion Pack/SmokingCigaretteLoop.ogg" range="200" volume="1.0" loop="true" />
      </StatusEffect>
      <!-- apply and reduce various afflictions when smoking (using the item while it has the tag "lit") | separate effect to allow better control over the applied amounts (configured value per second) -->
      <StatusEffect type="OnUse" target="This,Character" multiplyafflictionsbymaxvitality="true">
        <Conditional HasTag="lit" />
        <Affliction identifier="psychosisresistance" amount="4" />
        <Affliction identifier="he-tobaccoaddiction" amount="0.3" />
        <Affliction identifier="ii_recenttobaccointake" amount="75" />
        <ReduceAffliction type="tobaccocraving" amount="3.0" />
        <ReduceAffliction type="damage" amount="1" />
        <ReduceAffliction identifier="psychosis" amount="1.2" />
        <ReduceAffliction identifier="hallucinating" amount="2" />
        <ReduceAffliction identifier="watchersgaze" amount="1" />
      </StatusEffect>
      <!-- change hand position when holding the item while not using it (no temporary "inhaling" tag) -->
      <StatusEffect type="OnActive" target="This" handle1="-30,-35" setvalue="true">
        <Conditional HasStatusTag="neq inhaling" />
      </StatusEffect>
      <!-- start a fire when it burns out (breaks) inside a trash can -->
      <StatusEffect type="OnBroken" target="This">
        <Conditional HasTag="outposttrashcan" targetcontainer="true" />
        <Fire size="1" />
      </StatusEffect>
      <!-- remove the item when it is broken -->
      <StatusEffect type="OnBroken" target="This">
        <Remove />
      </StatusEffect>
    </Holdable>
  </Item>
  <Item name="Pack of Jovian Extra Strongs" identifier="packofextrastrongcigarettes" category="Equipment" health="100" maxstacksize="1" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="1" Tags="smallitem,cigbox" description="The soldiers love it! Fine print on the back reads ''Produced by and for the Jovian Separatists. Contains combat stimulants.'' Holds up to 20 cigarettes. A small label on it reads ''Now with extra small filters.''" cargocontaineridentifier="metalcrate" scale="0.36" impactsoundtag="impact_soft" canflipx="false">
    <PreferredContainer primary="wreckcrewcab,abandonedcrewcab,outpostcrewcab,beaconengcab" amount="1" spawnprobability="0.05" />
    <PreferredContainer primary="wreckstoragecab,abandonedstoragecab" amount="1" spawnprobability="0.02" />
    <PreferredContainer primary="crewcab" spawnprobability="0.02" notcampaign="true" />
    <Price baseprice="150" displaynonempty="true">
      <Price storeidentifier="merchantoutpost" />
      <Price storeidentifier="merchantcity" />
      <Price storeidentifier="merchantresearch" multiplier="1.25" />
      <Price storeidentifier="merchantmilitary" multiplier="1.25" minavailable="6" />
      <Price storeidentifier="merchantmine" multiplier="0.9" minavailable="1" />
      <Price storeidentifier="merchantengineering" multiplier="0.9" />
    </Price>
    <Deconstruct time="7" />
    <Fabricate suitablefabricators="vendingmachine" requiredtime="1" requiredmoney="200" fabricationlimitmin="0" fabricationlimitmax="4" />
    <InventoryIcon texture="ExtraStrong.png" sourcerect="110,0,38,52" origin="0.5,0.5" />
    <Sprite texture="ExtraStrong.png" sourcerect="110,0,38,52" depth="0.55" origin="0.5,0.5" />
    <Body width="34" height="48" density="10.7" />
    <Holdable canbecombined="true" slots="Any,LeftHand" handle1="0,-10" handle2="0,-10" holdangle="0" holdpos="36,-20" msg="ItemMsgPickUpSelect">
      <!-- damage the item when it is in a real fire and add the temporary tag "onfire" -->
      <StatusEffect type="OnFire" target="This" Condition="-5.0" tags="onfire" duration="1" stackable="false" />
      <!-- remove the item when it breaks -->
      <StatusEffect type="OnBroken" target="This">
        <Remove />
      </StatusEffect>
    </Holdable>
    <!-- GreaterComponent timeframe used to track if the item is freshly spawned or old so it doesn't spawn more cigarettes -->
    <GreaterComponent canbeselected="false" canbepicked="false" allowingameediting="false" timeframe="0" />
    <!-- ItemContainer for the cigarettes. Can't make use of spawnwithid="cigarette,cigarette,..." because it would respawn them after every single loading screen if the inventory is empty -->
    <ItemContainer capacity="20" maxstacksize="1" slotsperrow="5" allowaccess="true" drawinventory="true" removecontaineditemsondeconstruct="false">
      <Containable items="cigarette,lighter,idcard,idcard" />
      <!-- check once per round (oneshot) if the item spawned cigarettes in its inventory already (timeframe="1") or if it did not spawn them yet (timeframe="0") | if timeframe is below 1, spawn 20 cigarettes in this inventory -->
      <StatusEffect type="Always" target="This" timeframe="1" setvalue="true" disabledeltatime="true" oneshot="true">
        <Conditional timeframe="lt 1" />
        <SpawnItem identifier="extrastrongcigarette" spawnposition="ThisInventory" spawnifinventoryfull="false" count="20" />
      </StatusEffect>
    </ItemContainer>
  </Item>
  <Item name="Extra Strong Cigarette" identifier="extrastrongcigarette" category="Equipment" maxstacksize="20" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="20" Tags="smallitem,cigarette" description="A submariner's life is physically taxing, but a strong cigarette can help you cope. Soaked in a strange liquid that causes the cigarette to glimmer. Heavily Addictive." cargocontaineridentifier="metalcrate" scale="0.2" isshootable="true" RequireAimToUse="true" impactsoundtag="impact_soft">
    <PreferredContainer primary="crewcab" />
    <Deconstruct time="1" />
    <InventoryIcon texture="ExtraStrong.png" sourcerect="149,0,64,63" origin="0.5,0.5" />
    <!-- intact cigarette sprite at full condition -->
    <Sprite texture="ExtraStrong.png" sourcerect="0,53,80,10" depth="0.55" />
    <!-- BrokenSprite to change the sprite at different condition stages to simulate the cigarette burning down and getting shorter -->
    <BrokenSprite texture="ExtraStrong.png" sourcerect="0,63,80,10" depth="0.55" maxcondition="99.9" fadein="false" />
    <BrokenSprite texture="ExtraStrong.png" sourcerect="0,73,80,10" depth="0.55" maxcondition="80" fadein="false" />
    <BrokenSprite texture="ExtraStrong.png" sourcerect="0,83,80,10" depth="0.55" maxcondition="70" fadein="false" />
    <BrokenSprite texture="ExtraStrong.png" sourcerect="0,93,80,10" depth="0.55" maxcondition="60" fadein="false" />
    <BrokenSprite texture="ExtraStrong.png" sourcerect="0,103,80,10" depth="0.55" maxcondition="50" fadein="false" />
    <BrokenSprite texture="ExtraStrong.png" sourcerect="0,113,80,10" depth="0.55" maxcondition="40" fadein="false" />
    <BrokenSprite texture="ExtraStrong.png" sourcerect="0,123,80,10" depth="0.55" maxcondition="30" fadein="false" />
    <BrokenSprite texture="ExtraStrong.png" sourcerect="0,133,80,10" depth="0.55" maxcondition="20" fadein="false" />
    <BrokenSprite texture="ExtraStrong.png" sourcerect="0,143,80,10" depth="0.55" maxcondition="10" fadein="false" />
    <Body width="78" height="6" density="9.7" />
    <!-- LightComponent that doesn't produce light and only turns on if the item has the tag "lit" while not being in water -->
    <LightComponent range="0" lightcolor="0,0,0,0" castshadows="false" powerconsumption="0" allowingameediting="false" comparison="And">
      <ActiveConditional HasTag="lit" />
      <ActiveConditional InWater="false" />
      <!-- extinguish the item by turning off the LightComponent and adding the tag "unlit" to override the "lit" tag, if the item was put back into the pocket or cabinet, unless it is a trash can -->
      <StatusEffect type="OnActive" target="This" IsOn="false" tags="unlit" setvalue="true" comparison="And">
        <Conditional PhysicsBodyActive="eq false" />
        <Conditional HasTag="neq outposttrashcan" targetcontainer="true" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is above 50 and procude smoke particles while not inhaling (using) -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="gt 50" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="7" distancemax="7" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is between 30 and 50 and procude smoke particles while not inhaling (using) with adjusted particle position to match the different sprite length -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="lte 50" />
        <Conditional condition="gt 30" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="5" distancemax="5" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is between 0 and 30 and procude smoke particles while not inhaling (using) with adjusted particle position to match the different sprite length -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="lte 30" />
        <Conditional condition="gt 0" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="3" distancemax="3" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
    </LightComponent>
    <Holdable canbepicked="true" canBeCombined="false" removeOnCombined="false" slots="Any,RightHand" handle1="-25,-30" aimpos="22,13" holdangle="0" holdpos="30,-5" aimangle="-5" aimable="false" swingwhenaiming="false" swingamount="6,3" swingspeed="0.2" msg="ItemMsgPickUpSelect">
      <!-- add the tag "ignitable" when the item is being held while it is not yet lit so it can be lit up by a lighter -->
      <StatusEffect type="OnSecondaryUse" target="This" tags="ignitable" targetitemcomponent="LightComponent" setvalue="true" comparison="And" delay="1" checkconditionalalways="true">
        <Conditional HasTag="neq ignitable" />
        <Conditional HasTag="neq lit" />
        <Conditional IsOn="false" />
      </StatusEffect>
      <!-- add the temporary "wet" tag and spawn water drop particles for 10 seconds after the item entered water to block reigniting it again for that duration -->
      <StatusEffect type="InWater" target="This" tags="wet" setvalue="true" duration="10" stackable="false" />
      <!-- add the tag "lit" and change the hand position if the item was in real fire -->
      <StatusEffect type="OnFire" target="This" tags="lit" handle1="0,-35" setvalue="true" interval="1" disabledeltatime="true" />
      <!-- constantly reduce the condition of the item while it is in a real fire -->
      <StatusEffect type="OnFire" target="This" Condition="-10.0" interval="1" disabledeltatime="true" />
      <!-- reduce the condition of the cigarette and prevent it from producing smoke (the StatusEffects in LightComponent) when actively smoking it (using) while it is on (tag "lit") by adding the temporary tag "inhaling" -->
      <StatusEffect type="OnUse" target="This,Character" tags="lit,inhaling" condition="-2.5" interval="0.1" duration="0.2">
        <Conditional HasTag="lit" />
      </StatusEffect>
      <!-- remove the ability to breath oxygen, apply the custom "smokingcigarette" affliction and play a sizzling sound while inhaling the smoke (using the item while it has the tag "lit") -->
      <StatusEffect type="OnUse" target="This,Character" availableoxygen="0" setvalue="true" interval="0.1" duration="0.2" multiplyafflictionsbymaxvitality="true">
        <Conditional HasTag="lit" />
        <Affliction identifier="smoking" amount="0.01" />
        <!-- affliction tracks time spent inhaling and creates different amount of smoke with exhaling sound depending on the duration you were inhaling (using the item while it has the tag "lit") -->
        <Affliction identifier="oxygenlow" amount="0.25" />
        <Sound file="%ModDir%/Workshop/Immersive Ignitables Expansion Pack/SmokingCigaretteLoop.ogg" range="200" volume="1.0" loop="true" />
      </StatusEffect>
      <!-- apply and reduce various afflictions when smoking (using the item while it has the tag "lit") | separate effect to allow better control over the applied amounts (configured value per second) -->
      <StatusEffect type="OnUse" target="This,Character" multiplyafflictionsbymaxvitality="true">
        <Conditional HasTag="lit" />
        <Affliction identifier="he-tobaccoaddiction" amount="0.1" />
        <Affliction identifier="chemaddiction" amount="0.3" />
        <ReduceAffliction identifier="chemwithdrawal" amount="4" />
        <Affliction identifier="ii_recenttobaccointake" amount="100" />
        <ReduceAffliction type="tobaccocraving" amount="4.0" />
        <Affliction identifier="psychosisresistance" amount="8" />
        <ReduceAffliction identifier="psychosis" amount="1.2" />
        <ReduceAffliction identifier="hallucinating" amount="2" />
        <ReduceAffliction identifier="watchersgaze" amount="1" />
        <Affliction identifier="combatstimulant" amount="4" />
      </StatusEffect>
      <!-- change hand position when holding the item while not using it (no temporary "inhaling" tag) -->
      <StatusEffect type="OnActive" target="This" handle1="-30,-35" setvalue="true">
        <Conditional HasStatusTag="neq inhaling" />
      </StatusEffect>
      <!-- start a fire when it burns out (breaks) inside a trash can -->
      <StatusEffect type="OnBroken" target="This">
        <Conditional HasTag="outposttrashcan" targetcontainer="true" />
        <Fire size="1" />
      </StatusEffect>
      <!-- remove the item when it is broken -->
      <StatusEffect type="OnBroken" target="This">
        <Remove />
      </StatusEffect>
    </Holdable>
  </Item>
  <Item name="Pack of Dr. Katz Specials" identifier="packofkatzcigarettes" category="Equipment" health="100" maxstacksize="1" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="1" Tags="smallitem,cigbox" description="Recommended by and produced with celebrity doctor, Dr. Katz. Fine print on the back reads ''Heals poison and drug addictions.'' Holds up to 20 cigarettes. A small label on it reads ''Same bold flavor, even more mercury.''" cargocontaineridentifier="metalcrate" scale="0.36" impactsoundtag="impact_soft" canflipx="false">
    <PreferredContainer primary="wreckmedcab,abandonedmedcab" amount="1" spawnprobability="0.01" />
    <PreferredContainer primary="wrecktoxcab,abandonedtoxcab" amount="1" spawnprobability="0.02" />
    <PreferredContainer primary="crewcab" spawnprobability="0.01" notcampaign="true" />
    <Price baseprice="150" displaynonempty="true">
      <Price storeidentifier="merchantoutpost" />
      <Price storeidentifier="merchantcity" />
      <Price storeidentifier="merchantresearch" multiplier="1.25" minavailable="6" />
      <Price storeidentifier="merchantmilitary" multiplier="1.25" minavailable="1" />
      <Price storeidentifier="merchantmine" multiplier="0.9" />
      <Price storeidentifier="merchantengineering" multiplier="0.9" />
    </Price>
    <Deconstruct time="7" />
    <Fabricate suitablefabricators="vendingmachine" requiredtime="1" requiredmoney="200" fabricationlimitmin="0" fabricationlimitmax="2" />
    <InventoryIcon texture="DoctorKatzSpecials.png" sourcerect="110,0,38,52" origin="0.5,0.5" />
    <Sprite texture="DoctorKatzSpecials.png" sourcerect="110,0,38,52" depth="0.55" origin="0.5,0.5" />
    <Body width="34" height="48" density="10.7" />
    <Holdable canbecombined="true" slots="Any,LeftHand" handle1="0,-10" handle2="0,-10" holdangle="0" holdpos="36,-20" msg="ItemMsgPickUpSelect">
      <!-- damage the item when it is in a real fire and add the temporary tag "onfire" -->
      <StatusEffect type="OnFire" target="This" Condition="-5.0" tags="onfire" duration="1" stackable="false" />
      <!-- remove the item when it breaks -->
      <StatusEffect type="OnBroken" target="This">
        <Remove />
      </StatusEffect>
    </Holdable>
    <!-- GreaterComponent timeframe used to track if the item is freshly spawned or old so it doesn't spawn more cigarettes -->
    <GreaterComponent canbeselected="false" canbepicked="false" allowingameediting="false" timeframe="0" />
    <!-- ItemContainer for the cigarettes. Can't make use of spawnwithid="cigarette,cigarette,..." because it would respawn them after every single loading screen if the inventory is empty -->
    <ItemContainer capacity="20" maxstacksize="1" slotsperrow="5" allowaccess="true" drawinventory="true" removecontaineditemsondeconstruct="false">
      <Containable items="cigarette,lighter,idcard" />
      <!-- check once per round (oneshot) if the item spawned cigarettes in its inventory already (timeframe="1") or if it did not spawn them yet (timeframe="0") | if timeframe is below 1, spawn 20 cigarettes in this inventory -->
      <StatusEffect type="Always" target="This" timeframe="1" setvalue="true" disabledeltatime="true" oneshot="true">
        <Conditional timeframe="lt 1" />
        <SpawnItem identifier="katzcigarette" spawnposition="ThisInventory" spawnifinventoryfull="false" count="20" />
      </StatusEffect>
    </ItemContainer>
  </Item>
  <Item name="Dr. Katz Special" identifier="katzcigarette" category="Equipment" maxstacksize="20" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="20" Tags="smallitem,cigarette" description="A doctor's life is BORING, but Dr. Katz can make you CRAAAAZZZZZZYYY! Doused in a silver liquid that makes it shimmer." cargocontaineridentifier="metalcrate" scale="0.2" isshootable="true" RequireAimToUse="true" impactsoundtag="impact_soft">
    <PreferredContainer primary="crewcab" />
    <Deconstruct time="1" />
    <InventoryIcon texture="DoctorKatzSpecials.png" sourcerect="149,0,64,63" origin="0.5,0.5" />
    <!-- intact cigarette sprite at full condition -->
    <Sprite texture="DoctorKatzSpecials.png" sourcerect="0,53,80,10" depth="0.55" />
    <!-- BrokenSprite to change the sprite at different condition stages to simulate the cigarette burning down and getting shorter -->
    <BrokenSprite texture="DoctorKatzSpecials.png" sourcerect="0,63,80,10" depth="0.55" maxcondition="99.9" fadein="false" />
    <BrokenSprite texture="DoctorKatzSpecials.png" sourcerect="0,73,80,10" depth="0.55" maxcondition="80" fadein="false" />
    <BrokenSprite texture="DoctorKatzSpecials.png" sourcerect="0,83,80,10" depth="0.55" maxcondition="70" fadein="false" />
    <BrokenSprite texture="DoctorKatzSpecials.png" sourcerect="0,93,80,10" depth="0.55" maxcondition="60" fadein="false" />
    <BrokenSprite texture="DoctorKatzSpecials.png" sourcerect="0,103,80,10" depth="0.55" maxcondition="50" fadein="false" />
    <BrokenSprite texture="DoctorKatzSpecials.png" sourcerect="0,113,80,10" depth="0.55" maxcondition="40" fadein="false" />
    <BrokenSprite texture="DoctorKatzSpecials.png" sourcerect="0,123,80,10" depth="0.55" maxcondition="30" fadein="false" />
    <BrokenSprite texture="DoctorKatzSpecials.png" sourcerect="0,133,80,10" depth="0.55" maxcondition="20" fadein="false" />
    <BrokenSprite texture="DoctorKatzSpecials.png" sourcerect="0,143,80,10" depth="0.55" maxcondition="10" fadein="false" />
    <Body width="78" height="6" density="9.7" />
    <!-- LightComponent that doesn't produce light and only turns on if the item has the tag "lit" while not being in water -->
    <LightComponent range="0" lightcolor="0,0,0,0" castshadows="false" powerconsumption="0" allowingameediting="false" comparison="And">
      <ActiveConditional HasTag="lit" />
      <ActiveConditional InWater="false" />
      <!-- extinguish the item by turning off the LightComponent and adding the tag "unlit" to override the "lit" tag, if the item was put back into the pocket or cabinet, unless it is a trash can -->
      <StatusEffect type="OnActive" target="This" IsOn="false" tags="unlit" setvalue="true" comparison="And">
        <Conditional PhysicsBodyActive="eq false" />
        <Conditional HasTag="neq outposttrashcan" targetcontainer="true" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is above 50 and procude smoke particles while not inhaling (using) -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="gt 50" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="7" distancemax="7" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is between 30 and 50 and procude smoke particles while not inhaling (using) with adjusted particle position to match the different sprite length -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="lte 50" />
        <Conditional condition="gt 30" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="5" distancemax="5" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is between 0 and 30 and procude smoke particles while not inhaling (using) with adjusted particle position to match the different sprite length -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="lte 30" />
        <Conditional condition="gt 0" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="3" distancemax="3" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
    </LightComponent>
    <Holdable canbepicked="true" canBeCombined="false" removeOnCombined="false" slots="Any,RightHand" handle1="-25,-30" aimpos="22,13" holdangle="0" holdpos="30,-5" aimangle="-5" aimable="false" swingwhenaiming="false" swingamount="6,3" swingspeed="0.2" msg="ItemMsgPickUpSelect">
      <!-- add the tag "ignitable" when the item is being held while it is not yet lit so it can be lit up by a lighter -->
      <StatusEffect type="OnSecondaryUse" target="This" tags="ignitable" targetitemcomponent="LightComponent" setvalue="true" comparison="And" delay="1" checkconditionalalways="true">
        <Conditional HasTag="neq ignitable" />
        <Conditional HasTag="neq lit" />
        <Conditional IsOn="false" />
      </StatusEffect>
      <!-- add the temporary "wet" tag and spawn water drop particles for 10 seconds after the item entered water to block reigniting it again for that duration -->
      <StatusEffect type="InWater" target="This" tags="wet" setvalue="true" duration="10" stackable="false" />
      <!-- add the tag "lit" and change the hand position if the item was in real fire -->
      <StatusEffect type="OnFire" target="This" tags="lit" handle1="0,-35" setvalue="true" interval="1" disabledeltatime="true" />
      <!-- constantly reduce the condition of the item while it is in a real fire -->
      <StatusEffect type="OnFire" target="This" Condition="-10.0" interval="1" disabledeltatime="true" />
      <!-- reduce the condition of the cigarette and prevent it from producing smoke (the StatusEffects in LightComponent) when actively smoking it (using) while it is on (tag "lit") by adding the temporary tag "inhaling" -->
      <StatusEffect type="OnUse" target="This,Character" tags="lit,inhaling" condition="-1" interval="0.1" duration="0.2">
        <Conditional HasTag="lit" />
      </StatusEffect>
      <!-- remove the ability to breath oxygen, apply the custom "smokingcigarette" affliction and play a sizzling sound while inhaling the smoke (using the item while it has the tag "lit") -->
      <StatusEffect type="OnUse" target="This,Character" availableoxygen="0" setvalue="true" interval="0.1" duration="0.2" multiplyafflictionsbymaxvitality="true">
        <Conditional HasTag="lit" />
        <Affliction identifier="smoking" amount="0.01" />
        <!-- affliction tracks time spent inhaling and creates different amount of smoke with exhaling sound depending on the duration you were inhaling (using the item while it has the tag "lit") -->
        <Affliction identifier="oxygenlow" amount="0.15" />
        <Sound file="%ModDir%/Workshop/Immersive Ignitables Expansion Pack/SmokingCigaretteLoop.ogg" range="200" volume="1.0" loop="true" />
      </StatusEffect>
      <!-- apply and reduce various afflictions when smoking (using the item while it has the tag "lit") | separate effect to allow better control over the applied amounts (configured value per second) -->
      <StatusEffect type="OnUse" target="This,Character" multiplyafflictionsbymaxvitality="true">
        <Conditional HasTag="lit" />
        <Affliction identifier="he-tobaccoaddiction" amount="0.1" />
        <Affliction identifier="ii_recenttobaccointake" amount="50" />
        <ReduceAffliction type="tobaccocraving" amount="2.0" />
        <Affliction identifier="psychosis" amount="2" />
        <ReduceAffliction type="damage" amount="1" />
        <ReduceAffliction type="poison" amount="6" />
        <ReduceAffliction type="chemaddiction" amount="9" />
      </StatusEffect>
      <!-- change hand position when holding the item while not using it (no temporary "inhaling" tag) -->
      <StatusEffect type="OnActive" target="This" handle1="-30,-35" setvalue="true">
        <Conditional HasStatusTag="neq inhaling" />
      </StatusEffect>
      <!-- start a fire when it burns out (breaks) inside a trash can -->
      <StatusEffect type="OnBroken" target="This">
        <Conditional HasTag="outposttrashcan" targetcontainer="true" />
        <Fire size="1" />
      </StatusEffect>
      <!-- remove the item when it is broken -->
      <StatusEffect type="OnBroken" target="This">
        <Remove />
      </StatusEffect>
    </Holdable>
  </Item>
  <Item name="Pack of Comrades" identifier="packofcommunistcigarettes" category="Equipment" health="100" maxstacksize="1" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="1" Tags="smallitem,cigbox" description="For true soviet workers, too bad there aren't many of those on Europa. Nearly illegible print on the back reads ''Made in ze JSSR.'' Holds up to 20 cigarettes. An oversized label on the front reads ''For best effect use with VODKA*!(*any alcohol will do)'' Another smaller label with smudged ink reads ''Comrade ######'s Favorites!''" cargocontaineridentifier="metalcrate" scale="0.36" impactsoundtag="impact_soft" canflipx="false">
    <PreferredContainer primary="crewcab" spawnprobability="0.01" />
    <Price baseprice="5" displaynonempty="true">
      <Price storeidentifier="merchantoutpost" />
      <Price storeidentifier="merchantcity" />
      <Price storeidentifier="merchantresearch" multiplier="1.25" />
      <Price storeidentifier="merchantmilitary" multiplier="1.25" minavailable="3" />
      <Price storeidentifier="merchantmine" multiplier="0.9" minavailable="4" />
      <Price storeidentifier="merchantengineering" multiplier="0.9" />
    </Price>
    <Deconstruct time="7" />
    <Fabricate suitablefabricators="vendingmachine" requiredtime="1" requiredmoney="10" fabricationlimitmin="0" fabricationlimitmax="3" />
    <InventoryIcon texture="Comrades.png" sourcerect="110,0,38,52" origin="0.5,0.5" />
    <Sprite texture="Comrades.png" sourcerect="110,0,38,52" depth="0.55" origin="0.5,0.5" />
    <Body width="34" height="48" density="10.7" />
    <Holdable canbecombined="true" slots="Any,LeftHand" handle1="0,-10" handle2="0,-10" holdangle="0" holdpos="36,-20" msg="ItemMsgPickUpSelect">
      <!-- damage the item when it is in a real fire and add the temporary tag "onfire" -->
      <StatusEffect type="OnFire" target="This" Condition="-5.0" tags="onfire" duration="1" stackable="false" />
      <!-- remove the item when it breaks -->
      <StatusEffect type="OnBroken" target="This">
        <Remove />
      </StatusEffect>
    </Holdable>
    <!-- GreaterComponent timeframe used to track if the item is freshly spawned or old so it doesn't spawn more cigarettes -->
    <GreaterComponent canbeselected="false" canbepicked="false" allowingameediting="false" timeframe="0" />
    <!-- ItemContainer for the cigarettes. Can't make use of spawnwithid="cigarette,cigarette,..." because it would respawn them after every single loading screen if the inventory is empty -->
    <ItemContainer capacity="20" maxstacksize="1" slotsperrow="5" allowaccess="true" drawinventory="true" removecontaineditemsondeconstruct="false">
      <Containable items="cigarette,lighter,idcard" />
      <!-- check once per round (oneshot) if the item spawned cigarettes in its inventory already (timeframe="1") or if it did not spawn them yet (timeframe="0") | if timeframe is below 1, spawn 20 cigarettes in this inventory -->
      <StatusEffect type="Always" target="This" timeframe="1" setvalue="true" disabledeltatime="true" oneshot="true">
        <Conditional timeframe="lt 1" />
        <SpawnItem identifier="communistcigarette" spawnposition="ThisInventory" spawnifinventoryfull="false" count="20" />
      </StatusEffect>
    </ItemContainer>
  </Item>
  <Item name="Comrade" identifier="communistcigarette" category="Equipment" maxstacksize="20" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="20" Tags="smallitem,cigarette" description="A submariner's life is insanity inducing, but, sometimes, just the smell of smoke can sober you right up. The cigarette doesn't smell of tabacco, perhaps its nothing more than a stick to burn in your mouth." cargocontaineridentifier="metalcrate" scale="0.2" isshootable="true" RequireAimToUse="true" impactsoundtag="impact_soft">
    <PreferredContainer primary="crewcab" />
    <Deconstruct time="1" />
    <InventoryIcon texture="Comrades.png" sourcerect="149,0,64,63" origin="0.5,0.5" />
    <!-- intact cigarette sprite at full condition -->
    <Sprite texture="Comrades.png" sourcerect="0,53,80,10" depth="0.55" />
    <!-- BrokenSprite to change the sprite at different condition stages to simulate the cigarette burning down and getting shorter -->
    <BrokenSprite texture="Comrades.png" sourcerect="0,63,80,10" depth="0.55" maxcondition="99.9" fadein="false" />
    <BrokenSprite texture="Comrades.png" sourcerect="0,73,80,10" depth="0.55" maxcondition="80" fadein="false" />
    <BrokenSprite texture="Comrades.png" sourcerect="0,83,80,10" depth="0.55" maxcondition="70" fadein="false" />
    <BrokenSprite texture="Comrades.png" sourcerect="0,93,80,10" depth="0.55" maxcondition="60" fadein="false" />
    <BrokenSprite texture="Comrades.png" sourcerect="0,103,80,10" depth="0.55" maxcondition="50" fadein="false" />
    <BrokenSprite texture="Comrades.png" sourcerect="0,113,80,10" depth="0.55" maxcondition="40" fadein="false" />
    <BrokenSprite texture="Comrades.png" sourcerect="0,123,80,10" depth="0.55" maxcondition="30" fadein="false" />
    <BrokenSprite texture="Comrades.png" sourcerect="0,133,80,10" depth="0.55" maxcondition="20" fadein="false" />
    <BrokenSprite texture="Comrades.png" sourcerect="0,143,80,10" depth="0.55" maxcondition="10" fadein="false" />
    <Body width="78" height="6" density="9.7" />
    <!-- LightComponent that doesn't produce light and only turns on if the item has the tag "lit" while not being in water -->
    <LightComponent range="0" lightcolor="0,0,0,0" castshadows="false" powerconsumption="0" allowingameediting="false" comparison="And">
      <ActiveConditional HasTag="lit" />
      <ActiveConditional InWater="false" />
      <!-- extinguish the item by turning off the LightComponent and adding the tag "unlit" to override the "lit" tag, if the item was put back into the pocket or cabinet, unless it is a trash can -->
      <StatusEffect type="OnActive" target="This" IsOn="false" tags="unlit" setvalue="true" comparison="And">
        <Conditional PhysicsBodyActive="eq false" />
        <Conditional HasTag="neq outposttrashcan" targetcontainer="true" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is above 50 and procude smoke particles while not inhaling (using) -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="gt 50" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="7" distancemax="7" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is between 30 and 50 and procude smoke particles while not inhaling (using) with adjusted particle position to match the different sprite length -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="lte 50" />
        <Conditional condition="gt 30" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="5" distancemax="5" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is between 0 and 30 and procude smoke particles while not inhaling (using) with adjusted particle position to match the different sprite length -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="lte 30" />
        <Conditional condition="gt 0" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="3" distancemax="3" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
    </LightComponent>
    <Holdable canbepicked="true" canBeCombined="false" removeOnCombined="false" slots="Any,RightHand" handle1="-25,-30" aimpos="22,13" holdangle="0" holdpos="30,-5" aimangle="-5" aimable="false" swingwhenaiming="false" swingamount="6,3" swingspeed="0.2" msg="ItemMsgPickUpSelect">
      <!-- add the tag "ignitable" when the item is being held while it is not yet lit so it can be lit up by a lighter -->
      <StatusEffect type="OnSecondaryUse" target="This" tags="ignitable" targetitemcomponent="LightComponent" setvalue="true" comparison="And" delay="1" checkconditionalalways="true">
        <Conditional HasTag="neq ignitable" />
        <Conditional HasTag="neq lit" />
        <Conditional IsOn="false" />
      </StatusEffect>
      <!-- add the temporary "wet" tag and spawn water drop particles for 10 seconds after the item entered water to block reigniting it again for that duration -->
      <StatusEffect type="InWater" target="This" tags="wet" setvalue="true" duration="10" stackable="false" />
      <!-- add the tag "lit" and change the hand position if the item was in real fire -->
      <StatusEffect type="OnFire" target="This" tags="lit" handle1="0,-35" setvalue="true" interval="1" disabledeltatime="true" />
      <!-- constantly reduce the condition of the item while it is in a real fire -->
      <StatusEffect type="OnFire" target="This" Condition="-10.0" interval="1" disabledeltatime="true" />
      <!-- reduce the condition of the cigarette and prevent it from producing smoke (the StatusEffects in LightComponent) when actively smoking it (using) while it is on (tag "lit") by adding the temporary tag "inhaling" -->
      <StatusEffect type="OnUse" target="This,Character" tags="lit,inhaling" condition="-1" interval="0.1" duration="0.2">
        <Conditional HasTag="lit" />
      </StatusEffect>
      <!-- remove the ability to breath oxygen, apply the custom "smokingcigarette" affliction and play a sizzling sound while inhaling the smoke (using the item while it has the tag "lit") -->
      <StatusEffect type="OnUse" target="This,Character" availableoxygen="0" setvalue="true" interval="0.1" duration="0.2" multiplyafflictionsbymaxvitality="true">
        <Conditional HasTag="lit" />
        <Affliction identifier="smokingnicotineless" amount="0.01" />
        <!-- affliction tracks time spent inhaling and creates different amount of smoke with exhaling sound depending on the duration you were inhaling (using the item while it has the tag "lit") -->
        <Affliction identifier="oxygenlow" amount="0.15" />
        <Sound file="%ModDir%/Workshop/Immersive Ignitables Expansion Pack/SmokingCigaretteLoop.ogg" range="200" volume="1.0" loop="true" />
      </StatusEffect>
      <!-- apply and reduce various afflictions when smoking (using the item while it has the tag "lit") | separate effect to allow better control over the applied amounts (configured value per second) -->
      <StatusEffect type="OnUse" target="This,Character" multiplyafflictionsbymaxvitality="true">
        <Conditional HasTag="lit" />
        <ReduceAffliction identifier="he-tobaccoaddiction" amount="0.1" />
        <ReduceAffliction identifier="tobaccocraving" amount="1" />
        <ReduceAffliction identifier="drunk" amount="5" />
        <ReduceAffliction identifier="psychosis" amount="0.8" />
        <ReduceAffliction identifier="hallucinating" amount="1" />
        <ReduceAffliction identifier="watchersgaze" amount="0.5" />
      </StatusEffect>
      <!-- change hand position when holding the item while not using it (no temporary "inhaling" tag) -->
      <StatusEffect type="OnActive" target="This" handle1="-30,-35" setvalue="true">
        <Conditional HasStatusTag="neq inhaling" />
      </StatusEffect>
      <!-- start a fire when it burns out (breaks) inside a trash can -->
      <StatusEffect type="OnBroken" target="This">
        <Conditional HasTag="outposttrashcan" targetcontainer="true" />
        <Fire size="1" />
      </StatusEffect>
      <!-- remove the item when it is broken -->
      <StatusEffect type="OnBroken" target="This">
        <Remove />
      </StatusEffect>
    </Holdable>
  </Item>
  <Item name="Unsmudged Pack of Comrades" identifier="packofunsmudgedcommunistcigarettes" category="Equipment" health="100" maxstacksize="1" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="1" Tags="smallitem,cigbox" description="This is an extremely ancient box of ''Comrades'' ''cigarettes.'' Holds up to 20 cigarettes. Unusually the small label on the front is unsmudged and the ink reads ''Comrade Leanna's Favorites!''" cargocontaineridentifier="metalcrate" scale="0.36" impactsoundtag="impact_soft" canflipx="false">
    <PreferredContainer primary="wreckstoragecab,abandonedstoragecab" amount="1" spawnprobability="0.001" />
    <Price baseprice="5" sold="false" displaynonempty="true">
      <Price storeidentifier="merchantoutpost" />
      <Price storeidentifier="merchantcity" />
      <Price storeidentifier="merchantresearch" multiplier="1.25" />
      <Price storeidentifier="merchantmilitary" multiplier="1.25" minavailable="3" />
      <Price storeidentifier="merchantmine" multiplier="0.9" minavailable="4" />
      <Price storeidentifier="merchantengineering" multiplier="0.9" />
    </Price>
    <Deconstruct time="7" />
    <InventoryIcon texture="Comrades.png" sourcerect="110,0,38,52" origin="0.5,0.5" />
    <Sprite texture="Comrades.png" sourcerect="110,0,38,52" depth="0.55" origin="0.5,0.5" />
    <Body width="34" height="48" density="10.7" />
    <Holdable canbecombined="true" slots="Any,LeftHand" handle1="0,-10" handle2="0,-10" holdangle="0" holdpos="36,-20" msg="ItemMsgPickUpSelect">
      <!-- damage the item when it is in a real fire and add the temporary tag "onfire" -->
      <StatusEffect type="OnFire" target="This" Condition="-5.0" tags="onfire" duration="1" stackable="false" />
      <!-- remove the item when it breaks -->
      <StatusEffect type="OnBroken" target="This">
        <Remove />
      </StatusEffect>
    </Holdable>
    <!-- GreaterComponent timeframe used to track if the item is freshly spawned or old so it doesn't spawn more cigarettes -->
    <GreaterComponent canbeselected="false" canbepicked="false" allowingameediting="false" timeframe="0" />
    <!-- ItemContainer for the cigarettes. Can't make use of spawnwithid="cigarette,cigarette,..." because it would respawn them after every single loading screen if the inventory is empty -->
    <ItemContainer capacity="20" maxstacksize="1" slotsperrow="5" allowaccess="true" drawinventory="true" removecontaineditemsondeconstruct="false">
      <Containable items="cigarette,lighter,idcard" />
      <!-- check once per round (oneshot) if the item spawned cigarettes in its inventory already (timeframe="1") or if it did not spawn them yet (timeframe="0") | if timeframe is below 1, spawn 20 cigarettes in this inventory -->
      <StatusEffect type="Always" target="This" timeframe="1" setvalue="true" disabledeltatime="true" oneshot="true">
        <Conditional timeframe="lt 1" />
        <SpawnItem identifier="communistcigarette" spawnposition="ThisInventory" spawnifinventoryfull="false" count="20" />
      </StatusEffect>
    </ItemContainer>
  </Item>
  <Item name="Comically Large Crate of Comrades" identifier="beegpackofcommunistcigarettes" category="Equipment" health="100" maxstacksize="1" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="1" Tags="crate,allowcleanup" description="Enough ''cigarettes'' to fuel an entire SSR! Can hold up to 16 of any kind of cigarette boxes." cargocontaineridentifier="metalcrate" scale="0.6" impactsoundtag="impact_soft" canflipx="false">
    <PreferredContainer primary="wreckstoragecab,abandonedstoragecab" amount="1" spawnprobability="0.001" />
    <PreferredContainer primary="crewcab" spawnprobability="0.01" />
    <Price baseprice="150" sold="false" displaynonempty="true">
      <Price storeidentifier="merchantoutpost" />
      <Price storeidentifier="merchantcity" />
      <Price storeidentifier="merchantresearch" />
      <Price storeidentifier="merchantmilitary" />
      <Price storeidentifier="merchantmine" />
      <Price storeidentifier="merchantengineering" />
    </Price>
    <Fabricate suitablefabricators="vendingmachine" requiredtime="30" requiredmoney="750" fabricationlimitmin="0" fabricationlimitmax="1" />
    <Deconstruct time="7" />
    <Body width="150" height="75" density="25" />
    <Holdable slots="RightHand+LeftHand,Any" holdpos="0,-80" handle1="-30,14" handle2="30,14" aimable="false" msg="ItemMsgPickUpSelect" />
    <InventoryIcon texture="Comrades.png" sourcerect="82,90,133,65" origin="0.5,0.5" />
    <Sprite texture="Comrades.png" sourcerect="82,90,133,65" depth="0.55" origin="0.5,0.5" />
    <!-- GreaterComponent timeframe used to track if the item is freshly spawned or old so it doesn't spawn more cigarettes -->
    <GreaterComponent canbeselected="false" canbepicked="false" allowingameediting="false" timeframe="0" />
    <!-- ItemContainer for the cigarettes. Can't make use of spawnwithid="cigarette,cigarette,..." because it would respawn them after every single loading screen if the inventory is empty -->
    <ItemContainer capacity="16" maxstacksize="32" canbeselected="false" hideitems="true" keepopenwhenequipped="true" movableframe="true">
      <Containable items="cigbox" />
      <StatusEffect type="Always" target="This" timeframe="1" setvalue="true" disabledeltatime="true" oneshot="true">
        <Conditional timeframe="lt 1" />
        <SpawnItem identifier="packofcommunistcigarettes" spawnposition="ThisInventory" spawnifinventoryfull="false" count="20" />
      </StatusEffect>
    </ItemContainer>
  </Item>
  <Item name="Pack of Honk-Tastic Honkas" identifier="packofclowncigarettes" category="Equipment" health="100" maxstacksize="1" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="1" Tags="smallitem,cigbox" description="For the true devotees of the Honkmother. Print written on the back in italicized Times New Roman reads ''Courtesy of the Red Nosed. Made in Space China'' Holds up to 20 cigarettes. Purple Comic Sans on the front of the packaging reads ''Full of Potassium! ZERO Nicotine!''" cargocontaineridentifier="metalcrate" scale="0.36" impactsoundtag="impact_soft" canflipx="false">
    <PreferredContainer primary="wreckcrewcab,abandonedcrewcab,outpostcrewcab,beaconengcab" amount="1" spawnprobability="0.005" />
    <PreferredContainer primary="wreckstoragecab,abandonedstoragecab" amount="1" spawnprobability="0.002" />
    <PreferredContainer primary="crewcab" spawnprobability="0.01" />
    <Price baseprice="25" displaynonempty="true">
      <Price storeidentifier="merchantclown" minavailable="3" maxavailable="5">
        <Reputation faction="clowns" min="20" />
      </Price>
    </Price>
    <Deconstruct time="7" />
    <Fabricate suitablefabricators="vendingmachine" requiredtime="1" requiredmoney="200" fabricationlimitmin="0" fabricationlimitmax="1" />
    <InventoryIcon texture="Clown.png" sourcerect="110,0,38,52" origin="0.5,0.5" />
    <Sprite texture="Clown.png" sourcerect="110,0,38,52" depth="0.55" origin="0.5,0.5" />
    <Body width="34" height="48" density="10.7" />
    <Holdable canbecombined="true" slots="Any,LeftHand" handle1="0,-10" handle2="0,-10" holdangle="0" holdpos="36,-20" msg="ItemMsgPickUpSelect">
      <!-- damage the item when it is in a real fire and add the temporary tag "onfire" -->
      <StatusEffect type="OnFire" target="This" Condition="-5.0" tags="onfire" duration="1" stackable="false" />
      <!-- remove the item when it breaks -->
      <StatusEffect type="OnBroken" target="This">
        <Remove />
      </StatusEffect>
    </Holdable>
    <!-- GreaterComponent timeframe used to track if the item is freshly spawned or old so it doesn't spawn more cigarettes -->
    <GreaterComponent canbeselected="false" canbepicked="false" allowingameediting="false" timeframe="0" />
    <!-- ItemContainer for the cigarettes. Can't make use of spawnwithid="cigarette,cigarette,..." because it would respawn them after every single loading screen if the inventory is empty -->
    <ItemContainer capacity="20" maxstacksize="1" slotsperrow="5" allowaccess="true" drawinventory="true" removecontaineditemsondeconstruct="false">
      <Containable items="cigarette,lighter,idcard" />
      <!-- check once per round (oneshot) if the item spawned cigarettes in its inventory already (timeframe="1") or if it did not spawn them yet (timeframe="0") | if timeframe is below 1, spawn 20 cigarettes in this inventory -->
      <StatusEffect type="Always" target="This" timeframe="1" setvalue="true" disabledeltatime="true" oneshot="true">
        <Conditional timeframe="lt 1" />
        <SpawnItem identifier="clowncigarette" spawnposition="ThisInventory" spawnifinventoryfull="false" count="20" />
      </StatusEffect>
    </ItemContainer>
  </Item>
  <Item name="Honk-Tastic Honka ''Cigarette''" identifier="clowncigarette" category="Equipment" maxstacksize="20" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="20" Tags="smallitem,cigarette" description="A clowns's life is mentally taxing with trying to make everyone happy and failing over and over again. Perhaps all they need is some good slapstick?" cargocontaineridentifier="metalcrate" scale="0.3" isshootable="true" RequireAimToUse="true" impactsoundtag="impact_soft">
    <PreferredContainer primary="crewcab" />
    <Deconstruct time="10">
      <Item identifier="potassium" />
    </Deconstruct>
    <InventoryIcon texture="Clown.png" sourcerect="149,0,64,63" origin="0.5,0.5" />
    <!-- intact cigarette sprite at full condition -->
    <Sprite texture="Clown.png" sourcerect="10,55,81,18" depth="0.55" />
    <!-- BrokenSprite to change the sprite at different condition stages to simulate the cigarette burning down and getting shorter -->
    <BrokenSprite texture="Clown.png" sourcerect="10,74,81,18" depth="0.55" maxcondition="99.9" fadein="false" />
    <BrokenSprite texture="Clown.png" sourcerect="10,93,81,18" depth="0.55" maxcondition="75" fadein="false" />
    <BrokenSprite texture="Clown.png" sourcerect="10,112,81,18" depth="0.55" maxcondition="65" fadein="false" />
    <BrokenSprite texture="Clown.png" sourcerect="10,131,81,18" depth="0.55" maxcondition="55" fadein="false" />
    <BrokenSprite texture="Clown.png" sourcerect="10,150,81,18" depth="0.55" maxcondition="45" fadein="false" />
    <BrokenSprite texture="Clown.png" sourcerect="10,169,81,18" depth="0.55" maxcondition="35" fadein="false" />
    <BrokenSprite texture="Clown.png" sourcerect="10,188,81,18" depth="0.55" maxcondition="25" fadein="false" />
    <BrokenSprite texture="Clown.png" sourcerect="10,207,81,18" depth="0.55" maxcondition="15" fadein="false" />
    <BrokenSprite texture="Clown.png" sourcerect="10,226,81,18" depth="0.55" maxcondition="5" fadein="false" />
    <Body width="81" height="18" density="9.7" />
    <!-- LightComponent that doesn't produce light and only turns on if the item has the tag "lit" while not being in water -->
    <LightComponent range="0" lightcolor="0,0,0,0" castshadows="false" powerconsumption="0" allowingameediting="false" comparison="And">
      <ActiveConditional HasTag="lit" />
      <ActiveConditional InWater="false" />
      <!-- extinguish the item by turning off the LightComponent and adding the tag "unlit" to override the "lit" tag, if the item was put back into the pocket or cabinet, unless it is a trash can -->
      <StatusEffect type="OnActive" target="This" IsOn="false" tags="unlit" setvalue="true" comparison="And">
        <Conditional PhysicsBodyActive="eq false" />
        <Conditional HasTag="neq outposttrashcan" targetcontainer="true" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is above 50 and procude smoke particles while not inhaling (using) -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="gt 50" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="7" distancemax="7" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is between 30 and 50 and procude smoke particles while not inhaling (using) with adjusted particle position to match the different sprite length -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="lte 50" />
        <Conditional condition="gt 30" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="5" distancemax="5" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is between 0 and 30 and procude smoke particles while not inhaling (using) with adjusted particle position to match the different sprite length -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="lte 30" />
        <Conditional condition="gt 0" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="3" distancemax="3" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
    </LightComponent>
    <Holdable canbepicked="true" canBeCombined="false" removeOnCombined="false" slots="Any,RightHand" handle1="-25,-30" aimpos="22,13" holdangle="0" holdpos="30,-5" aimangle="-5" aimable="false" swingwhenaiming="false" swingamount="6,3" swingspeed="0.2" msg="ItemMsgPickUpSelect">
      <!-- add the tag "ignitable" when the item is being held while it is not yet lit so it can be lit up by a lighter -->
      <StatusEffect type="OnSecondaryUse" target="This" tags="ignitable" targetitemcomponent="LightComponent" setvalue="true" comparison="And" delay="1" checkconditionalalways="true">
        <Conditional HasTag="neq ignitable" />
        <Conditional HasTag="neq lit" />
        <Conditional IsOn="false" />
      </StatusEffect>
      <!-- add the temporary "wet" tag and spawn water drop particles for 10 seconds after the item entered water to block reigniting it again for that duration -->
      <StatusEffect type="InWater" target="This" tags="wet" setvalue="true" duration="10" stackable="false" />
      <!-- add the tag "lit" and change the hand position if the item was in real fire -->
      <StatusEffect type="OnFire" target="This" tags="lit" handle1="0,-35" setvalue="true" interval="1" disabledeltatime="true" />
      <!-- constantly reduce the condition of the item while it is in a real fire -->
      <StatusEffect type="OnFire" target="This" Condition="-10.0" interval="1" disabledeltatime="true" />
      <!-- reduce the condition of the cigarette and prevent it from producing smoke (the StatusEffects in LightComponent) when actively smoking it (using) while it is on (tag "lit") by adding the temporary tag "inhaling" -->
      <StatusEffect type="OnUse" target="This,Character" tags="lit,inhaling" condition="-2" interval="0.1" duration="0.2">
        <Conditional HasTag="lit" />
      </StatusEffect>
      <!-- remove the ability to breath oxygen, apply the custom "smokingcigarette" affliction and play a sizzling sound while inhaling the smoke (using the item while it has the tag "lit") -->
      <StatusEffect type="OnUse" target="This,Character" availableoxygen="0" setvalue="true" interval="0.1" duration="0.2" multiplyafflictionsbymaxvitality="true">
        <Conditional HasTag="lit" />
        <Affliction identifier="smokingnicotineless" amount="0.01" />
        <!-- affliction tracks time spent inhaling and creates different amount of smoke with exhaling sound depending on the duration you were inhaling (using the item while it has the tag "lit") -->
        <Affliction identifier="oxygenlow" amount="0.15" />
        <Sound file="%ModDir%/Workshop/Immersive Ignitables Expansion Pack/SmokingCigaretteLoop.ogg" range="200" volume="1.0" loop="true" />
      </StatusEffect>
      <!-- apply and reduce various afflictions when smoking (using the item while it has the tag "lit") | separate effect to allow better control over the applied amounts (configured value per second) -->
      <StatusEffect type="OnUse" target="This,Character" multiplyafflictionsbymaxvitality="true">
        <Conditional HasTag="lit" />
        <ReduceAffliction identifier="he-tobaccoaddiction" amount="0.05" />
        <ReduceAffliction identifier="tobaccocraving" amount="1" />
        <Affliction identifier="clownpowercig" amount="8" />
        <Affliction identifier="psychosisresistance" amount="4" />
        <ReduceAffliction identifier="psychosis" amount="1.2" />
        <ReduceAffliction identifier="hallucinating" amount="2" />
        <ReduceAffliction identifier="watchersgaze" amount="1" />
        <ReduceAffliction type="mood" amount="5" />
      </StatusEffect>
      <!-- change hand position when holding the item while not using it (no temporary "inhaling" tag) -->
      <StatusEffect type="OnActive" target="This" handle1="-30,-35" setvalue="true">
        <Conditional HasStatusTag="neq inhaling" />
      </StatusEffect>
      <!-- start a fire when it burns out (breaks) inside a trash can -->
      <StatusEffect type="OnBroken" target="This">
        <Conditional HasTag="outposttrashcan" targetcontainer="true" />
        <Fire size="1" />
      </StatusEffect>
      <!-- remove the item when it is broken -->
      <StatusEffect type="OnBroken" target="This">
        <Sound file="Content/Items/Weapons/honk.ogg" type="OnUse" range="10000" />
      </StatusEffect>
      <StatusEffect type="OnBroken" target="This" Delay="1">
        <Explosion range="100.0" ballastfloradamage="0" structuredamage="0" levelwalldamage="0" itemdamage="0" force="100.0" severlimbsprobability="0.0" decal="explosion" decalsize="0.1">
          <Affliction identifier="burn" strength="25" />
          <Affliction identifier="stun" strength="10" />
        </Explosion>
        <Remove />
      </StatusEffect>
    </Holdable>
  </Item>
  <Item name="Clown Lighter" identifier="clownlighter" category="Equipment" maxstacksize="1" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="1" Tags="smallitem,lighter" description="A fun toy lighter. HONK! HONK! HONK!" cargocontaineridentifier="metalcrate" scale="0.3" impactsoundtag="impact_metal_light" isshootable="true" RequireAimToUse="true" hideconditionbar="true">
    <PreferredContainer primary="wreckcrewcab,abandonedcrewcab,outpostcrewcab,beaconengcab" amount="1" spawnprobability="0.05" />
    <PreferredContainer primary="wreckstoragecab,abandonedstoragecab" amount="1" spawnprobability="0.02" />
    <PreferredContainer primary="crewcab" />
    <Price baseprice="250" displaynonempty="true">
      <Price storeidentifier="merchantclown" minavailable="1" maxavailable="4">
        <Reputation faction="clowns" min="25" />
      </Price>
    </Price>
    <Deconstruct time="10">
      <Item identifier="aluminium" />
    </Deconstruct>
    <InventoryIcon texture="Clown.png" sourcerect="0,0,44,51" origin="0.5,0.5" />
    <!-- closed sprite -->
    <Sprite texture="Clown.png" sourcerect="45,11,29,40" depth="0.55" />
    <!-- open sprite -->
    <BrokenSprite texture="Clown.png" sourcerect="0,0,44,51" origin="0.5,0.5" depth="0.55" maxcondition="99" fadein="false" />
    <Body width="27" height="38" density="12.7" />
    <!-- GreaterComponent used to simulate fuel usage | 120s of "fuel" configured -->
    <GreaterComponent canbepicked="false" canbeselected="false" allowingameediting="false" timeframe="0" />
    <!-- LightComponent to shortly light up whenever the lighterspark (effect_lighterfail) item is contained which removes itself after 0.1s -->
    <LightComponent range="50" lightcolor="255,0,0,255" powerconsumption="0" castshadows="false" allowingameediting="false">
      <IsActive HasTag="lighterspark" targetcontaineditem="true" />
      <!-- create spark particles when the light is on -->
      <StatusEffect type="OnActive" target="This">
        <ParticleEmitter particle="lighterspark" particlespersecond="50" colormultiplier="255,0,0,255" copyentityangle="true" anglemin="82" anglemax="98" distancemin="0" distancemax="0" velocitymin="75" velocitymax="75" scalemin="0.5" scalemax="0.5" />
      </StatusEffect>
    </LightComponent>
    <!-- LightComponent that turns on if the lighteron (effect_lightersuccess) item is contained to iluminate the area and consume fuel (increase timeframe) while it is on -->
    <LightComponent range="150" lightcolor="255,0,0,255" Flicker="0.2" powerconsumption="0" castshadows="false" allowingameediting="false">
      <IsActive HasTag="lighteron" targetcontaineditem="true" />
      <!-- deplete fuel (increase timeframe) when the lighter is on -->
      <StatusEffect type="OnActive" target="This" timeframe="1">
        <ParticleEmitter particle="smoke" particlespersecond="5" colormultiplier="255,0,0,255" copyentityangle="true" anglemin="98" anglemax="98" distancemin="7" distancemax="7" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
        <ParticleEmitter particle="lighterflame" particlespersecond="5" colormultiplier="255,0,0,255" copyentityangle="true" anglemin="98" anglemax="98" distancemin="7" distancemax="7" velocitymin="0" velocitymax="0" scalemin="0.05" scalemax="0.05" />
      </StatusEffect>
    </LightComponent>
    <Holdable canbepicked="true" canBeCombined="false" removeOnCombined="false" slots="Any,LeftHand" aimpos="33,9" handle2="-15,-25" holdangle="0" holdpos="36,-20" aimangle="0" aimable="false" swingwhenaiming="true" swingamount="6,3" swingspeed="0.2" msg="ItemMsgPickUpSelect">
      <!-- If the timeframe value is greater than "0", apply the temporary tag "lighter_allowrefill" to both the item and the character aiming it -->
      <StatusEffect type="OnSecondaryUse" target="This,Character" tags="lighter_allowrefill" interval="0.1" duration="0.2">
        <Conditional timeframe="gt 0" />
      </StatusEffect>
      <!-- While aiming the item, decrease the timeframe value to "refill" the lighter, but only while the timeframe is greater than "0" and while the character has the temporary tag "lighter_refill" which is applied by aiming with the "Lighter Fuel" item -->
      <StatusEffect type="OnSecondaryUse" target="This" timeframe="-10" comparison="And">
        <Conditional HasStatusTag="lighter_refill" targetcontainer="true" />
        <Conditional timeframe="gt 0" />
      </StatusEffect>
      <!-- 3a. spawn random effect item inside the lighter to either turn it on or fail the attempt. Get's blocked by the "using" tag which is applied while the use key is kept being held so you have to release it to try again -->
      <StatusEffect type="OnUse" target="This" SpawnItemRandomly="True" interval="0.1" comparison="And">
        <Conditional InWater="false" />
        <Conditional HasStatusTag="neq using" />
        <Conditional timeframe="lte 120" />
        <SpawnItem identifier="effect_lighterfailclown" spawnposition="ThisInventory" spawnifinventoryfull="false" spawnifcantbecontained="false" />
        <SpawnItem identifier="effect_lightersuccessclown" spawnposition="ThisInventory" spawnifinventoryfull="false" spawnifcantbecontained="false" />
      </StatusEffect>
      <!-- 3b. always spawn the failed attempt item when the lighter is being used while the timeframe is above 120 (timeframe is used to simulate fuel) -->
      <StatusEffect type="OnUse" target="This" interval="0.1" comparison="And">
        <Conditional InWater="false" />
        <Conditional HasStatusTag="neq using" />
        <Conditional timeframe="gt 120" />
        <SpawnItem identifier="effect_lighterfail" spawnposition="ThisInventory" spawnifinventoryfull="false" spawnifcantbecontained="false" />
      </StatusEffect>
      <!-- 2. apply the temporary "using" tag if the item is being used while aiming (also reapply the temporary "aiming" tag to make sure it doesn't get overridden) -->
      <StatusEffect type="OnUse" target="This" tags="using,aiming" interval="0.1" duration="0.2">
        <Conditional HasStatusTag="aiming" />
      </StatusEffect>
      <!-- 1. apply the temporary "aiming" tag if the item is being aimed -->
      <StatusEffect type="OnSecondaryUse" target="This" tags="aiming" interval="0.1" duration="0.2" />
      <!-- set the condition to 99 to render the open sprite when the item is being aimed -->
      <StatusEffect type="OnSecondaryUse" target="This" condition="99" setvalue="true">
        <Conditional condition="100" />
        <Sound file="%ModDir%/Workshop/Immersive Ignitables Expansion Pack/LighterOpen.ogg" range="200" volume="1.0" loop="false" />
      </StatusEffect>
      <!-- repair the item if it's not being aimed to render the closed sprite again -->
      <StatusEffect type="OnContained" target="This" condition="100" setvalue="true" interval="0.1" comparison="And">
        <Conditional HasStatusTag="neq aiming" />
        <Conditional condition="99" />
        <Sound file="%ModDir%/Workshop/Immersive Ignitables Expansion Pack/LighterClose.ogg" range="200" volume="1.0" loop="false" />
      </StatusEffect>
    </Holdable>
    <ItemContainer capacity="1" maxstacksize="1" allowaccess="false" allowdraganddrop="false" drawinventory="false" removecontaineditemsondeconstruct="true" containedstateindicatorslot="0">
      <Containable items="effect" />
    </ItemContainer>
  </Item>
  <Item hideinmenus="true" name="" identifier="effect_lighterfailclown" Category="Hidden" Tags="effect,lighterspark" maxstacksize="1" cargocontaineridentifier="metalcrate" scale="0.5" spritecolor="255,255,255,0" noninteractable="true">
    <Sprite texture="Content/Items/Tools/tools.png" depth="0.55" sourcerect="0,0,1,1" />
    <Body radius="1" density="10" />
    <Holdable handle1="0,0" slots="Any" msg="ItemMsgPickUpSelect">
      <!-- play the lighter sparking sound and remove the item -->
      <StatusEffect type="Always" target="This" delay="0.1" oneshot="true" stackable="false">
        <ParticleEmitter particle="whitegoosplash" particleamount="5" velocitymin="0" velocitymax="0" scalemultiplier="0.25,0.25" colormultiplier="255,200,200,200" />
        <Sound file="Content/Items/Weapons/honk.ogg" range="200" volume="0.1" loop="false" />
        <Remove />
      </StatusEffect>
    </Holdable>
  </Item>
  <Item hideinmenus="true" name="" identifier="effect_lightersuccessclown" Category="Hidden" Tags="effect,lighteron" maxstacksize="1" cargocontaineridentifier="metalcrate" scale="0.5" spritecolor="255,255,255,0" noninteractable="true">
    <Sprite texture="Content/Items/Tools/tools.png" depth="0.55" sourcerect="0,0,1,1" />
    <Body radius="1" density="10" />
    <Holdable handle1="0,0" slots="Any" msg="ItemMsgPickUpSelect">
      <!-- play the lighter turning on sound -->
      <StatusEffect type="OnContained" target="This" oneshot="true">
        <Sound file="Content/Items/Weapons/honk.ogg" range="200" volume="1.0" loop="false" />
        <ParticleEmitter particle="whitegoosplash" particleamount="5" velocitymin="0" velocitymax="0" scalemultiplier="0.25,0.25" colormultiplier="255,200,200,200" />
        <ParticleEmitter particle="fruitchunks" particleamount="25" anglemin="0" anglemax="360" velocitymin="0" velocitymax="360" scalemultiplier="0.25,0.25" CopyEntityAngle="true" />
      </StatusEffect>
      <!-- ignite all items with the tag "ignitable" in a 20cm range if its physics body is active (being held) | sadly also applies to all other ignitables in range even if only one of them has an active physics body hence why the items need a constant check if their body is active and quickly remove the applied tag again. -->
      <StatusEffect type="Always" target="NearbyItems" targettags="ignitable" range="20" tags="lit" setvalue="true" delay="1" stackable="false">
        <Conditional PhysicsBodyActive="eq true" />
      </StatusEffect>
      <!-- check if either the lighter's fuel is empty (timeframe above 120), the person stopped aiming the lighter or if the item is in water. If one is true, remove the item -->
      <StatusEffect type="Always" target="This" comparison="Or">
        <Conditional timeframe="gt 120" targetcontainer="true" />
        <Conditional HasStatusTag="neq aiming" targetcontainer="true" />
        <Conditional InWater="true" />
        <Remove />
      </StatusEffect>
    </Holdable>
  </Item>
  <Item name="Carton of JIMMIE ''Secret Mix''" identifier="packofJIMMIES" category="Equipment" health="100" maxstacksize="1" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="1" Tags="smallitem,cigbox" description="The package oozes a kind of black sludge that is definetely not something you should be putting in your body and is emitting radio static, but everytime you get badly hurt or are endangered theres a draw to smoke them. Holds up to 6 JIMMIES." cargocontaineridentifier="metalcrate" scale="0.36" impactsoundtag="impact_soft" canflipx="false">
    <PreferredContainer primary="wreckcrewcab,abandonedcrewcab,outpostcrewcab,beaconengcab" amount="1" spawnprobability="0.001" />
    <PreferredContainer primary="wreckstoragecab,abandonedstoragecab" amount="1" spawnprobability="0.002" />
    <PreferredContainer primary="crewcab" />
    <Price baseprice="150" sold="false" displaynonempty="true">
      <Price storeidentifier="merchantoutpost" />
      <Price storeidentifier="merchantcity" />
      <Price storeidentifier="merchantresearch" multiplier="1.25" />
      <Price storeidentifier="merchantmilitary" multiplier="1.25" />
      <Price storeidentifier="merchantmine" multiplier="0.9" />
      <Price storeidentifier="merchantengineering" multiplier="0.9" />
    </Price>
    <Deconstruct time="7" />
    <InventoryIcon texture="Jimmys.png" sourcerect="110,0,38,52" origin="0.5,0.5" />
    <Sprite texture="Jimmys.png" sourcerect="110,0,38,52" depth="0.55" origin="0.5,0.5" />
    <Body width="34" height="48" density="10.7" />
    <Holdable canbecombined="true" slots="Any,LeftHand" handle1="0,-10" handle2="0,-10" holdangle="0" holdpos="36,-20" msg="ItemMsgPickUpSelect">
      <!-- damage the item when it is in a real fire and add the temporary tag "onfire" -->
      <StatusEffect type="OnFire" target="This" Condition="-5.0" tags="onfire" duration="1" stackable="false" />
      <!-- remove the item when it breaks -->
      <StatusEffect type="OnBroken" target="This">
        <Remove />
      </StatusEffect>
      <StatusEffect type="OnContained" target="This" stackable="false" checkconditionalalways="true">
        <Sound file="Content/Sounds/RadioStatic.ogg" type="OnUse" range="100" />
      </StatusEffect>
    </Holdable>
    <!-- GreaterComponent timeframe used to track if the item is freshly spawned or old so it doesn't spawn more cigarettes -->
    <GreaterComponent canbeselected="false" canbepicked="false" allowingameediting="false" timeframe="0" />
    <!-- ItemContainer for the cigarettes. Can't make use of spawnwithid="cigarette,cigarette,..." because it would respawn them after every single loading screen if the inventory is empty -->
    <ItemContainer capacity="6" maxstacksize="1" slotsperrow="2" allowaccess="true" drawinventory="true" removecontaineditemsondeconstruct="false">
      <Containable items="JIMMIE" />
      <!-- check once per round (oneshot) if the item spawned cigarettes in its inventory already (timeframe="1") or if it did not spawn them yet (timeframe="0") | if timeframe is below 1, spawn 20 cigarettes in this inventory -->
      <StatusEffect type="Always" target="This" timeframe="1" setvalue="true" disabledeltatime="true" oneshot="true">
        <Conditional timeframe="lt 1" />
        <SpawnItem identifier="JIMMIE" spawnposition="ThisInventory" spawnifinventoryfull="false" count="6" />
      </StatusEffect>
    </ItemContainer>
  </Item>
  <Item name="JIMMIE" identifier="JIMMIE" category="Equipment" description="Soaked in a slowly pulsating black ooze. Smoking this would be a deal with the devil, but perhaps thats what you need, just don't over do it. A research station would take strong interest in it." maxstacksize="1" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="1" Tags="smallitem,JIMMIE" cargocontaineridentifier="metalcrate" scale="0.35" isshootable="true" RequireAimToUse="true" impactsoundtag="impact_soft">
    <PreferredContainer primary="abandonedcrewcab,wreckcrewcab" amount="1" spawnprobability="0.005" />
    <PreferredContainer primary="ruintreasure" amount="1" spawnprobability="0.05" />
    <PreferredContainer primary="ruinstoragelarge" amount="1" spawnprobability="0.02" />
    <PreferredContainer primary="crewcab" />
    <Price baseprice="200" sold="false" displaynonempty="true">
      <Price storeidentifier="merchantoutpost" />
      <Price storeidentifier="merchantcity" />
      <Price storeidentifier="merchantresearch" multiplier="4.0" />
      <Price storeidentifier="merchantmilitary" />
      <Price storeidentifier="merchantmine" />
      <Price storeidentifier="merchantengineering" />
    </Price>
    <InventoryIcon texture="JimmyInv.png" sourcerect="0,0,42,50" origin="0.5,0.5" />
    <Sprite texture="Jimmys.png" sourcerect="81,53,50,11" depth="0.55" />
    <BrokenSprite texture="Jimmys.png" sourcerect="81,65,50,11" depth="0.55" maxcondition="99.9" fadein="false" />
    <BrokenSprite texture="Jimmys.png" sourcerect="81,77,50,11" depth="0.55" maxcondition="75" fadein="false" />
    <BrokenSprite texture="Jimmys.png" sourcerect="81,89,50,11" depth="0.55" maxcondition="62.5" fadein="false" />
    <BrokenSprite texture="Jimmys.png" sourcerect="81,101,50,11" depth="0.55" maxcondition="50" fadein="false" />
    <BrokenSprite texture="Jimmys.png" sourcerect="81,113,50,11" depth="0.55" maxcondition="37.5" fadein="false" />
    <BrokenSprite texture="Jimmys.png" sourcerect="81,125,50,11" depth="0.55" maxcondition="25" fadein="false" />
    <BrokenSprite texture="Jimmys.png" sourcerect="81,137,50,11" depth="0.55" maxcondition="12.5" fadein="false" />
    <Body width="45" height="10" density="9.9" />
    <LightComponent range="0" lightcolor="0,0,0,0" castshadows="false" powerconsumption="0" allowingameediting="false" comparison="And">
      <ActiveConditional HasTag="lit" />
      <ActiveConditional InWater="false" />
      <!-- extinguish the item by turning off the LightComponent and adding the tag "unlit" to override the "lit" tag, if the item was put back into the pocket or cabinet, unless it is a trash can -->
      <StatusEffect type="OnActive" target="This" IsOn="false" tags="unlit" setvalue="true" comparison="And">
        <Conditional PhysicsBodyActive="eq false" />
        <Conditional HasTag="neq outposttrashcan" targetcontainer="true" />
      </StatusEffect>
      <!-- constantly burn down the cigar when it was lit and procude smoke particles while not inhaling (using) -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="gt 50" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="7" distancemax="7" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- constantly burn down the cigar when it is lit, its condition is between 37.5 and 50 and procude smoke particles while not inhaling (using) with adjusted particle position to match the different sprite length -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="lte 50" />
        <Conditional condition="gt 37.5" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="5" distancemax="5" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- constantly burn down the cigar when it is lit, its condition is between 0 and 37.5 and procude smoke particles while not inhaling (using) with adjusted particle position to match the different sprite length -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="lte 37.5" />
        <Conditional condition="gt 0" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="1" distancemax="1" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
    </LightComponent>
    <Holdable canbepicked="true" canBeCombined="false" removeOnCombined="false" slots="Any,RightHand" handle1="-7,-15" aimpos="24,13" holdangle="0" holdpos="30,-5" aimangle="-5" aimable="false" swingwhenaiming="false" swingamount="6,3" swingspeed="0.2" msg="ItemMsgPickUpSelect">
      <!-- add the tag "ignitable" when the item is being held while it is not yet lit so it can be lit up by a lighter -->
      <StatusEffect type="OnSecondaryUse" target="This" tags="ignitable" targetitemcomponent="LightComponent" setvalue="true" comparison="And" delay="1" checkconditionalalways="true">
        <Conditional HasTag="neq ignitable" />
        <Conditional HasTag="neq lit" />
        <Conditional IsOn="false" />
      </StatusEffect>
      <StatusEffect type="OnUse" target="This,Character" tags="lit,inhaling" condition="-5" interval="0.5" duration="0.2">
        <Conditional HasTag="lit" />
      </StatusEffect>
      <!-- remove the ability to breath oxygen, apply the custom "smokingcigarette" affliction and play a sizzling sound while inhaling the smoke (using the item while it has the tag "lit") -->
      <StatusEffect type="OnUse" target="This,Character" availableoxygen="0" setvalue="true" interval="0.1" duration="0.2" multiplyafflictionsbymaxvitality="true">
        <Conditional HasTag="lit" />
        <Affliction identifier="smoking" amount="0.01" />
        <Affliction identifier="oxygenlow" amount="0.25" />
        <Sound file="%ModDir%/Workshop/Immersive Ignitables Expansion Pack/SmokingCigaretteLoop.ogg" range="200" volume="1.0" loop="true" />
      </StatusEffect>
      <!-- apply and reduce various afflictions when smoking (using the item while it has the tag "lit") | separate effect to allow better control over the applied amounts (configured value per second) -->
      <StatusEffect type="OnUse" target="This,Character" multiplyafflictionsbymaxvitality="true">
        <Conditional HasTag="lit" />
        <ReduceAffliction type="damage" amount="50" />
        <ReduceAffliction type="bleeding" amount="50" />
        <Affliction identifier="psychosis" amount="15" />
        <Affliction identifier="hallucinating" amount="15" />
        <Affliction identifier="JIMMIESfaith" amount="60" />
        <Affliction identifier="JIMMIEStax" amount="20" />
        <Affliction identifier="watchersgaze" amount="15" />
      </StatusEffect>
      <!-- change hand position when holding the item while not using it (no temporary "inhaling" tag) -->
      <StatusEffect type="OnActive" target="This" handle1="-30,-35" setvalue="true">
        <Conditional HasStatusTag="neq inhaling" />
      </StatusEffect>
      <!-- start a fire when it burns out (breaks) inside a trashcan -->
      <StatusEffect type="OnBroken" target="This">
        <Conditional HasTag="outposttrashcan" targetcontainer="true" />
        <Fire size="1" />
      </StatusEffect>
      <!-- remove the item when it is broken -->
      <StatusEffect type="OnBroken" target="This">
        <Remove />
      </StatusEffect>
    </Holdable>
  </Item>
  <Item name="Pack of Officer Harmsalots" identifier="packofharmsalotcigarettes" category="Equipment" health="100" maxstacksize="1" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="1" Tags="smallitem,cigbox" description="The cigarette brand of a PROUD shitsec. Bold print on the back reads ''Produced by John Harmsalot himself in Skadi Cauldron Mine.'' Holds up to 20 cigarettes. A small label on it reads ''Now with EXTRA prisoner MAIMING POWER!''" cargocontaineridentifier="metalcrate" scale="0.36" impactsoundtag="impact_soft" canflipx="false">
    <PreferredContainer primary="wreckcrewcab,abandonedcrewcab,outpostcrewcab,beaconengcab" amount="1" spawnprobability="0.05" />
    <PreferredContainer primary="wreckstoragecab,abandonedstoragecab" amount="1" spawnprobability="0.02" />
    <PreferredContainer primary="crewcab" />
    <PreferredContainer primary="secarmcab" spawnprobability="0.05" notcampaign="true" />
    <Price baseprice="100" displaynonempty="true">
      <Price storeidentifier="merchantoutpost" minavailable="6" />
      <Price storeidentifier="merchantcity" minavailable="7" />
      <Price storeidentifier="merchantresearch" multiplier="1.25" />
      <Price storeidentifier="merchantmilitary" multiplier="1.25" minavailable="3" />
      <Price storeidentifier="merchantmine" multiplier="0.9" minavailable="4" />
      <Price storeidentifier="merchantengineering" multiplier="0.9" />
    </Price>
    <Deconstruct time="7" />
    <Fabricate suitablefabricators="vendingmachine" requiredtime="1" requiredmoney="125" fabricationlimitmin="1" fabricationlimitmax="3" />
    <InventoryIcon texture="Harmsalot.png" sourcerect="110,0,38,52" origin="0.5,0.5" />
    <Sprite texture="Harmsalot.png" sourcerect="110,0,38,52" depth="0.55" origin="0.5,0.5" />
    <Body width="34" height="48" density="10.7" />
    <Holdable canbecombined="true" slots="Any,LeftHand" handle1="0,-10" handle2="0,-10" holdangle="0" holdpos="36,-20" msg="ItemMsgPickUpSelect">
      <!-- damage the item when it is in a real fire and add the temporary tag "onfire" -->
      <StatusEffect type="OnFire" target="This" Condition="-5.0" tags="onfire" duration="1" stackable="false" />
      <!-- remove the item when it breaks -->
      <StatusEffect type="OnBroken" target="This">
        <Remove />
      </StatusEffect>
    </Holdable>
    <!-- GreaterComponent timeframe used to track if the item is freshly spawned or old so it doesn't spawn more cigarettes -->
    <GreaterComponent canbeselected="false" canbepicked="false" allowingameediting="false" timeframe="0" />
    <!-- ItemContainer for the cigarettes. Can't make use of spawnwithid="cigarette,cigarette,..." because it would respawn them after every single loading screen if the inventory is empty -->
    <ItemContainer capacity="20" maxstacksize="1" slotsperrow="5" allowaccess="true" drawinventory="true" removecontaineditemsondeconstruct="false">
      <Containable items="cigarette,lighter,idcard" />
      <!-- check once per round (oneshot) if the item spawned cigarettes in its inventory already (timeframe="1") or if it did not spawn them yet (timeframe="0") | if timeframe is below 1, spawn 20 cigarettes in this inventory -->
      <StatusEffect type="Always" target="This" timeframe="1" setvalue="true" disabledeltatime="true" oneshot="true">
        <Conditional timeframe="lt 1" />
        <SpawnItem identifier="harmsalotcigarette" spawnposition="ThisInventory" spawnifinventoryfull="false" count="20" />
      </StatusEffect>
    </ItemContainer>
  </Item>
  <Item name="Officer Harmsalot Brand Cigarette" identifier="harmsalotcigarette" category="Equipment" maxstacksize="20" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="20" Tags="smallitem,cigarette" description="A submariner's life is physically taxing, but an uplifting cigarette can help you cope. Soaked in what you can only assume to be hyperzine." cargocontaineridentifier="metalcrate" scale="0.2" isshootable="true" RequireAimToUse="true" impactsoundtag="impact_soft">
    <PreferredContainer primary="crewcab" />
    <Deconstruct time="1" />
    <InventoryIcon texture="Harmsalot.png" sourcerect="149,0,64,63" origin="0.5,0.5" />
    <!-- intact cigarette sprite at full condition -->
    <Sprite texture="Harmsalot.png" sourcerect="0,53,80,10" depth="0.55" />
    <!-- BrokenSprite to change the sprite at different condition stages to simulate the cigarette burning down and getting shorter -->
    <BrokenSprite texture="Harmsalot.png" sourcerect="0,63,80,10" depth="0.55" maxcondition="99.9" fadein="false" />
    <BrokenSprite texture="Harmsalot.png" sourcerect="0,73,80,10" depth="0.55" maxcondition="80" fadein="false" />
    <BrokenSprite texture="Harmsalot.png" sourcerect="0,83,80,10" depth="0.55" maxcondition="70" fadein="false" />
    <BrokenSprite texture="Harmsalot.png" sourcerect="0,93,80,10" depth="0.55" maxcondition="60" fadein="false" />
    <BrokenSprite texture="Harmsalot.png" sourcerect="0,103,80,10" depth="0.55" maxcondition="50" fadein="false" />
    <BrokenSprite texture="Harmsalot.png" sourcerect="0,113,80,10" depth="0.55" maxcondition="40" fadein="false" />
    <BrokenSprite texture="Harmsalot.png" sourcerect="0,123,80,10" depth="0.55" maxcondition="30" fadein="false" />
    <BrokenSprite texture="Harmsalot.png" sourcerect="0,133,80,10" depth="0.55" maxcondition="20" fadein="false" />
    <BrokenSprite texture="Harmsalot.png" sourcerect="0,143,80,10" depth="0.55" maxcondition="10" fadein="false" />
    <Body width="78" height="6" density="9.7" />
    <!-- LightComponent that doesn't produce light and only turns on if the item has the tag "lit" while not being in water -->
    <LightComponent range="0" lightcolor="0,0,0,0" castshadows="false" powerconsumption="0" allowingameediting="false" comparison="And">
      <ActiveConditional HasTag="lit" />
      <ActiveConditional InWater="false" />
      <!-- extinguish the item by turning off the LightComponent and adding the tag "unlit" to override the "lit" tag, if the item was put back into the pocket or cabinet, unless it is a trash can -->
      <StatusEffect type="OnActive" target="This" IsOn="false" tags="unlit" setvalue="true" comparison="And">
        <Conditional PhysicsBodyActive="eq false" />
        <Conditional HasTag="neq outposttrashcan" targetcontainer="true" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is above 50 and procude smoke particles while not inhaling (using) -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="gt 50" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="7" distancemax="7" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is between 30 and 50 and procude smoke particles while not inhaling (using) with adjusted particle position to match the different sprite length -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="lte 50" />
        <Conditional condition="gt 30" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="5" distancemax="5" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is between 0 and 30 and procude smoke particles while not inhaling (using) with adjusted particle position to match the different sprite length -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="lte 30" />
        <Conditional condition="gt 0" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="3" distancemax="3" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
    </LightComponent>
    <Holdable canbepicked="true" canBeCombined="false" removeOnCombined="false" slots="Any,RightHand" handle1="-25,-30" aimpos="22,13" holdangle="0" holdpos="30,-5" aimangle="-5" aimable="false" swingwhenaiming="false" swingamount="6,3" swingspeed="0.2" msg="ItemMsgPickUpSelect">
      <!-- add the tag "ignitable" when the item is being held while it is not yet lit so it can be lit up by a lighter -->
      <StatusEffect type="OnSecondaryUse" target="This" tags="ignitable" targetitemcomponent="LightComponent" setvalue="true" comparison="And" delay="1" checkconditionalalways="true">
        <Conditional HasTag="neq ignitable" />
        <Conditional HasTag="neq lit" />
        <Conditional IsOn="false" />
      </StatusEffect>
      <!-- add the temporary "wet" tag and spawn water drop particles for 10 seconds after the item entered water to block reigniting it again for that duration -->
      <StatusEffect type="InWater" target="This" tags="wet" setvalue="true" duration="10" stackable="false" />
      <!-- add the tag "lit" and change the hand position if the item was in real fire -->
      <StatusEffect type="OnFire" target="This" tags="lit" handle1="0,-35" setvalue="true" interval="1" disabledeltatime="true" />
      <!-- constantly reduce the condition of the item while it is in a real fire -->
      <StatusEffect type="OnFire" target="This" Condition="-10.0" interval="1" disabledeltatime="true" />
      <!-- reduce the condition of the cigarette and prevent it from producing smoke (the StatusEffects in LightComponent) when actively smoking it (using) while it is on (tag "lit") by adding the temporary tag "inhaling" -->
      <StatusEffect type="OnUse" target="This,Character" tags="lit,inhaling" condition="-1.5" interval="0.1" duration="0.2">
        <Conditional HasTag="lit" />
      </StatusEffect>
      <!-- remove the ability to breath oxygen, apply the custom "smokingcigarette" affliction and play a sizzling sound while inhaling the smoke (using the item while it has the tag "lit") -->
      <StatusEffect type="OnUse" target="This,Character" availableoxygen="0" setvalue="true" interval="0.1" duration="0.2" multiplyafflictionsbymaxvitality="true">
        <Conditional HasTag="lit" />
        <Affliction identifier="smoking" amount="0.01" />
        <!-- affliction tracks time spent inhaling and creates different amount of smoke with exhaling sound depending on the duration you were inhaling (using the item while it has the tag "lit") -->
        <Affliction identifier="oxygenlow" amount="0.15" />
        <Sound file="%ModDir%/Workshop/Immersive Ignitables Expansion Pack/SmokingCigaretteLoop.ogg" range="200" volume="1.0" loop="true" />
      </StatusEffect>
      <!-- apply and reduce various afflictions when smoking (using the item while it has the tag "lit") | separate effect to allow better control over the applied amounts (configured value per second) -->
      <StatusEffect type="OnUse" target="This,Character" multiplyafflictionsbymaxvitality="true">
        <Conditional HasTag="lit" />
        <Affliction identifier="he-tobaccoaddiction" amount="0.1" />
        <Affliction identifier="ii_recenttobaccointake" amount="50" />
        <ReduceAffliction type="tobaccocraving" amount="2.0" />
        <Affliction identifier="psychosisresistance" amount="8" />
        <ReduceAffliction identifier="psychosis" amount="1.2" />
        <ReduceAffliction identifier="hallucinating" amount="2" />
        <ReduceAffliction identifier="watchersgaze" amount="1" />
        <Affliction identifier="strengthen" amount="8" />
        <Affliction identifier="haste" amount="8" />
        <Affliction identifier="chemaddiction" amount="0.2" />
        <ReduceAffliction identifier="chemwithdrawal" amount="3" />
      </StatusEffect>
      <!-- change hand position when holding the item while not using it (no temporary "inhaling" tag) -->
      <StatusEffect type="OnActive" target="This" handle1="-30,-35" setvalue="true">
        <Conditional HasStatusTag="neq inhaling" />
      </StatusEffect>
      <!-- start a fire when it burns out (breaks) inside a trash can -->
      <StatusEffect type="OnBroken" target="This">
        <Conditional HasTag="outposttrashcan" targetcontainer="true" />
        <Fire size="1" />
      </StatusEffect>
      <!-- remove the item when it is broken -->
      <StatusEffect type="OnBroken" target="This">
        <Remove />
      </StatusEffect>
    </Holdable>
  </Item>
  <Item name="Box of Occult Incense" identifier="packofcultistcigarettes" category="Equipment" health="100" maxstacksize="1" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="1" Tags="smallitem,cigbox" description="A small box of incense that keeps husk away when lit and held to the mouth." cargocontaineridentifier="metalcrate" scale="0.36" impactsoundtag="impact_soft" canflipx="false">
    <PreferredContainer primary="wreckcrewcab,abandonedcrewcab,outpostcrewcab,beaconengcab" amount="1" spawnprobability="0.05" />
    <PreferredContainer primary="wreckstoragecab,abandonedstoragecab" amount="1" spawnprobability="0.02" />
    <PreferredContainer primary="crewcab" />
    <Price baseprice="150" canbespecial="false" sold="false">
      <Price storeidentifier="merchanthusk" minavailable="1" maxavailable="4" sold="true">
        <Reputation faction="huskcult" min="20" />
      </Price>
    </Price>
    <Deconstruct time="7" />
    <InventoryIcon texture="HuskCult.png" sourcerect="110,0,38,52" origin="0.5,0.5" />
    <Sprite texture="HuskCult.png" sourcerect="110,0,38,52" depth="0.55" origin="0.5,0.5" />
    <Body width="34" height="48" density="10.7" />
    <Holdable canbecombined="true" slots="Any,LeftHand" handle1="0,-10" handle2="0,-10" holdangle="0" holdpos="36,-20" msg="ItemMsgPickUpSelect">
      <!-- damage the item when it is in a real fire and add the temporary tag "onfire" -->
      <StatusEffect type="OnFire" target="This" Condition="-5.0" tags="onfire" duration="1" stackable="false" />
      <!-- remove the item when it breaks -->
      <StatusEffect type="OnBroken" target="This">
        <Remove />
      </StatusEffect>
    </Holdable>
    <!-- GreaterComponent timeframe used to track if the item is freshly spawned or old so it doesn't spawn more cigarettes -->
    <GreaterComponent canbeselected="false" canbepicked="false" allowingameediting="false" timeframe="0" />
    <!-- ItemContainer for the cigarettes. Can't make use of spawnwithid="cigarette,cigarette,..." because it would respawn them after every single loading screen if the inventory is empty -->
    <ItemContainer capacity="9" maxstacksize="1" slotsperrow="3" allowaccess="true" drawinventory="true" removecontaineditemsondeconstruct="false">
      <Containable items="cigarette,lighter,idcard" />
      <!-- check once per round (oneshot) if the item spawned cigarettes in its inventory already (timeframe="1") or if it did not spawn them yet (timeframe="0") | if timeframe is below 1, spawn 20 cigarettes in this inventory -->
      <StatusEffect type="Always" target="This" timeframe="1" setvalue="true" disabledeltatime="true" oneshot="true">
        <Conditional timeframe="lt 1" />
        <SpawnItem identifier="cultistcigarette" spawnposition="ThisInventory" spawnifinventoryfull="false" count="9" />
      </StatusEffect>
    </ItemContainer>
  </Item>
  <!--
    <ParticleEmitter particle="flare" particlespersecond="15" scalemin="0.1" scalemax="0.1" />
    <ParticleEmitter particle="ritualsmoke" particlespersecond="5" anglemin="0" anglemax="360" velocitymin="10" velocitymax="150" scalemin="0.5" scalemax="1.0" />
    -->
  <Item name="Occult Incense" identifier="cultistcigarette" category="Equipment" maxstacksize="20" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="20" Tags="smallitem,cigarette" description="An easy way to keep husks from biting you even without a robe on. Simply light with a ligher and hold to the mouth. Slowly heals damage while held to the mouth." cargocontaineridentifier="metalcrate" scale="0.2" isshootable="true" RequireAimToUse="true" impactsoundtag="impact_soft">
    <PreferredContainer primary="crewcab" />
    <Deconstruct time="1" />
    <InventoryIcon texture="HuskCult.png" sourcerect="149,0,64,63" origin="0.5,0.5" />
    <!-- intact cigarette sprite at full condition -->
    <Sprite texture="HuskCult.png" sourcerect="0,53,80,10" depth="0.55" />
    <!-- BrokenSprite to change the sprite at different condition stages to simulate the cigarette burning down and getting shorter -->
    <BrokenSprite texture="HuskCult.png" sourcerect="0,63,80,10" depth="0.55" maxcondition="99.9" fadein="false" />
    <BrokenSprite texture="HuskCult.png" sourcerect="0,73,80,10" depth="0.55" maxcondition="80" fadein="false" />
    <BrokenSprite texture="HuskCult.png" sourcerect="0,83,80,10" depth="0.55" maxcondition="70" fadein="false" />
    <BrokenSprite texture="HuskCult.png" sourcerect="0,93,80,10" depth="0.55" maxcondition="60" fadein="false" />
    <BrokenSprite texture="HuskCult.png" sourcerect="0,103,80,10" depth="0.55" maxcondition="50" fadein="false" />
    <BrokenSprite texture="HuskCult.png" sourcerect="0,113,80,10" depth="0.55" maxcondition="40" fadein="false" />
    <BrokenSprite texture="HuskCult.png" sourcerect="0,123,80,10" depth="0.55" maxcondition="30" fadein="false" />
    <BrokenSprite texture="HuskCult.png" sourcerect="0,133,80,10" depth="0.55" maxcondition="20" fadein="false" />
    <BrokenSprite texture="HuskCult.png" sourcerect="0,143,80,10" depth="0.55" maxcondition="10" fadein="false" />
    <Body width="78" height="6" density="9.7" />
    <!-- LightComponent that doesn't produce light and only turns on if the item has the tag "lit" while not being in water -->
    <LightComponent range="0" lightcolor="0,0,0,0" castshadows="false" powerconsumption="0" allowingameediting="false" comparison="And">
      <ActiveConditional HasTag="lit" />
      <ActiveConditional InWater="false" />
      <!-- extinguish the item by turning off the LightComponent and adding the tag "unlit" to override the "lit" tag, if the item was put back into the pocket or cabinet, unless it is a trash can -->
      <StatusEffect type="OnActive" target="This" IsOn="false" tags="unlit" setvalue="true" comparison="And">
        <Conditional PhysicsBodyActive="eq false" />
        <Conditional HasTag="neq outposttrashcan" targetcontainer="true" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is above 50 and procude smoke particles while not inhaling (using) -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="gt 50" />
        <ParticleEmitter particle="ritualsmoke" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="7" distancemax="7" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is between 30 and 50 and procude smoke particles while not inhaling (using) with adjusted particle position to match the different sprite length -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="lte 50" />
        <Conditional condition="gt 30" />
        <ParticleEmitter particle="ritualsmoke" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="5" distancemax="5" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is between 0 and 30 and procude smoke particles while not inhaling (using) with adjusted particle position to match the different sprite length -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="lte 30" />
        <Conditional condition="gt 0" />
        <ParticleEmitter particle="ritualsmoke" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="3" distancemax="3" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
    </LightComponent>
    <Holdable canbepicked="true" canBeCombined="false" removeOnCombined="false" slots="Any,RightHand" handle1="-25,-30" aimpos="22,13" holdangle="0" holdpos="30,-5" aimangle="-5" aimable="false" swingwhenaiming="false" swingamount="6,3" swingspeed="0.2" msg="ItemMsgPickUpSelect">
      <!-- add the tag "ignitable" when the item is being held while it is not yet lit so it can be lit up by a lighter -->
      <StatusEffect type="OnSecondaryUse" target="This" tags="ignitable" targetitemcomponent="LightComponent" setvalue="true" comparison="And" delay="1" checkconditionalalways="true">
        <Conditional HasTag="neq ignitable" />
        <Conditional HasTag="neq lit" />
        <Conditional IsOn="false" />
      </StatusEffect>
      <!-- add the temporary "wet" tag and spawn water drop particles for 10 seconds after the item entered water to block reigniting it again for that duration -->
      <StatusEffect type="InWater" target="This" tags="wet" setvalue="true" duration="10" stackable="false" />
      <!-- add the tag "lit" and change the hand position if the item was in real fire -->
      <StatusEffect type="OnFire" target="This" tags="lit" handle1="0,-35" setvalue="true" interval="1" disabledeltatime="true" />
      <!-- constantly reduce the condition of the item while it is in a real fire -->
      <StatusEffect type="OnFire" target="This" Condition="-10.0" interval="1" disabledeltatime="true" />
      <!-- reduce the condition of the cigarette and prevent it from producing smoke (the StatusEffects in LightComponent) when actively smoking it (using) while it is on (tag "lit") by adding the temporary tag "inhaling" -->
      <StatusEffect type="OnUse" target="This,Character" tags="lit,inhaling" condition="-1" interval="0.1" duration="0.2">
        <Conditional HasTag="lit" />
      </StatusEffect>
      <!-- apply and reduce various afflictions when smoking (using the item while it has the tag "lit") | separate effect to allow better control over the applied amounts (configured value per second) -->
      <StatusEffect type="OnUse" target="This,Character" multiplyafflictionsbymaxvitality="true">
        <Conditional HasTag="lit" />
        <Affliction identifier="disguisedashuskviacigincense" amount="4" />
        <ReduceAffliction type="damage" amount="1.5" />
        <ReduceAffliction identifier="psychosis" amount="1.2" />
        <ReduceAffliction identifier="hallucinating" amount="2" />
        <ReduceAffliction identifier="watchersgaze" amount="1" />
        <ParticleEmitter particle="ritualsmoke" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="3" distancemax="3" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- change hand position when holding the item while not using it (no temporary "inhaling" tag) -->
      <StatusEffect type="OnActive" target="This" handle1="-30,-35" setvalue="true">
        <Conditional HasStatusTag="neq inhaling" />
      </StatusEffect>
      <!-- start a fire when it burns out (breaks) inside a trash can -->
      <StatusEffect type="OnBroken" target="This">
        <Conditional HasTag="outposttrashcan" targetcontainer="true" />
        <Fire size="1" />
      </StatusEffect>
      <!-- remove the item when it is broken -->
      <StatusEffect type="OnBroken" target="This">
        <Remove />
      </StatusEffect>
    </Holdable>
  </Item>
  <Item name="Occult Lighter" identifier="cultistlighter" category="Equipment" maxstacksize="1" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="1" Tags="smallitem,lighter" description="A novelty occult lighter. Emits a nice purple light and is more likely to light up than a normal lighter." cargocontaineridentifier="metalcrate" scale="0.3" impactsoundtag="impact_metal_light" isshootable="true" RequireAimToUse="true" hideconditionbar="true">
    <PreferredContainer primary="wreckcrewcab,abandonedcrewcab,outpostcrewcab,beaconengcab" amount="1" spawnprobability="0.03" />
    <PreferredContainer primary="wreckstoragecab,abandonedstoragecab" amount="1" spawnprobability="0.01" />
    <PreferredContainer primary="crewcab" />
    <Price baseprice="350" canbespecial="false" sold="false">
      <Price storeidentifier="merchanthusk" minavailable="1" maxavailable="2" sold="true">
        <Reputation faction="huskcult" min="25" />
      </Price>
    </Price>
    <Deconstruct time="10">
      <Item identifier="aluminium" />
    </Deconstruct>
    <InventoryIcon texture="HuskCult.png" sourcerect="0,0,44,51" origin="0.5,0.5" />
    <!-- closed sprite -->
    <Sprite texture="HuskCult.png" sourcerect="45,11,29,40" depth="0.55" />
    <!-- open sprite -->
    <BrokenSprite texture="HuskCult.png" sourcerect="0,0,44,51" origin="0.5,0.5" depth="0.55" maxcondition="99" fadein="false" />
    <Body width="27" height="38" density="12.7" />
    <!-- GreaterComponent used to simulate fuel usage | 120s of "fuel" configured -->
    <GreaterComponent canbepicked="false" canbeselected="false" allowingameediting="false" timeframe="0" />
    <!-- LightComponent to shortly light up whenever the lighterspark (effect_lighterfail) item is contained which removes itself after 0.1s -->
    <LightComponent range="50" lightcolor="100,0,150,127" powerconsumption="0" castshadows="false" allowingameediting="false">
      <IsActive HasTag="lighterspark" targetcontaineditem="true" />
      <!-- create spark particles when the light is on -->
      <StatusEffect type="OnActive" target="This">
        <ParticleEmitter particle="lighterspark" colormultiplier="100,0,150,255" particlespersecond="50" copyentityangle="true" anglemin="82" anglemax="98" distancemin="0" distancemax="0" velocitymin="75" velocitymax="75" scalemin="0.5" scalemax="0.5" />
      </StatusEffect>
    </LightComponent>
    <!-- LightComponent that turns on if the lighteron (effect_lightersuccess) item is contained to iluminate the area and consume fuel (increase timeframe) while it is on -->
    <LightComponent range="150" lightcolor="100,0,150,127" Flicker="0.2" powerconsumption="0" castshadows="false" allowingameediting="false">
      <IsActive HasTag="lighteron" targetcontaineditem="true" />
      <!-- deplete fuel (increase timeframe) when the lighter is on -->
      <StatusEffect type="OnActive" target="This" timeframe="1">
        <ParticleEmitter particle="ritualsmoke" particlespersecond="5" copyentityangle="true" anglemin="98" anglemax="98" distancemin="7" distancemax="7" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
        <ParticleEmitter particle="lighterflame" colormultiplier="100,0,150,255" particlespersecond="5" copyentityangle="true" anglemin="98" anglemax="98" distancemin="7" distancemax="7" velocitymin="0" velocitymax="0" scalemin="0.05" scalemax="0.05" />
      </StatusEffect>
    </LightComponent>
    <Holdable canbepicked="true" canBeCombined="false" removeOnCombined="false" slots="Any,LeftHand" aimpos="33,9" handle2="-15,-25" holdangle="0" holdpos="36,-20" aimangle="0" aimable="false" swingwhenaiming="true" swingamount="6,3" swingspeed="0.2" msg="ItemMsgPickUpSelect">
      <!-- If the timeframe value is greater than "0", apply the temporary tag "lighter_allowrefill" to both the item and the character aiming it -->
      <StatusEffect type="OnSecondaryUse" target="This,Character" tags="lighter_allowrefill" interval="0.1" duration="0.2">
        <Conditional timeframe="gt 0" />
      </StatusEffect>
      <!-- While aiming the item, decrease the timeframe value to "refill" the lighter, but only while the timeframe is greater than "0" and while the character has the temporary tag "lighter_refill" which is applied by aiming with the "Lighter Fuel" item -->
      <StatusEffect type="OnSecondaryUse" target="This" timeframe="-10" comparison="And">
        <Conditional HasStatusTag="lighter_refill" targetcontainer="true" />
        <Conditional timeframe="gt 0" />
      </StatusEffect>
      <!-- 3a. spawn random effect item inside the lighter to either turn it on or fail the attempt. Get's blocked by the "using" tag which is applied while the use key is kept being held so you have to release it to try again -->
      <StatusEffect type="OnUse" target="This" SpawnItemRandomly="True" interval="0.1" comparison="And">
        <Conditional InWater="false" />
        <Conditional HasStatusTag="neq using" />
        <Conditional timeframe="lte 120" />
        <SpawnItem identifier="effect_lighterfail" spawnposition="ThisInventory" spawnifinventoryfull="false" spawnifcantbecontained="false" />
        <SpawnItem identifier="effect_lightersuccess" spawnposition="ThisInventory" spawnifinventoryfull="false" spawnifcantbecontained="false" />
      </StatusEffect>
      <!-- 3b. always spawn the failed attempt item when the lighter is being used while the timeframe is above 120 (timeframe is used to simulate fuel) -->
      <StatusEffect type="OnUse" target="This" interval="0.1" comparison="And">
        <Conditional InWater="false" />
        <Conditional HasStatusTag="neq using" />
        <Conditional timeframe="gt 120" />
        <SpawnItem identifier="effect_lighterfail" spawnposition="ThisInventory" spawnifinventoryfull="false" spawnifcantbecontained="false" />
      </StatusEffect>
      <!-- 2. apply the temporary "using" tag if the item is being used while aiming (also reapply the temporary "aiming" tag to make sure it doesn't get overridden) -->
      <StatusEffect type="OnUse" target="This" tags="using,aiming" interval="0.1" duration="0.2">
        <Conditional HasStatusTag="aiming" />
      </StatusEffect>
      <!-- 1. apply the temporary "aiming" tag if the item is being aimed -->
      <StatusEffect type="OnSecondaryUse" target="This" tags="aiming" interval="0.1" duration="0.2" />
      <!-- set the condition to 99 to render the open sprite when the item is being aimed -->
      <StatusEffect type="OnSecondaryUse" target="This" condition="99" setvalue="true">
        <Conditional condition="100" />
        <Sound file="%ModDir%/Workshop/Immersive Ignitables Expansion Pack/LighterOpen.ogg" range="200" volume="1.0" loop="false" />
      </StatusEffect>
      <!-- repair the item if it's not being aimed to render the closed sprite again -->
      <StatusEffect type="OnContained" target="This" condition="100" setvalue="true" interval="0.1" comparison="And">
        <Conditional HasStatusTag="neq aiming" />
        <Conditional condition="99" />
        <Sound file="%ModDir%/Workshop/Immersive Ignitables Expansion Pack/LighterClose.ogg" range="200" volume="1.0" loop="false" />
      </StatusEffect>
    </Holdable>
    <ItemContainer capacity="1" maxstacksize="1" allowaccess="false" allowdraganddrop="false" drawinventory="false" removecontaineditemsondeconstruct="true" containedstateindicatorslot="0">
      <Containable items="effect" />
    </ItemContainer>
  </Item>
  <Item name="Pack of Bingus Smokes" identifier="packofbingussticks" category="Equipment" health="100" maxstacksize="1" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="1" Tags="smallitem,cigbox" description="The one and only Bingus branded deathsticks. Holds up to 20 cigarettes. A small label on it reads ''Also try; Bingus the Mod!'' with an extremely long sequence of numbers and words following it that must be some kind of archaic... holy text, perhaps? It reads, in full, ''steamcommunity.com/sharedfiles/filedetails/?id=2987534205''. How odd." cargocontaineridentifier="metalcrate" scale="0.36" impactsoundtag="impact_soft" canflipx="false">
    <PreferredContainer primary="researchcontainer" amount="1" spawnprobability="0.20" />
    <PreferredContainer primary="outposttrashcan" amount="1" spawnprobability="0.01" />
    <Price baseprice="500" displaynonempty="true" sold="false">
      <Price storeidentifier="merchantoutpost" maxavailable="0" />
      <Price storeidentifier="merchantcity" maxavailable="0" />
      <Price storeidentifier="merchantresearch" multiplier="2.00" maxavailable="2" />
      <Price storeidentifier="merchantmilitary" multiplier="0.25" maxavailable="0" />
      <Price storeidentifier="merchantmine" multiplier="0.25" maxavailable="0" />
      <Price storeidentifier="merchantengineering" multiplier="0.25" maxavailable="0" />
    </Price>
    <Deconstruct time="7" />
    <InventoryIcon texture="binguscigs.png" sourcerect="110,0,38,52" origin="0.5,0.5" />
    <Sprite texture="binguscigs.png" sourcerect="110,0,38,52" depth="0.55" origin="0.5,0.5" />
    <Body width="34" height="48" density="10.7" />
    <Holdable canbecombined="true" slots="Any,LeftHand" handle1="0,-10" handle2="0,-10" holdangle="0" holdpos="36,-20" msg="ItemMsgPickUpSelect">
      <!-- damage the item when it is in a real fire and add the temporary tag "onfire" -->
      <StatusEffect type="OnFire" target="This" Condition="-5.0" tags="onfire" duration="1" stackable="false" />
      <!-- remove the item when it breaks -->
      <StatusEffect type="OnBroken" target="This">
        <Remove />
      </StatusEffect>
    </Holdable>
    <!-- GreaterComponent timeframe used to track if the item is freshly spawned or old so it doesn't spawn more cigarettes -->
    <GreaterComponent canbeselected="false" canbepicked="false" allowingameediting="false" timeframe="0" />
    <!-- ItemContainer for the cigarettes. Can't make use of spawnwithid="cigarette,cigarette,..." because it would respawn them after every single loading screen if the inventory is empty -->
    <ItemContainer capacity="20" maxstacksize="1" slotsperrow="5" allowaccess="true" drawinventory="true" removecontaineditemsondeconstruct="false">
      <Containable items="cigarette,lighter,idcard" />
      <!-- check once per round (oneshot) if the item spawned cigarettes in its inventory already (timeframe="1") or if it did not spawn them yet (timeframe="0") | if timeframe is below 1, spawn 20 cigarettes in this inventory -->
      <StatusEffect type="Always" target="This" timeframe="1" setvalue="true" disabledeltatime="true" oneshot="true">
        <Conditional timeframe="lt 1" />
        <SpawnItem identifier="bingusdeathstick" spawnposition="ThisInventory" spawnifinventoryfull="false" count="20" />
      </StatusEffect>
    </ItemContainer>
  </Item>
  <Item name="Bingus Deathstick" identifier="bingusdeathstick" category="Equipment" maxstacksize="20" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="20" Tags="smallitem,cigarette" description="The one and only Bingus branded deathstick. Extreme mental hazard. Heals when aggressively smoked and one of the most destressing experiences you'll ever have." cargocontaineridentifier="metalcrate" scale="0.2" isshootable="true" RequireAimToUse="true" impactsoundtag="impact_soft">
    <PreferredContainer primary="crewcab" />
    <Deconstruct time="1" />
    <InventoryIcon texture="binguscigs.png" sourcerect="149,0,64,63" origin="0.5,0.5" />
    <!-- intact cigarette sprite at full condition -->
    <Sprite texture="binguscigs.png" sourcerect="0,53,80,10" depth="0.55" />
    <!-- BrokenSprite to change the sprite at different condition stages to simulate the cigarette burning down and getting shorter -->
    <BrokenSprite texture="binguscigs.png" sourcerect="0,63,80,10" depth="0.55" maxcondition="99.9" fadein="false" />
    <BrokenSprite texture="binguscigs.png" sourcerect="0,73,80,10" depth="0.55" maxcondition="80" fadein="false" />
    <BrokenSprite texture="binguscigs.png" sourcerect="0,83,80,10" depth="0.55" maxcondition="70" fadein="false" />
    <BrokenSprite texture="binguscigs.png" sourcerect="0,93,80,10" depth="0.55" maxcondition="60" fadein="false" />
    <BrokenSprite texture="binguscigs.png" sourcerect="0,103,80,10" depth="0.55" maxcondition="50" fadein="false" />
    <BrokenSprite texture="binguscigs.png" sourcerect="0,113,80,10" depth="0.55" maxcondition="40" fadein="false" />
    <BrokenSprite texture="binguscigs.png" sourcerect="0,123,80,10" depth="0.55" maxcondition="30" fadein="false" />
    <BrokenSprite texture="binguscigs.png" sourcerect="0,133,80,10" depth="0.55" maxcondition="20" fadein="false" />
    <BrokenSprite texture="binguscigs.png" sourcerect="0,143,80,10" depth="0.55" maxcondition="10" fadein="false" />
    <Body width="78" height="6" density="9.7" />
    <!-- LightComponent that doesn't produce light and only turns on if the item has the tag "lit" while not being in water -->
    <LightComponent range="0" lightcolor="0,0,0,0" castshadows="false" powerconsumption="0" allowingameediting="false" comparison="And">
      <ActiveConditional HasTag="lit" />
      <ActiveConditional InWater="false" />
      <!-- extinguish the item by turning off the LightComponent and adding the tag "unlit" to override the "lit" tag, if the item was put back into the pocket or cabinet, unless it is a trash can -->
      <StatusEffect type="OnActive" target="This" IsOn="false" tags="unlit" setvalue="true" comparison="And">
        <Conditional PhysicsBodyActive="eq false" />
        <Conditional HasTag="neq outposttrashcan" targetcontainer="true" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is above 50 and procude smoke particles while not inhaling (using) -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="gt 50" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="7" distancemax="7" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is between 30 and 50 and procude smoke particles while not inhaling (using) with adjusted particle position to match the different sprite length -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="lte 50" />
        <Conditional condition="gt 30" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="5" distancemax="5" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is between 0 and 30 and procude smoke particles while not inhaling (using) with adjusted particle position to match the different sprite length -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="lte 30" />
        <Conditional condition="gt 0" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="3" distancemax="3" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
    </LightComponent>
    <Holdable canbepicked="true" canBeCombined="false" removeOnCombined="false" slots="Any,RightHand" handle1="-25,-30" aimpos="22,13" holdangle="0" holdpos="30,-5" aimangle="-5" aimable="false" swingwhenaiming="false" swingamount="6,3" swingspeed="0.2" msg="ItemMsgPickUpSelect">
      <!-- add the tag "ignitable" when the item is being held while it is not yet lit so it can be lit up by a lighter -->
      <StatusEffect type="OnSecondaryUse" target="This" tags="ignitable" targetitemcomponent="LightComponent" setvalue="true" comparison="And" delay="1" checkconditionalalways="true">
        <Conditional HasTag="neq ignitable" />
        <Conditional HasTag="neq lit" />
        <Conditional IsOn="false" />
      </StatusEffect>
      <!-- add the temporary "wet" tag and spawn water drop particles for 10 seconds after the item entered water to block reigniting it again for that duration -->
      <StatusEffect type="InWater" target="This" tags="wet" setvalue="true" duration="10" stackable="false" />
      <!-- add the tag "lit" and change the hand position if the item was in real fire -->
      <StatusEffect type="OnFire" target="This" tags="lit" handle1="0,-35" setvalue="true" interval="1" disabledeltatime="true" />
      <!-- constantly reduce the condition of the item while it is in a real fire -->
      <StatusEffect type="OnFire" target="This" Condition="-10.0" interval="1" disabledeltatime="true" />
      <!-- reduce the condition of the cigarette and prevent it from producing smoke (the StatusEffects in LightComponent) when actively smoking it (using) while it is on (tag "lit") by adding the temporary tag "inhaling" -->
      <StatusEffect type="OnUse" target="This,Character" tags="lit,inhaling" condition="-1" interval="0.1" duration="0.2">
        <Conditional HasTag="lit" />
      </StatusEffect>
      <!-- remove the ability to breath oxygen, apply the custom "smokingcigarette" affliction and play a sizzling sound while inhaling the smoke (using the item while it has the tag "lit") -->
      <StatusEffect type="OnUse" target="This,Character" availableoxygen="0" setvalue="true" interval="0.1" duration="0.2" multiplyafflictionsbymaxvitality="true">
        <Conditional HasTag="lit" />
        <Affliction identifier="smokingnicotineless" amount="0.01" />
        <!-- affliction tracks time spent inhaling and creates different amount of smoke with exhaling sound depending on the duration you were inhaling (using the item while it has the tag "lit") -->
        <Affliction identifier="oxygenlow" amount="0.20" />
        <Sound file="%ModDir%/Workshop/Immersive Ignitables Expansion Pack/SmokingCigaretteLoop.ogg" range="200" volume="1.0" loop="true" />
      </StatusEffect>
      <!-- apply and reduce various afflictions when smoking (using the item while it has the tag "lit") | separate effect to allow better control over the applied amounts (configured value per second) -->
      <StatusEffect type="OnUse" target="This,Character" multiplyafflictionsbymaxvitality="true">
        <Conditional HasTag="lit" />
        <Affliction identifier="deliriuminepoisoning" amount="0.2" />
        <ReduceAffliction type="damage" amount="4" />
        <ReduceAffliction type="mood" amount="10" />
      </StatusEffect>
      <!-- change hand position when holding the item while not using it (no temporary "inhaling" tag) -->
      <StatusEffect type="OnActive" target="This" handle1="-30,-35" setvalue="true">
        <Conditional HasStatusTag="neq inhaling" />
      </StatusEffect>
      <!-- start a fire when it burns out (breaks) inside a trash can -->
      <StatusEffect type="OnBroken" target="This">
        <Conditional HasTag="outposttrashcan" targetcontainer="true" />
        <Fire size="1" />
      </StatusEffect>
      <!-- remove the item when it is broken -->
      <StatusEffect type="OnBroken" target="This">
        <Remove />
      </StatusEffect>
    </Holdable>
  </Item>
  <Item name="Pack of Rabid Sanction Brigades" identifier="packofpiratecigarettes" category="Equipment" health="100" maxstacksize="1" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="1" Tags="smallitem,cigbox" description="For when you're placeing an embargo on the enemy or just stealing a station, the Sanction Brigade is fighting with you! Holds up to 20 cigarettes. Appears to be made out of an empty rum bottle. A large print across it reads ''The Pirate's Choice''." cargocontaineridentifier="metalcrate" scale="0.36" impactsoundtag="impact_soft" canflipx="false">
    <PreferredContainer primary="abandonedstoragecab,abandonedcrewcab,abandonedengcab,abandonedreactorcab" amount="1" spawnprobability="0.01" />
    <PreferredContainer primary="piratestoragecab,piratecrewcab,pirateengcab,piratereactorcab" amount="1" spawnprobability="0.02" />
    <PreferredContainer primary="crewcab" />
    <Price baseprice="50" displaynonempty="true" sold="false">
      <Price storeidentifier="merchantoutpost" />
      <Price storeidentifier="merchantcity" />
      <Price storeidentifier="merchantresearch" multiplier="1.25" />
      <Price storeidentifier="merchantmilitary" multiplier="1.25" />
      <Price storeidentifier="merchantmine" multiplier="0.9" />
      <Price storeidentifier="merchantengineering" multiplier="0.9" />
    </Price>
    <Deconstruct time="7" />
    <InventoryIcon texture="superweaponsNeutronsAndDeath.png" sourcerect="110,0,38,52" origin="0.5,0.5" />
    <Sprite texture="superweaponsNeutronsAndDeath.png" sourcerect="110,0,38,52" depth="0.55" origin="0.5,0.5" />
    <Body width="34" height="48" density="10.7" />
    <Holdable canbecombined="true" slots="Any,LeftHand" handle1="0,-10" handle2="0,-10" holdangle="0" holdpos="36,-20" msg="ItemMsgPickUpSelect">
      <!-- damage the item when it is in a real fire and add the temporary tag "onfire" -->
      <StatusEffect type="OnFire" target="This" Condition="-5.0" tags="onfire" duration="1" stackable="false" />
      <!-- remove the item when it breaks -->
      <StatusEffect type="OnBroken" target="This">
        <Remove />
      </StatusEffect>
    </Holdable>
    <!-- GreaterComponent timeframe used to track if the item is freshly spawned or old so it doesn't spawn more cigarettes -->
    <GreaterComponent canbeselected="false" canbepicked="false" allowingameediting="false" timeframe="0" />
    <!-- ItemContainer for the cigarettes. Can't make use of spawnwithid="cigarette,cigarette,..." because it would respawn them after every single loading screen if the inventory is empty -->
    <ItemContainer capacity="20" maxstacksize="1" slotsperrow="5" allowaccess="true" drawinventory="true" removecontaineditemsondeconstruct="false">
      <Containable items="cigarette,lighter,idcard" />
      <!-- check once per round (oneshot) if the item spawned cigarettes in its inventory already (timeframe="1") or if it did not spawn them yet (timeframe="0") | if timeframe is below 1, spawn 20 cigarettes in this inventory -->
      <StatusEffect type="Always" target="This" timeframe="1" setvalue="true" disabledeltatime="true" oneshot="true">
        <Conditional timeframe="lt 1" />
        <SpawnItem identifier="piratecigarette" spawnposition="ThisInventory" spawnifinventoryfull="false" count="20" />
      </StatusEffect>
    </ItemContainer>
  </Item>
  <Item name="Sanction Brigade" identifier="piratecigarette" category="Equipment" maxstacksize="20" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="20" Tags="smallitem,cigarette" description="An bandits's life is desensitising, but dazing your senses can make you forget the slaughter... Has tiny separatist body armour replicas on its filter, for some reason." cargocontaineridentifier="metalcrate" scale="0.2" isshootable="true" RequireAimToUse="true" impactsoundtag="impact_soft">
    <PreferredContainer primary="crewcab" />
    <Deconstruct time="1" />
    <InventoryIcon texture="superweaponsNeutronsAndDeath.png" sourcerect="149,0,64,63" origin="0.5,0.5" />
    <!-- intact cigarette sprite at full condition -->
    <Sprite texture="superweaponsNeutronsAndDeath.png" sourcerect="0,53,80,12" depth="0.55" />
    <!-- BrokenSprite to change the sprite at different condition stages to simulate the cigarette burning down and getting shorter -->
    <BrokenSprite texture="superweaponsNeutronsAndDeath.png" sourcerect="0,63,80,12" depth="0.55" maxcondition="99.9" fadein="false" />
    <BrokenSprite texture="superweaponsNeutronsAndDeath.png" sourcerect="0,75,80,12" depth="0.55" maxcondition="80" fadein="false" />
    <BrokenSprite texture="superweaponsNeutronsAndDeath.png" sourcerect="0,87,80,12" depth="0.55" maxcondition="70" fadein="false" />
    <BrokenSprite texture="superweaponsNeutronsAndDeath.png" sourcerect="0,99,80,12" depth="0.55" maxcondition="60" fadein="false" />
    <BrokenSprite texture="superweaponsNeutronsAndDeath.png" sourcerect="0,111,80,12" depth="0.55" maxcondition="50" fadein="false" />
    <BrokenSprite texture="superweaponsNeutronsAndDeath.png" sourcerect="0,123,80,12" depth="0.55" maxcondition="40" fadein="false" />
    <BrokenSprite texture="superweaponsNeutronsAndDeath.png" sourcerect="0,135,80,12" depth="0.55" maxcondition="30" fadein="false" />
    <BrokenSprite texture="superweaponsNeutronsAndDeath.png" sourcerect="0,133,80,12" depth="0.55" maxcondition="20" fadein="false" />
    <BrokenSprite texture="superweaponsNeutronsAndDeath.png" sourcerect="0,147,80,12" depth="0.55" maxcondition="10" fadein="false" />
    <Body width="78" height="6" density="9.7" />
    <!-- LightComponent that doesn't produce light and only turns on if the item has the tag "lit" while not being in water -->
    <LightComponent range="0" lightcolor="0,0,0,0" castshadows="false" powerconsumption="0" allowingameediting="false" comparison="And">
      <ActiveConditional HasTag="lit" />
      <ActiveConditional InWater="false" />
      <!-- extinguish the item by turning off the LightComponent and adding the tag "unlit" to override the "lit" tag, if the item was put back into the pocket or cabinet, unless it is a trash can -->
      <StatusEffect type="OnActive" target="This" IsOn="false" tags="unlit" setvalue="true" comparison="And">
        <Conditional PhysicsBodyActive="eq false" />
        <Conditional HasTag="neq outposttrashcan" targetcontainer="true" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is above 50 and procude smoke particles while not inhaling (using) -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="gt 50" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="7" distancemax="7" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is between 30 and 50 and procude smoke particles while not inhaling (using) with adjusted particle position to match the different sprite length -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="lte 50" />
        <Conditional condition="gt 30" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="5" distancemax="5" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is between 0 and 30 and procude smoke particles while not inhaling (using) with adjusted particle position to match the different sprite length -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="lte 30" />
        <Conditional condition="gt 0" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="3" distancemax="3" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
    </LightComponent>
    <Holdable canbepicked="true" canBeCombined="false" removeOnCombined="false" slots="Any,RightHand" handle1="-25,-30" aimpos="22,13" holdangle="0" holdpos="30,-5" aimangle="-5" aimable="false" swingwhenaiming="false" swingamount="6,3" swingspeed="0.2" msg="ItemMsgPickUpSelect">
      <!-- add the tag "ignitable" when the item is being held while it is not yet lit so it can be lit up by a lighter -->
      <StatusEffect type="OnSecondaryUse" target="This" tags="ignitable" targetitemcomponent="LightComponent" setvalue="true" comparison="And" delay="1" checkconditionalalways="true">
        <Conditional HasTag="neq ignitable" />
        <Conditional HasTag="neq lit" />
        <Conditional IsOn="false" />
      </StatusEffect>
      <!-- add the temporary "wet" tag and spawn water drop particles for 10 seconds after the item entered water to block reigniting it again for that duration -->
      <StatusEffect type="InWater" target="This" tags="wet" setvalue="true" duration="10" stackable="false" />
      <!-- add the tag "lit" and change the hand position if the item was in real fire -->
      <StatusEffect type="OnFire" target="This" tags="lit" handle1="0,-35" setvalue="true" interval="1" disabledeltatime="true" />
      <!-- constantly reduce the condition of the item while it is in a real fire -->
      <StatusEffect type="OnFire" target="This" Condition="-10.0" interval="1" disabledeltatime="true" />
      <!-- reduce the condition of the cigarette and prevent it from producing smoke (the StatusEffects in LightComponent) when actively smoking it (using) while it is on (tag "lit") by adding the temporary tag "inhaling" -->
      <StatusEffect type="OnUse" target="This,Character" tags="lit,inhaling" condition="-1" interval="0.1" duration="0.2">
        <Conditional HasTag="lit" />
      </StatusEffect>
      <!-- remove the ability to breath oxygen, apply the custom "smokingcigarette" affliction and play a sizzling sound while inhaling the smoke (using the item while it has the tag "lit") -->
      <StatusEffect type="OnUse" target="This,Character" availableoxygen="0" setvalue="true" interval="0.1" duration="0.2" multiplyafflictionsbymaxvitality="true">
        <Conditional HasTag="lit" />
        <Affliction identifier="smokingnicotineless" amount="0.01" />
        <!-- affliction tracks time spent inhaling and creates different amount of smoke with exhaling sound depending on the duration you were inhaling (using the item while it has the tag "lit") -->
        <Affliction identifier="oxygenlow" amount="0.15" />
        <Sound file="%ModDir%/Workshop/Immersive Ignitables Expansion Pack/SmokingCigaretteLoop.ogg" range="200" volume="1.0" loop="true" />
      </StatusEffect>
      <!-- apply and reduce various afflictions when smoking (using the item while it has the tag "lit") | separate effect to allow better control over the applied amounts (configured value per second) -->
      <StatusEffect type="OnUse" target="This,Character" multiplyafflictionsbymaxvitality="true">
        <Conditional HasTag="lit" />
        <Affliction identifier="drunk" amount="2.5" />
        <Affliction identifier="psychosisresistance" amount="20" />
        <ReduceAffliction identifier="psychosis" amount="5" />
        <ReduceAffliction identifier="hallucinating" amount="10" />
        <ReduceAffliction identifier="watchersgaze" amount="100" />
      </StatusEffect>
      <!-- change hand position when holding the item while not using it (no temporary "inhaling" tag) -->
      <StatusEffect type="OnActive" target="This" handle1="-30,-35" setvalue="true">
        <Conditional HasStatusTag="neq inhaling" />
      </StatusEffect>
      <!-- start a fire when it burns out (breaks) inside a trash can -->
      <StatusEffect type="OnBroken" target="This">
        <Conditional HasTag="outposttrashcan" targetcontainer="true" />
        <Fire size="1" />
      </StatusEffect>
      <!-- remove the item when it is broken -->
      <StatusEffect type="OnBroken" target="This">
        <Remove />
      </StatusEffect>
    </Holdable>
  </Item>
  <Item name="setteragiC fo kcaP" identifier="packofsetteragic" category="Equipment" health="100" maxstacksize="1" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="1" Tags="smallitem" description=".setteragic 02 ot pu sdlohs" cargocontaineridentifier="metalcrate" scale="0.36" impactsoundtag="impact_soft" canflipx="false">
    <PreferredContainer primary="wreckstoragecab,wreckcrewcab" amount="1" spawnprobability="0.005" />
    <PreferredContainer primary="crewcab" />
    <Price baseprice="1500" displaynonempty="true" sold="false">
      <Price storeidentifier="merchantoutpost" />
      <Price storeidentifier="merchantcity" />
      <Price storeidentifier="merchantresearch" multiplier="1.25" />
      <Price storeidentifier="merchantmilitary" multiplier="1.25" />
      <Price storeidentifier="merchantmine" multiplier="0.9" />
      <Price storeidentifier="merchantengineering" multiplier="0.9" />
    </Price>
    <Deconstruct time="7" />
    <InventoryIcon texture="Inverted.png" sourcerect="110,0,38,52" origin="0.5,0.5" />
    <Sprite texture="Inverted.png" sourcerect="110,0,38,52" depth="0.55" origin="0.5,0.5" />
    <Body width="34" height="48" density="10.7" />
    <Holdable canbecombined="true" slots="Any,LeftHand" handle1="0,-10" handle2="0,-10" holdangle="0" holdpos="36,-20" msg="ItemMsgPickUpSelect">
      <!-- damage the item when it is in a real fire and add the temporary tag "onfire" -->
      <StatusEffect type="OnFire" target="This" Condition="-5.0" tags="onfire" duration="1" stackable="false" />
      <!-- remove the item when it breaks -->
      <StatusEffect type="OnBroken" target="This">
        <Remove />
      </StatusEffect>
    </Holdable>
    <!-- GreaterComponent timeframe used to track if the item is freshly spawned or old so it doesn't spawn more cigarettes -->
    <GreaterComponent canbeselected="false" canbepicked="false" allowingameediting="false" timeframe="0" />
    <!-- ItemContainer for the cigarettes. Can't make use of spawnwithid="cigarette,cigarette,..." because it would respawn them after every single loading screen if the inventory is empty -->
    <ItemContainer capacity="19" maxstacksize="1" slotsperrow="5" allowaccess="true" drawinventory="true" removecontaineditemsondeconstruct="false">
      <!-- icon for the lighter slot -->
      <SlotIcon slotindex="19" texture="Inverted.png" sourcerect="0,0,44,51" origin="0.5,0.5" />
      <Containable items="cigarette" />
      <!-- make the last slot able to also contain a lighter-->
      <SubContainer capacity="1">
        <Containable items="cigarette,lighter,idcard" />
      </SubContainer>
      <!-- check once per round (oneshot) if the item spawned cigarettes in its inventory already (timeframe="1") or if it did not spawn them yet (timeframe="0") | if timeframe is below 1, spawn 20 cigarettes in this inventory -->
      <StatusEffect type="Always" target="This" timeframe="1" setvalue="true" disabledeltatime="true" oneshot="true">
        <Conditional timeframe="lt 1" />
        <SpawnItem identifier="etteragic" spawnposition="ThisInventory" spawnifinventoryfull="false" count="20" />
      </StatusEffect>
    </ItemContainer>
  </Item>
  <Item name="etteragiC" identifier="etteragic" category="Equipment" maxstacksize="20" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="20" Tags="smallitem,cigarette" description=".erif nepo na ro rethgil a htiw ti etingI .tib a sevren ruoy ehtoos uoy pleh nac etteragic doog a tub ,gnixat yllatnem si efil s'renirambus A" cargocontaineridentifier="metalcrate" scale="0.2" isshootable="true" RequireAimToUse="true" impactsoundtag="impact_soft">
    <PreferredContainer primary="crewcab" />
    <Deconstruct time="1" />
    <InventoryIcon texture="Inverted.png" sourcerect="149,0,64,63" origin="0.5,0.5" />
    <!-- intact cigarette sprite at full condition -->
    <Sprite texture="Inverted.png" sourcerect="0,53,80,10" depth="0.55" />
    <!-- BrokenSprite to change the sprite at different condition stages to simulate the cigarette burning down and getting shorter -->
    <BrokenSprite texture="Inverted.png" sourcerect="0,63,80,10" depth="0.55" maxcondition="99.9" fadein="false" />
    <BrokenSprite texture="Inverted.png" sourcerect="0,73,80,10" depth="0.55" maxcondition="80" fadein="false" />
    <BrokenSprite texture="Inverted.png" sourcerect="0,83,80,10" depth="0.55" maxcondition="70" fadein="false" />
    <BrokenSprite texture="Inverted.png" sourcerect="0,93,80,10" depth="0.55" maxcondition="60" fadein="false" />
    <BrokenSprite texture="Inverted.png" sourcerect="0,103,80,10" depth="0.55" maxcondition="50" fadein="false" />
    <BrokenSprite texture="Inverted.png" sourcerect="0,113,80,10" depth="0.55" maxcondition="40" fadein="false" />
    <BrokenSprite texture="Inverted.png" sourcerect="0,123,80,10" depth="0.55" maxcondition="30" fadein="false" />
    <BrokenSprite texture="Inverted.png" sourcerect="0,133,80,10" depth="0.55" maxcondition="20" fadein="false" />
    <BrokenSprite texture="Inverted.png" sourcerect="0,143,80,10" depth="0.55" maxcondition="10" fadein="false" />
    <Body width="78" height="6" density="9.7" />
    <!-- LightComponent that doesn't produce light and only turns on if the item has the tag "lit" while not being in water -->
    <LightComponent range="0" lightcolor="0,0,0,0" castshadows="false" powerconsumption="0" allowingameediting="false" comparison="And">
      <ActiveConditional HasTag="lit" />
      <ActiveConditional InWater="false" />
      <!-- extinguish the item by turning off the LightComponent and adding the tag "unlit" to override the "lit" tag, if the item was put back into the pocket or cabinet, unless it is a trash can -->
      <StatusEffect type="OnActive" target="This" IsOn="false" tags="unlit" setvalue="true" comparison="And">
        <Conditional PhysicsBodyActive="eq false" />
        <Conditional HasTag="neq outposttrashcan" targetcontainer="true" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is above 50 and procude smoke particles while not inhaling (using) -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="gt 50" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="7" distancemax="7" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is between 30 and 50 and procude smoke particles while not inhaling (using) with adjusted particle position to match the different sprite length -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="lte 50" />
        <Conditional condition="gt 30" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="5" distancemax="5" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is between 0 and 30 and procude smoke particles while not inhaling (using) with adjusted particle position to match the different sprite length -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="lte 30" />
        <Conditional condition="gt 0" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="3" distancemax="3" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
    </LightComponent>
    <Holdable canbepicked="true" canBeCombined="false" removeOnCombined="false" slots="Any,RightHand" handle1="-25,-30" aimpos="22,13" holdangle="0" holdpos="30,-5" aimangle="-5" aimable="false" swingwhenaiming="false" swingamount="6,3" swingspeed="0.2" msg="ItemMsgPickUpSelect">
      <!-- add the tag "ignitable" when the item is being held while it is not yet lit so it can be lit up by a lighter -->
      <StatusEffect type="OnSecondaryUse" target="This" tags="ignitable" targetitemcomponent="LightComponent" setvalue="true" comparison="And" delay="1" checkconditionalalways="true">
        <Conditional HasTag="neq ignitable" />
        <Conditional HasTag="neq lit" />
        <Conditional IsOn="false" />
      </StatusEffect>
      <!-- add the temporary "wet" tag and spawn water drop particles for 10 seconds after the item entered water to block reigniting it again for that duration -->
      <StatusEffect type="InWater" target="This" tags="wet" setvalue="true" duration="10" stackable="false" />
      <!-- add the tag "lit" and change the hand position if the item was in real fire -->
      <StatusEffect type="OnFire" target="This" tags="lit" handle1="0,-35" setvalue="true" interval="1" disabledeltatime="true" />
      <!-- constantly reduce the condition of the item while it is in a real fire -->
      <StatusEffect type="OnFire" target="This" Condition="-10.0" interval="1" disabledeltatime="true" />
      <!-- reduce the condition of the cigarette and prevent it from producing smoke (the StatusEffects in LightComponent) when actively smoking it (using) while it is on (tag "lit") by adding the temporary tag "inhaling" -->
      <StatusEffect type="OnUse" target="This,Character" tags="lit,inhaling" condition="-1" interval="0.1" duration="0.2">
        <Conditional HasTag="lit" />
      </StatusEffect>
      <!-- remove the ability to breath oxygen, apply the custom "smokingcigarette" affliction and play a sizzling sound while inhaling the smoke (using the item while it has the tag "lit") -->
      <StatusEffect type="OnUse" target="This,Character" availableoxygen="0" setvalue="true" interval="0.1" duration="0.2" multiplyafflictionsbymaxvitality="true">
        <Conditional HasTag="lit" />
        <Affliction identifier="smoking" amount="0.01" />
        <!-- affliction tracks time spent inhaling and creates different amount of smoke with exhaling sound depending on the duration you were inhaling (using the item while it has the tag "lit") -->
        <Affliction identifier="oxygenlow" amount="0.15" />
        <Sound file="%ModDir%/Workshop/Immersive Ignitables Expansion Pack/SmokingCigaretteLoop.ogg" range="200" volume="1.0" loop="true" />
      </StatusEffect>
      <!-- apply and reduce various afflictions when smoking (using the item while it has the tag "lit") | separate effect to allow better control over the applied amounts (configured value per second) -->
      <StatusEffect type="OnUse" target="This,Character" multiplyafflictionsbymaxvitality="true">
        <Conditional HasTag="lit" />
        <ReduceAffliction identifier="he-tobaccoaddiction" amount="0.1" />
        <ReduceAffliction identifier="psychosisresistance" amount="4" />
        <ReduceAffliction identifier="ii_recenttobaccointake" amount="50" />
        <Affliction identifier="he-tobaccowithdrawal" amount="2.0" />
        <Affliction identifier="psychosis" amount="1.2" />
        <Affliction identifier="hallucinating" amount="2" />
        <Affliction identifier="watchersgaze" amount="1" />
      </StatusEffect>
      <!-- change hand position when holding the item while not using it (no temporary "inhaling" tag) -->
      <StatusEffect type="OnActive" target="This" handle1="-30,-35" setvalue="true">
        <Conditional HasStatusTag="neq inhaling" />
      </StatusEffect>
      <!-- start a fire when it burns out (breaks) inside a trash can -->
      <StatusEffect type="OnBroken" target="This">
        <Conditional HasTag="outposttrashcan" targetcontainer="true" />
        <Fire size="1" />
      </StatusEffect>
      <!-- remove the item when it is broken -->
      <StatusEffect type="OnBroken" target="This">
        <Remove />
      </StatusEffect>
    </Holdable>
  </Item>
  <Item name="Pack of Spookers" identifier="packofspookers" category="Equipment" health="100" maxstacksize="1" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="1" Tags="smallitem,cigbox" description="Spooky scary skeletons send shivers down your spine. A proud product of the ''Clowns for the Entertainment of Children.'' How wholesome! A small label on the front says ''Made for kids! Ages 6 and up!'' The back seems to be a pumpkin mask that can be cut out. Perhaps we should put the pack in the deconstructor?" cargocontaineridentifier="metalcrate" scale="0.36" impactsoundtag="impact_soft" canflipx="false">
    <PreferredContainer primary="wreckcrewcab,abandonedcrewcab,outpostcrewcab,beaconengcab" amount="1" spawnprobability="0.005" />
    <PreferredContainer primary="wreckstoragecab,abandonedstoragecab" amount="1" spawnprobability="0.002" />
    <PreferredContainer primary="crewcab" spawnprobability="0.01" />
    <Price baseprice="25" displaynonempty="true">
      <Price storeidentifier="merchantclown" minavailable="3" maxavailable="5">
        <Reputation faction="clowns" min="10" />
      </Price>
    </Price>
    <Deconstruct time="10" chooserandom="true" amount="1">
      <Item identifier="spookermask" commonness="0.99" amount="1" />
      <Item identifier="funkyspookermask" commonness="0.01" amount="1" />
    </Deconstruct>
    <Fabricate suitablefabricators="vendingmachine" requiredtime="1" requiredmoney="200" fabricationlimitmin="1" fabricationlimitmax="1" />
    <InventoryIcon texture="spooky.png" sourcerect="110,0,38,52" origin="0.5,0.5" />
    <Sprite texture="spooky.png" sourcerect="110,0,38,52" depth="0.55" origin="0.5,0.5" />
    <Body width="34" height="48" density="10.7" />
    <Holdable canbecombined="true" slots="Any,LeftHand" handle1="0,-10" handle2="0,-10" holdangle="0" holdpos="36,-20" msg="ItemMsgPickUpSelect">
      <!-- damage the item when it is in a real fire and add the temporary tag "onfire" -->
      <StatusEffect type="OnFire" target="This" Condition="-5.0" tags="onfire" duration="1" stackable="false" />
      <!-- remove the item when it breaks -->
      <StatusEffect type="OnBroken" target="This">
        <Remove />
      </StatusEffect>
    </Holdable>
    <!-- GreaterComponent timeframe used to track if the item is freshly spawned or old so it doesn't spawn more cigarettes -->
    <GreaterComponent canbeselected="false" canbepicked="false" allowingameediting="false" timeframe="0" />
    <!-- ItemContainer for the cigarettes. Can't make use of spawnwithid="cigarette,cigarette,..." because it would respawn them after every single loading screen if the inventory is empty -->
    <ItemContainer capacity="20" maxstacksize="1" slotsperrow="5" allowaccess="true" drawinventory="true" removecontaineditemsondeconstruct="false">
      <Containable items="cigarette,lighter,idcard" />
      <!-- check once per round (oneshot) if the item spawned cigarettes in its inventory already (timeframe="1") or if it did not spawn them yet (timeframe="0") | if timeframe is below 1, spawn 20 cigarettes in this inventory -->
      <StatusEffect type="Always" target="This" timeframe="1" setvalue="true" disabledeltatime="true" oneshot="true">
        <Conditional timeframe="lt 1" />
        <SpawnItem identifier="spooker''cig''" spawnposition="ThisInventory" spawnifinventoryfull="false" count="20" />
      </StatusEffect>
    </ItemContainer>
  </Item>
  <Item name="Spooker" identifier="spooker''cig''" category="Equipment" maxstacksize="20" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="20" Tags="smallitem,cigarette" description="A very strange nicotineless cigarette that smells of pumpkin and tastes like it too. Advertised as for kids, but theres nothing stopping you from also indulging. Makes you much faster at everything." cargocontaineridentifier="metalcrate" scale="0.2" isshootable="true" RequireAimToUse="true" impactsoundtag="impact_soft">
    <PreferredContainer primary="crewcab" />
    <Deconstruct time="1" />
    <InventoryIcon texture="spooky.png" sourcerect="149,0,64,63" origin="0.5,0.5" />
    <!-- intact cigarette sprite at full condition -->
    <Sprite texture="spooky.png" sourcerect="0,53,80,10" depth="0.55" />
    <!-- BrokenSprite to change the sprite at different condition stages to simulate the cigarette burning down and getting shorter -->
    <BrokenSprite texture="spooky.png" sourcerect="0,63,80,10" depth="0.55" maxcondition="99.9" fadein="false" />
    <BrokenSprite texture="spooky.png" sourcerect="0,73,80,10" depth="0.55" maxcondition="80" fadein="false" />
    <BrokenSprite texture="spooky.png" sourcerect="0,83,80,10" depth="0.55" maxcondition="70" fadein="false" />
    <BrokenSprite texture="spooky.png" sourcerect="0,93,80,10" depth="0.55" maxcondition="60" fadein="false" />
    <BrokenSprite texture="spooky.png" sourcerect="0,103,80,10" depth="0.55" maxcondition="50" fadein="false" />
    <BrokenSprite texture="spooky.png" sourcerect="0,113,80,10" depth="0.55" maxcondition="40" fadein="false" />
    <BrokenSprite texture="spooky.png" sourcerect="0,123,80,10" depth="0.55" maxcondition="30" fadein="false" />
    <BrokenSprite texture="spooky.png" sourcerect="0,133,80,10" depth="0.55" maxcondition="20" fadein="false" />
    <BrokenSprite texture="spooky.png" sourcerect="0,143,80,10" depth="0.55" maxcondition="10" fadein="false" />
    <Body width="78" height="6" density="9.7" />
    <!-- LightComponent that doesn't produce light and only turns on if the item has the tag "lit" while not being in water -->
    <LightComponent range="0" lightcolor="0,0,0,0" castshadows="false" powerconsumption="0" allowingameediting="false" comparison="And">
      <ActiveConditional HasTag="lit" />
      <ActiveConditional InWater="false" />
      <!-- extinguish the item by turning off the LightComponent and adding the tag "unlit" to override the "lit" tag, if the item was put back into the pocket or cabinet, unless it is a trash can -->
      <StatusEffect type="OnActive" target="This" IsOn="false" tags="unlit" setvalue="true" comparison="And">
        <Conditional PhysicsBodyActive="eq false" />
        <Conditional HasTag="neq outposttrashcan" targetcontainer="true" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is above 50 and procude smoke particles while not inhaling (using) -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="gt 50" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="7" distancemax="7" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is between 30 and 50 and procude smoke particles while not inhaling (using) with adjusted particle position to match the different sprite length -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="lte 50" />
        <Conditional condition="gt 30" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="5" distancemax="5" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is between 0 and 30 and procude smoke particles while not inhaling (using) with adjusted particle position to match the different sprite length -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="lte 30" />
        <Conditional condition="gt 0" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="3" distancemax="3" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
    </LightComponent>
    <Holdable canbepicked="true" canBeCombined="false" removeOnCombined="false" slots="Any,RightHand" handle1="-25,-30" aimpos="22,13" holdangle="0" holdpos="30,-5" aimangle="-5" aimable="false" swingwhenaiming="false" swingamount="6,3" swingspeed="0.2" msg="ItemMsgPickUpSelect">
      <!-- add the tag "ignitable" when the item is being held while it is not yet lit so it can be lit up by a lighter -->
      <StatusEffect type="OnSecondaryUse" target="This" tags="ignitable" targetitemcomponent="LightComponent" setvalue="true" comparison="And" delay="1" checkconditionalalways="true">
        <Conditional HasTag="neq ignitable" />
        <Conditional HasTag="neq lit" />
        <Conditional IsOn="false" />
      </StatusEffect>
      <!-- add the temporary "wet" tag and spawn water drop particles for 10 seconds after the item entered water to block reigniting it again for that duration -->
      <StatusEffect type="InWater" target="This" tags="wet" setvalue="true" duration="10" stackable="false" />
      <!-- add the tag "lit" and change the hand position if the item was in real fire -->
      <StatusEffect type="OnFire" target="This" tags="lit" handle1="0,-35" setvalue="true" interval="1" disabledeltatime="true" />
      <!-- constantly reduce the condition of the item while it is in a real fire -->
      <StatusEffect type="OnFire" target="This" Condition="-10.0" interval="1" disabledeltatime="true" />
      <!-- reduce the condition of the cigarette and prevent it from producing smoke (the StatusEffects in LightComponent) when actively smoking it (using) while it is on (tag "lit") by adding the temporary tag "inhaling" -->
      <StatusEffect type="OnUse" target="This,Character" tags="lit,inhaling" condition="-1" interval="0.1" duration="0.2">
        <Conditional HasTag="lit" />
      </StatusEffect>
      <!-- remove the ability to breath oxygen, apply the custom "smokingcigarette" affliction and play a sizzling sound while inhaling the smoke (using the item while it has the tag "lit") -->
      <StatusEffect type="OnUse" target="This,Character" availableoxygen="0" setvalue="true" interval="0.1" duration="0.2" multiplyafflictionsbymaxvitality="true">
        <Conditional HasTag="lit" />
        <Affliction identifier="smokingnicotineless" amount="0.01" />
        <!-- affliction tracks time spent inhaling and creates different amount of smoke with exhaling sound depending on the duration you were inhaling (using the item while it has the tag "lit") -->
        <Affliction identifier="oxygenlow" amount="0.10" />
        <Sound file="%ModDir%/Workshop/Immersive Ignitables Expansion Pack/mellonSmoke.ogg" range="200" volume="2.0" loop="true" />
      </StatusEffect>
      <!-- apply and reduce various afflictions when smoking (using the item while it has the tag "lit") | separate effect to allow better control over the applied amounts (configured value per second) -->
      <StatusEffect type="OnUse" target="This,Character" multiplyafflictionsbymaxvitality="true">
        <Conditional HasTag="lit" />
        <Affliction identifier="psychosisresistance" amount="4" />
        <Affliction identifier="surgarrush" amount="10" />
        <ReduceAffliction identifier="pumpkinDeath" amount="14" />
        <ReduceAffliction type="damage" amount="0.2" />
        <Affliction identifier="hallucinating" amount="6" />
      </StatusEffect>
      <!-- change hand position when holding the item while not using it (no temporary "inhaling" tag) -->
      <StatusEffect type="OnActive" target="This" handle1="-30,-35" setvalue="true">
        <Conditional HasStatusTag="neq inhaling" />
      </StatusEffect>
      <!-- start a fire when it burns out (breaks) inside a trash can -->
      <StatusEffect type="OnBroken" target="This">
        <Conditional HasTag="outposttrashcan" targetcontainer="true" />
        <Fire size="1" />
      </StatusEffect>
      <!-- remove the item when it is broken -->
      <StatusEffect type="OnBroken" target="This">
        <Remove />
      </StatusEffect>
    </Holdable>
  </Item>
  <Item name="Spooky Pumpkin Mask" identifier="spookermask" category="Equipment" cargocontaineridentifier="metalcrate" tags="smallitem,clownmask,clowns" description="A spooky pumpkin mask from a Spooker Package. Very cute! Counts as a clown mask." scale="0.2">
    <Price baseprice="40" canbespecial="false" sold="false" />
    <PreferredContainer primary="outpostcrewcabinet" amount="1" spawnprobability="0.00" />
    <PreferredContainer primary="crewcab" />
    <Sprite name="Clown Mask" texture="%ModDir%/Workshop/Immersive Ignitables Expansion Pack/funmask.png" depth="0.6" sourcerect="0,0,400,400" origin="0.5,0.5" scale="0.1" />
    <Body width="40" radius="30" density="15" />
    <Deconstruct time="10">
      <Item identifier="carbon" />
    </Deconstruct>
    <Wearable limbtype="Head" slots="Any,Head" msg="ItemMsgPickUpSelect">
      <sprite name="Clown Mask Wearable" texture="%ModDir%/Workshop/Immersive Ignitables Expansion Pack/funmask.png" limb="Head" inheritlimbdepth="true" inheritscale="true" ignorelimbscale="true" scale="0.2" sourcerect="0,0,400,400" origin="0.5,0.6" />
      <StatusEffect tags="clown" type="OnWearing" target="Character" HideFace="true" duration="0.1" stackable="false" />
      <damagemodifier armorsector="0.0,360.0" afflictionidentifiers="explosiondamage" damagemultiplier="0.6" damagesound="" deflectprojectiles="true" />
      <StatusEffect target="Character" type="OnWearing">
        <ReduceAffliction type="damage" amount="0.1" />
        <ReduceAffliction type="bleeding" amount="0.05" />
      </StatusEffect>
    </Wearable>
  </Item>
  <Item name="Weird Pumpkin Mask" identifier="funkyspookermask" category="Equipment" cargocontaineridentifier="metalcrate" tags="smallitem,clownmask,clowns" description="A spooky pumpkin mask from a Spooker Package. Very cute! This one feels different. In a good and happy way!" scale="0.2">
    <Price baseprice="40" canbespecial="false" sold="false" />
    <PreferredContainer primary="outpostcrewcabinet" amount="1" spawnprobability="0.00" />
    <PreferredContainer primary="crewcab" />
    <Sprite name="Clown Mask" texture="%ModDir%/Workshop/Immersive Ignitables Expansion Pack/funmask.png" depth="0.6" sourcerect="0,0,400,400" origin="0.5,0.5" scale="0.1" />
    <Body width="40" radius="30" density="15" />
    <Deconstruct time="10">
      <Item identifier="carbon" />
    </Deconstruct>
    <Wearable limbtype="Head" slots="Any,Head" msg="ItemMsgPickUpSelect">
      <sprite name="Clown Mask Wearable" texture="%ModDir%/Workshop/Immersive Ignitables Expansion Pack/funmask.png" limb="Head" inheritlimbdepth="true" inheritscale="true" ignorelimbscale="true" scale="0.2" sourcerect="0,0,400,400" origin="0.5,0.6" />
      <StatusEffect tags="clown" type="OnWearing" target="Character" HideFace="true" duration="0.1" stackable="false" />
      <damagemodifier armorsector="0.0,360.0" afflictionidentifiers="explosiondamage" damagemultiplier="0.6" damagesound="" deflectprojectiles="true" />
      <StatusEffect target="Character" type="OnWearing">
        <ReduceAffliction type="damage" amount="0.5" />
        <ReduceAffliction type="bleeding" amount="0.25" />
      </StatusEffect>
    </Wearable>
  </Item>
  <Item name="Pack of Trenchmen" identifier="packofgermancigarettes" category="Equipment" health="100" maxstacksize="1" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="1" Tags="smallitem,cigbox" description="A very old and mangled carton of cigarettes that's seemingly from Earth. Holds up to 20 cigarettes. A fancy text across the front reads ''A trench diggers best friend!''" cargocontaineridentifier="metalcrate" scale="0.36" impactsoundtag="impact_soft" canflipx="false">
    <PreferredContainer primary="wreckcrewcab,abandonedcrewcab,outpostcrewcab,beaconengcab" amount="1" spawnprobability="0.03" />
    <PreferredContainer primary="wreckstoragecab,abandonedstoragecab" amount="1" spawnprobability="0.01" />
    <PreferredContainer primary="crewcab" />
    <Price baseprice="50" displaynonempty="true" sold="false">
      <Price storeidentifier="merchantoutpost" />
      <Price storeidentifier="merchantcity" />
      <Price storeidentifier="merchantresearch" multiplier="1.25" />
      <Price storeidentifier="merchantmilitary" multiplier="1.25" />
      <Price storeidentifier="merchantmine" multiplier="0.9" />
      <Price storeidentifier="merchantengineering" multiplier="0.9" />
    </Price>
    <Deconstruct time="7" />
    <InventoryIcon texture="Trenchman.png" sourcerect="110,0,38,52" origin="0.5,0.5" />
    <Sprite texture="Trenchman.png" sourcerect="110,0,38,52" depth="0.55" origin="0.5,0.5" />
    <Body width="34" height="48" density="10.7" />
    <Holdable canbecombined="true" slots="Any,LeftHand" handle1="0,-10" handle2="0,-10" holdangle="0" holdpos="36,-20" msg="ItemMsgPickUpSelect">
      <!-- damage the item when it is in a real fire and add the temporary tag "onfire" -->
      <StatusEffect type="OnFire" target="This" Condition="-5.0" tags="onfire" duration="1" stackable="false" />
      <!-- remove the item when it breaks -->
      <StatusEffect type="OnBroken" target="This">
        <Remove />
      </StatusEffect>
    </Holdable>
    <!-- GreaterComponent timeframe used to track if the item is freshly spawned or old so it doesn't spawn more cigarettes -->
    <GreaterComponent canbeselected="false" canbepicked="false" allowingameediting="false" timeframe="0" />
    <!-- ItemContainer for the cigarettes. Can't make use of spawnwithid="cigarette,cigarette,..." because it would respawn them after every single loading screen if the inventory is empty -->
    <ItemContainer capacity="20" maxstacksize="1" slotsperrow="5" allowaccess="true" drawinventory="true" removecontaineditemsondeconstruct="false">
      <Containable items="cigarette,lighter,idcard" />
      <!-- check once per round (oneshot) if the item spawned cigarettes in its inventory already (timeframe="1") or if it did not spawn them yet (timeframe="0") | if timeframe is below 1, spawn 20 cigarettes in this inventory -->
      <StatusEffect type="Always" target="This" timeframe="1" setvalue="true" disabledeltatime="true" oneshot="true">
        <Conditional timeframe="lt 1" />
        <SpawnItem identifier="germancigarette" spawnposition="ThisInventory" spawnifinventoryfull="false" count="20" />
      </StatusEffect>
    </ItemContainer>
  </Item>
  <Item name="Trenchman" identifier="germancigarette" category="Equipment" maxstacksize="20" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="20" Tags="smallitem,cigarette" description="A WW1 soldiers life is hell, how'd this even get on Europa? Does not go out when put in water for some reason. Which is quite concerning if you like having healthy lungs." cargocontaineridentifier="metalcrate" scale="0.2" isshootable="true" RequireAimToUse="true" impactsoundtag="impact_soft">
    <PreferredContainer primary="crewcab" />
    <Deconstruct time="1" />
    <InventoryIcon texture="Trenchman.png" sourcerect="149,0,64,63" origin="0.5,0.5" />
    <!-- intact cigarette sprite at full condition -->
    <Sprite texture="Trenchman.png" sourcerect="0,53,80,12" depth="0.55" />
    <!-- BrokenSprite to change the sprite at different condition stages to simulate the cigarette burning down and getting shorter -->
    <BrokenSprite texture="Trenchman.png" sourcerect="0,63,80,12" depth="0.55" maxcondition="99.9" fadein="false" />
    <BrokenSprite texture="Trenchman.png" sourcerect="0,75,80,12" depth="0.55" maxcondition="80" fadein="false" />
    <BrokenSprite texture="Trenchman.png" sourcerect="0,87,80,12" depth="0.55" maxcondition="70" fadein="false" />
    <BrokenSprite texture="Trenchman.png" sourcerect="0,99,80,12" depth="0.55" maxcondition="60" fadein="false" />
    <BrokenSprite texture="Trenchman.png" sourcerect="0,111,80,12" depth="0.55" maxcondition="50" fadein="false" />
    <BrokenSprite texture="Trenchman.png" sourcerect="0,123,80,12" depth="0.55" maxcondition="40" fadein="false" />
    <BrokenSprite texture="Trenchman.png" sourcerect="0,135,80,12" depth="0.55" maxcondition="30" fadein="false" />
    <BrokenSprite texture="Trenchman.png" sourcerect="0,133,80,12" depth="0.55" maxcondition="20" fadein="false" />
    <BrokenSprite texture="Trenchman.png" sourcerect="0,147,80,12" depth="0.55" maxcondition="10" fadein="false" />
    <Body width="78" height="6" density="9.7" />
    <!-- LightComponent that doesn't produce light and only turns on if the item has the tag "lit" while not being in water -->
    <LightComponent range="0" lightcolor="0,0,0,0" castshadows="false" powerconsumption="0" allowingameediting="false" comparison="And">
      <ActiveConditional HasTag="lit" />
      <!-- extinguish the item by turning off the LightComponent and adding the tag "unlit" to override the "lit" tag, if the item was put back into the pocket or cabinet, unless it is a trash can -->
      <StatusEffect type="OnActive" target="This" IsOn="false" tags="unlit" setvalue="true" comparison="And">
        <Conditional PhysicsBodyActive="eq false" />
        <Conditional HasTag="neq outposttrashcan" targetcontainer="true" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is above 50 and procude smoke particles while not inhaling (using) -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="gt 50" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="7" distancemax="7" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is between 30 and 50 and procude smoke particles while not inhaling (using) with adjusted particle position to match the different sprite length -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="lte 50" />
        <Conditional condition="gt 30" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="5" distancemax="5" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
      <!-- constantly burn down the cigarette when it is lit, its condition is between 0 and 30 and procude smoke particles while not inhaling (using) with adjusted particle position to match the different sprite length -->
      <StatusEffect type="OnActive" target="This" condition="-0.5" comparison="And">
        <Conditional HasStatusTag="neq inhaling" />
        <Conditional condition="lte 30" />
        <Conditional condition="gt 0" />
        <ParticleEmitter particle="fleshsmoke" colormultiplier="120,120,120,150" particlespersecond="3" copyentityangle="true" anglemin="0" anglemax="0" distancemin="3" distancemax="3" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
      </StatusEffect>
    </LightComponent>
    <Holdable canbepicked="true" canBeCombined="false" removeOnCombined="false" slots="Any,RightHand" handle1="-25,-30" aimpos="22,13" holdangle="0" holdpos="30,-5" aimangle="-5" aimable="false" swingwhenaiming="false" swingamount="6,3" swingspeed="0.2" msg="ItemMsgPickUpSelect">
      <!-- add the tag "ignitable" when the item is being held while it is not yet lit so it can be lit up by a lighter -->
      <StatusEffect type="OnSecondaryUse" target="This" tags="ignitable" targetitemcomponent="LightComponent" setvalue="true" comparison="And" delay="1" checkconditionalalways="true">
        <Conditional HasTag="neq ignitable" />
        <Conditional HasTag="neq lit" />
        <Conditional IsOn="false" />
      </StatusEffect>
      <!-- add the tag "lit" and change the hand position if the item was in real fire -->
      <StatusEffect type="OnFire" target="This" tags="lit" handle1="0,-35" setvalue="true" interval="1" disabledeltatime="true" />
      <!-- constantly reduce the condition of the item while it is in a real fire -->
      <StatusEffect type="OnFire" target="This" Condition="-10.0" interval="1" disabledeltatime="true" />
      <!-- reduce the condition of the cigarette and prevent it from producing smoke (the StatusEffects in LightComponent) when actively smoking it (using) while it is on (tag "lit") by adding the temporary tag "inhaling" -->
      <StatusEffect type="OnUse" target="This,Character" tags="lit,inhaling" condition="-1" interval="0.1" duration="0.2">
        <Conditional HasTag="lit" />
      </StatusEffect>
      <!-- remove the ability to breath oxygen, apply the custom "smokingcigarette" affliction and play a sizzling sound while inhaling the smoke (using the item while it has the tag "lit") -->
      <StatusEffect type="OnUse" target="This,Character" availableoxygen="0" setvalue="true" interval="0.1" duration="0.2" multiplyafflictionsbymaxvitality="true">
        <Conditional HasTag="lit" />
        <Affliction identifier="smoking" amount="0.01" />
        <!-- affliction tracks time spent inhaling and creates different amount of smoke with exhaling sound depending on the duration you were inhaling (using the item while it has the tag "lit") -->
        <Affliction identifier="oxygenlow" amount="0.15" />
        <Sound file="%ModDir%/Workshop/Immersive Ignitables Expansion Pack/SmokingCigaretteLoop.ogg" range="200" volume="1.0" loop="true" />
      </StatusEffect>
      <!-- apply and reduce various afflictions when smoking (using the item while it has the tag "lit") | separate effect to allow better control over the applied amounts (configured value per second) -->
      <StatusEffect type="OnUse" target="This,Character" multiplyafflictionsbymaxvitality="true">
        <Conditional HasTag="lit" />
        <Affliction identifier="he-tobaccoaddiction" amount="0.1" />
        <Affliction identifier="ii_recenttobaccointake" amount="50" />
        <ReduceAffliction type="tobaccocraving" amount="2.0" />
        <Affliction identifier="trenchmancig" amount="5" />
        <Affliction identifier="psychosisresistance" amount="20" />
        <ReduceAffliction identifier="psychosis" amount="5" />
        <ReduceAffliction identifier="hallucinating" amount="10" />
        <ReduceAffliction identifier="watchersgaze" amount="100" />
      </StatusEffect>
      <!-- change hand position when holding the item while not using it (no temporary "inhaling" tag) -->
      <StatusEffect type="OnActive" target="This" handle1="-30,-35" setvalue="true">
        <Conditional HasStatusTag="neq inhaling" />
      </StatusEffect>
      <!-- start a fire when it burns out (breaks) inside a trash can -->
      <StatusEffect type="OnBroken" target="This">
        <Conditional HasTag="outposttrashcan" targetcontainer="true" />
        <Fire size="1" />
      </StatusEffect>
      <!-- remove the item when it is broken -->
      <StatusEffect type="OnBroken" target="This">
        <Remove />
      </StatusEffect>
    </Holdable>
  </Item>
  <Item name="Katz' Engraved Zippo" identifier="katzzippolighter" description="An expensive and luxurious golden zippo lighter. Engraved with the letters ''Dr.'' on the front and a long gone return phone number and instructions telling the reader to return the lighter to the celebrity doctor named ''Dr. Katz'' if it gets lost on the back. Maybe you'll find him one day..." category="Equipment" maxstacksize="1" maxstacksizecharacterinventory="1" MaxStackSizeHoldableOrWearableInventory="1" Tags="smallitem,lighter" cargocontaineridentifier="metalcrate" scale="0.3" impactsoundtag="impact_metal_light" isshootable="true" RequireAimToUse="true" hideconditionbar="true">
    <PreferredContainer primary="abandonedtoxcab,wrecktoxcab" amount="1" spawnprobability="0.0005" />
    <PreferredContainer primary="abandonedmedcab,wreckmedcab" amount="1" spawnprobability="0.0001" />
    <PreferredContainer primary="crewcab" />
    <Price baseprice="5000" sold="false" displaynonempty="true">
      <Price storeidentifier="merchantoutpost" />
      <Price storeidentifier="merchantcity" />
      <Price storeidentifier="merchantresearch" multiplier="1.25" />
      <Price storeidentifier="merchantmilitary" multiplier="1.25" />
      <Price storeidentifier="merchantmine" multiplier="0.9" />
      <Price storeidentifier="merchantengineering" multiplier="0.9" />
    </Price>
    <InventoryIcon texture="DoctorKatzSpecials.png" sourcerect="0,0,44,51" origin="0.5,0.5" />
    <!-- closed sprite -->
    <Sprite texture="DoctorKatzSpecials.png" sourcerect="45,11,29,40" depth="0.55" />
    <!-- open sprite -->
    <BrokenSprite texture="DoctorKatzSpecials.png" sourcerect="0,0,44,51" origin="0.5,0.5" depth="0.55" maxcondition="99" fadein="false" />
    <Body width="27" height="38" density="12.7" />
    <!-- LightComponent to shortly light up whenever the lighterspark (effect_lighterfail) item is contained which removes itself after 0.1s -->
    <LightComponent range="50" lightcolor="222,111,22,127" powerconsumption="0" castshadows="false" allowingameediting="false">
      <IsActive HasTag="lighterspark" targetcontaineditem="true" />
      <!-- create spark particles when the light is on -->
      <StatusEffect type="OnActive" target="This">
        <ParticleEmitter particle="lighterspark" particlespersecond="50" copyentityangle="true" anglemin="82" anglemax="98" distancemin="0" distancemax="0" velocitymin="75" velocitymax="75" scalemin="0.5" scalemax="0.5" />
      </StatusEffect>
    </LightComponent>
    <!-- LightComponent that turns on if the lighteron (effect_lightersuccess) item is contained to iluminate the area and consume fuel (increase timeframe) while it is on -->
    <LightComponent range="100" lightcolor="222,111,22,127" Flicker="0.2" powerconsumption="0" castshadows="false" allowingameediting="false">
      <IsActive HasTag="lighteron" targetcontaineditem="true" />
      <StatusEffect type="OnActive" target="This">
        <ParticleEmitter particle="smoke" particlespersecond="5" copyentityangle="true" anglemin="98" anglemax="98" distancemin="7" distancemax="7" velocitymin="0" velocitymax="0" scalemin="0.1" scalemax="0.1" />
        <ParticleEmitter particle="lighterflame" particlespersecond="5" copyentityangle="true" anglemin="98" anglemax="98" distancemin="7" distancemax="7" velocitymin="0" velocitymax="0" scalemin="0.05" scalemax="0.05" />
      </StatusEffect>
    </LightComponent>
    <Holdable canbepicked="true" canBeCombined="false" removeOnCombined="false" slots="Any,LeftHand" aimpos="33,9" handle2="-15,-25" holdangle="0" holdpos="36,-20" aimangle="0" aimable="false" swingwhenaiming="true" swingamount="6,3" swingspeed="0.2" msg="ItemMsgPickUpSelect">
      <!-- 3a. spawn random effect item inside the lighter to either turn it on or fail the attempt. Get's blocked by the "using" tag which is applied while the use key is kept being held so you have to release it to try again -->
      <StatusEffect type="OnUse" target="This" SpawnItemRandomly="True" interval="0.1" comparison="And">
        <Conditional HasStatusTag="neq using" />
        <SpawnItem identifier="effect_lightersuccess" spawnposition="ThisInventory" spawnifinventoryfull="false" spawnifcantbecontained="false" />
      </StatusEffect>
      <!-- 2. apply the temporary "using" tag if the item is being used while aiming (also reapply the temporary "aiming" tag to make sure it doesn't get overridden) -->
      <StatusEffect type="OnUse" target="This" tags="using,aiming" interval="0.1" duration="0.2">
        <Conditional HasStatusTag="aiming" />
      </StatusEffect>
      <!-- 1. apply the temporary "aiming" tag if the item is being aimed -->
      <StatusEffect type="OnSecondaryUse" target="This" tags="aiming" interval="0.1" duration="0.2" />
      <!-- set the condition to 99 to render the open sprite when the item is being aimed -->
      <StatusEffect type="OnSecondaryUse" target="This" condition="99" setvalue="true">
        <Conditional condition="100" />
        <Sound file="%ModDir%/Workshop/Immersive Ignitables Expansion Pack/LighterOpen.ogg" range="200" volume="1.0" loop="false" />
      </StatusEffect>
      <!-- repair the item if it's not being aimed to render the closed sprite again -->
      <StatusEffect type="OnContained" target="This" condition="100" setvalue="true" interval="0.1" comparison="And">
        <Conditional HasStatusTag="neq aiming" />
        <Conditional condition="99" />
        <Sound file="%ModDir%/Workshop/Immersive Ignitables Expansion Pack/LighterClose.ogg" range="200" volume="1.0" loop="false" />
      </StatusEffect>
    </Holdable>
    <ItemContainer capacity="1" maxstacksize="1" allowaccess="false" drawinventory="false" removecontaineditemsondeconstruct="true">
      <Containable items="effect" />
    </ItemContainer>
  </Item>
</Items>